var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,n=(e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,o=(t,o)=>{for(var r in o||(o={}))e.call(o,r)&&n(t,r,o[r]);if(s)for(var r of s(o))i.call(o,r)&&n(t,r,o[r]);return t};import{V as r,m as a,i as l,I as c,P as u,S as d,F as p,N as h,s as m,l as f,w as g,c as v,e as k,t as b,a as _,b as y,d as $,f as w,g as x,k as S,D as C,h as E,E as O,j as T,n as I,o as L,T as A,u as F,p as B,q as j,r as D,v as M,x as P,y as R,z as N,A as q,B as z,C as U,G as H,H as V,J as K,K as W}from"./vendor.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(s){const i=new URL(t,location),n=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((s,o)=>{const r=new URL(t,i);if(self[e].moduleMap[r])return s(self[e].moduleMap[r]);const a=new Blob([`import * as m from '${r}';`,`${e}.moduleMap['${r}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){o(new Error(`Failed to import: ${t}`)),n(l)},onload(){s(self[e].moduleMap[r]),n(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");var G=t=>{if(void 0!==t)return JSON.parse(JSON.stringify(t))},Y=(t,e)=>{let s=null;return function(){clearTimeout(s),s=setTimeout((()=>t.apply(this,arguments)),e)}};function J(t,e){for(const s of Object.keys(e))e[s]instanceof Object&&Object.assign(e[s],J(t[s]||{},e[s]));return Object.assign(t||{},e),t}async function X(t){const e=await t.text();let s;try{s=JSON.parse(e)}catch(i){window.panel.$vue.$api.onParserError(e)}return s}var Z=t=>({running:0,async request(e,s,i=!1){s=Object.assign(s||{},{credentials:"same-origin",cache:"no-store",headers:o({"x-requested-with":"xmlhttprequest","content-type":"application/json"},s.headers)}),t.methodOverwrite&&"GET"!==s.method&&"POST"!==s.method&&(s.headers["x-http-method-override"]=s.method,s.method="POST"),s=t.onPrepare(s);const n=e+"/"+JSON.stringify(s);t.onStart(n,i),this.running++;const r=await fetch([t.endpoint,e].join(t.endpoint.endsWith("/")||e.startsWith("/")?"":"/"),s);try{const e=await X(r);if(r.status<200||r.status>299)throw e;if(e.status&&"error"===e.status)throw e;let s=e;return e.data&&e.type&&"model"===e.type&&(s=e.data),this.running--,t.onComplete(n),t.onSuccess(e),s}catch(a){throw this.running--,t.onComplete(n),t.onError(a),a}},async get(t,e,s,i=!1){return e&&(t+="?"+Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>t+"="+e[t])).join("&")),this.request(t,Object.assign(s||{},{method:"GET"}),i)},async post(t,e,s,i="POST",n=!1){return this.request(t,Object.assign(s||{},{method:i,body:JSON.stringify(e)}),n)},async patch(t,e,s,i=!1){return this.post(t,e,s,"PATCH",i)},async delete(t,e,s,i=!1){return this.post(t,e,s,"DELETE",i)}});const Q={base:null,csrf:null,page:null,swap:null,init({csrf:t,page:e,swap:s,base:i}){this.base=i||document.querySelector("base").href,this.csrf=t,this.swap=s,this.setPage(e),window.addEventListener("popstate",this.onPopstateEvent.bind(this)),document.addEventListener("scroll",Y(this.onScrollEvent.bind(this),100),!0)},arrayToString:t=>!1===Array.isArray(t)?String(t):t.join(","),body:t=>"object"==typeof t?JSON.stringify(t):t,component:t=>r.component(t),data:t=>(["$config","$language","$languages","$license","$menu","$multilang","$permissions","$system","$translation","$urls","$user","$view"].forEach((e=>{void 0!==t[e]?r.prototype[e]=window.panel[e]=t[e]:r.prototype[e]=t[e]=window.panel[e]})),t.$translation&&(document.documentElement.lang=t.$translation.code),t.$view.title?document.title=t.$view.title+" | "+t.$system.title:document.title=t.$system.title,t),async go(t,e){e=o({headers:{},only:[],preserveScroll:!1,preserveState:!1,globals:!1,silent:!1},e||{}),this.saveScroll();const s=this.arrayToString(e.globals),i=this.arrayToString(e.only);let n=await this.request(t,o(o({},e),{headers:o({"X-Fiber-Globals":s,"X-Fiber-Only":i},e.headers)}));return i.length&&(n=J(this.page,n)),this.setPage(n,e)},async onPopstateEvent(){this.reload()},onScrollEvent(t){"function"==typeof t.target.hasAttribute&&t.target.hasAttribute("scroll-region")&&this.saveScroll()},query(t={},e={}){let s=new URLSearchParams(e);return"object"!=typeof t&&(t={}),Object.entries(t).forEach((([t,e])=>{null!==e&&s.set(t,e)})),s},reload(t={}){return this.go(window.location.href,o(o({},t),{preserveScroll:!0,preserveState:!0}))},async request(t,e={}){e=o({method:"GET",query:{},silent:!1},e),document.dispatchEvent(new CustomEvent("fiber.start",{detail:e}));try{const s=this.url(t,e.query),i=await fetch(s,{method:e.method,body:this.body(e.body),credentials:"same-origin",cache:"no-store",headers:o({"X-CSRF":this.csrf,"X-Fiber":!0,"X-Fiber-Referrer":this.page.$view.path},e.headers)});return await X(i)}finally{document.dispatchEvent(new Event("fiber.finish"))}},resetScroll(){document.documentElement.scrollTop=0,document.documentElement.scrollLeft=0,this.scrollRegions().forEach((t=>{t.scrollTop=0,t.scrollLeft=0})),this.saveScroll()},restoreScroll(){this.page.scrollRegions&&this.scrollRegions().forEach(((t,e)=>{t.scrollTop=this.page.scrollRegions[e].top,t.scrollLeft=this.page.scrollRegions[e].left}))},saveScroll(){const t=Array.from(this.scrollRegions());this.state(o(o({},this.page),{scrollRegions:t.map((t=>({top:t.scrollTop,left:t.scrollLeft})))}))},scrollRegions:()=>document.querySelectorAll("[scroll-region]"),async setPage(t,{replace:e=!1,preserveScroll:s=!1,preserveState:i=!1}={}){const n=await this.component(t.$view.component);t.scrollRegions=t.scrollRegions||[],e||this.url(t.$url).href===window.location.href?this.state(t):this.state(t,"push");let o=G(t);o=this.data(o),await this.swap({component:n,page:o,preserveState:i}),s||this.resetScroll()},state(t,e="replace"){this.page=t,window.history[e+"State"](t,"",t.$url)},url(t="",e={}){return(t="string"==typeof t&&null===t.match(/^https?:\/\//)?new URL(this.base+t.replace(/^\//,"")):new URL(t)).search=this.query(e,t.search),t}},tt={install(t){t.prototype.$dialog=async function(t,e={}){try{const s=await Q.request("dialogs/"+t,e);if(!s.$dialog)throw"The dialog could not be loaded";if(s.$dialog.error)throw s.$dialog.error;return this.$store.dispatch("dialog",s.$dialog),s.$dialog}catch(s){console.error(s),this.$store.dispatch("notification/error",s)}},t.prototype.$go=window.panel.$go=function(t,e){return Q.go(this.$url(t),e)},t.prototype.$reload=window.panel.$reload=function(t){return Q.reload(t)},t.prototype.$request=async function(...t){return await Q.request(...t)},t.prototype.$url=function(...t){return Q.url(...t)}}},et={name:"Fiber",data:()=>({component:null,page:window.fiber,key:null}),created(){Q.init({page:window.fiber,csrf:window.fiber.$system.csrf,swap:async({component:t,page:e,preserveState:s})=>{this.component=t,this.page=e,this.key=s?this.key:Date.now()}})},render(t){if(this.component)return t(this.component,{key:this.key,props:this.page.$view.props})}};var st=t=>({breadcrumb(e,s){let i=null,n=[];switch(s){case"UserFile":n.push({label:e.parent.username,link:t.users.link(e.parent.id)}),i="users/"+e.parent.id;break;case"SiteFile":i="site";break;case"PageFile":n=e.parents.map((e=>({label:e.title,link:t.pages.link(e.id)}))),i=t.pages.url(e.parent.id)}return n.push({label:e.filename,link:this.link(i,e.filename)}),n},changeName:async(e,s,i)=>t.patch(e+"/files/"+s+"/name",{name:i}),delete:async(e,s)=>t.delete(e+"/files/"+s),async get(e,s,i){let n=await t.get(e+"/files/"+s,i);return!0===Array.isArray(n.content)&&(n.content={}),n},link(t,e,s){return"/"+this.url(t,e,s)},async options(e,s,i,n={}){const o=this.url(e,s),a=await t.get(o,{select:"options,url"}),l=a.options;let c=[];const u=function(t){return!1===l[t]||!1===n[t]};return"list"===i&&(c.push({click(){window.open(a.url)},icon:"open",text:r.$t("open")}),c.push("-")),c.push({click(){this.$dialog(o+"/changeName")},icon:"title",text:r.$t("rename"),disabled:u("changeName")}),c.push({click:"replace",icon:"upload",text:r.$t("replace"),disabled:u("replace")}),"list"===i&&(c.push("-"),c.push({click(){this.$dialog(o+"/changeSort")},icon:"sort",text:r.$t("file.sort"),disabled:u("update")})),c.push("-"),c.push({click(){this.$dialog(o+"/delete")},icon:"trash",text:r.$t("delete"),disabled:u("delete")}),c},update:async(e,s,i)=>t.patch(e+"/files/"+s,i),url(t,e,s){let i=t+"/files/"+e;return s&&(i+="/"+s),i}}),it=t=>({async blueprint(e){return t.get("pages/"+this.id(e)+"/blueprint")},async blueprints(e,s){return t.get("pages/"+this.id(e)+"/blueprints",{section:s})},breadcrumb(t,e=!0){var s=t.parents.map((t=>({label:t.title,link:this.link(t.id)})));return!0===e&&s.push({label:t.title,link:this.link(t.id)}),s},async changeSlug(e,s){return t.patch("pages/"+this.id(e)+"/slug",{slug:s})},async changeStatus(e,s,i){return t.patch("pages/"+this.id(e)+"/status",{status:s,position:i})},async changeTemplate(e,s){return t.patch("pages/"+this.id(e)+"/template",{template:s})},async changeTitle(e,s){return t.patch("pages/"+this.id(e)+"/title",{title:s})},async children(e,s){return t.post("pages/"+this.id(e)+"/children/search",s)},async create(e,s){return null===e||"/"===e?t.post("site/children",s):t.post("pages/"+this.id(e)+"/children",s)},async delete(e,s){return t.delete("pages/"+this.id(e),s)},async duplicate(e,s,i){return t.post("pages/"+this.id(e)+"/duplicate",{slug:s,children:i.children||!1,files:i.files||!1})},async get(e,s){let i=await t.get("pages/"+this.id(e),s);return!0===Array.isArray(i.content)&&(i.content={}),i},id:t=>t.replace(/\//g,"+"),async files(e,s){return t.post("pages/"+this.id(e)+"/files/search",s)},link(t){return"/"+this.url(t)},async options(e,s="view",i={}){const n=this.url(e),o=await t.get(n,{select:"options, previewUrl"}),a=o.options;let l=[];const c=function(t){return!1===a[t]||!1===i[t]};return"list"===s&&(l.push({click(){window.open(o.previewUrl,"_blank")},icon:"open",text:r.$t("open"),disabled:c("preview")}),l.push("-")),l.push({click(){this.$dialog(n+"/changeTitle",{query:{select:"title"}})},icon:"title",text:r.$t("rename"),disabled:c("changeTitle")}),l.push({click(){this.$dialog(n+"/duplicate")},icon:"copy",text:r.$t("duplicate"),disabled:c("duplicate")}),l.push("-"),l.push({click(){this.$dialog(n+"/changeTitle",{query:{select:"slug"}})},icon:"url",text:r.$t("page.changeSlug"),disabled:c("changeSlug")}),l.push({click(){this.$dialog(n+"/changeStatus")},icon:"preview",text:r.$t("page.changeStatus"),disabled:c("changeStatus")}),"list"===s&&l.push({click(){this.$dialog(n+"/changeSort")},icon:"sort",text:r.$t("page.sort"),disabled:c("sort")}),l.push({click(){this.$dialog(n+"/changeTemplate")},icon:"template",text:r.$t("page.changeTemplate"),disabled:c("changeTemplate")}),l.push("-"),l.push({click(){this.$dialog(n+"/delete")},icon:"trash",text:r.$t("delete"),disabled:c("delete")}),l},async preview(t){return(await this.get(this.id(t),{select:"previewUrl"})).previewUrl},async search(e,s){return e?t.post("pages/"+this.id(e)+"/children/search?select=id,title,hasChildren",s):t.post("site/children/search?select=id,title,hasChildren",s)},async update(e,s){return t.patch("pages/"+this.id(e),s)},url(t,e){let s=null===t?"pages":"pages/"+String(t).replace(/\//g,"+");return e&&(s+="/"+e),s}}),nt=t=>({list:async e=>t.get("roles",e),get:async e=>t.get("roles/"+e),async options(t){return(await this.list(t)).data.map((t=>({info:t.description||`(${r.$t("role.description.placeholder")})`,text:t.title,value:t.name})))}}),ot=t=>({list:async()=>t.get("translations"),get:async e=>t.get("translations/"+e),async options(){return(await this.list()).data.map((t=>({value:t.id,text:t.name})))}}),rt=t=>({blueprint:async e=>t.get("users/"+e+"/blueprint"),blueprints:async(e,s)=>t.get("users/"+e+"/blueprints",{section:s}),breadcrumb:t=>[{link:"/users/"+t.id,label:t.username}],changeEmail:async(e,s)=>t.patch("users/"+e+"/email",{email:s}),changeLanguage:async(e,s)=>t.patch("users/"+e+"/language",{language:s}),changeName:async(e,s)=>t.patch("users/"+e+"/name",{name:s}),changePassword:async(e,s)=>t.patch("users/"+e+"/password",{password:s}),changeRole:async(e,s)=>t.patch("users/"+e+"/role",{role:s}),create:async e=>t.post("users",e),delete:async e=>t.delete("users/"+e),deleteAvatar:async e=>t.delete("users/"+e+"/avatar"),link(t,e){return"/"+this.url(t,e)},async list(e){return t.post(this.url(null,"search"),e)},get:async(e,s)=>t.get("users/"+e,s),async options(e){const s=(await t.get(this.url(e),{select:"options"})).options;let i=[];return i.push({click:"rename",icon:"title",text:r.$t("user.changeName"),disabled:!s.changeName}),i.push({click:"email",icon:"email",text:r.$t("user.changeEmail"),disabled:!s.changeEmail}),i.push({click:"role",icon:"bolt",text:r.$t("user.changeRole"),disabled:!s.changeRole}),i.push({click:"password",icon:"key",text:r.$t("user.changePassword"),disabled:!s.changePassword}),i.push({click:"language",icon:"globe",text:r.$t("user.changeLanguage"),disabled:!s.changeLanguage}),i.push({click:"remove",icon:"trash",text:r.$t("user.delete"),disabled:!s.delete}),i},async roles(e){return(await t.get(this.url(e,"roles"))).data.map((t=>({info:t.description||`(${r.$t("role.description.placeholder")})`,text:t.title,value:t.name})))},search:async e=>t.post("users/search",e),update:async(e,s)=>t.patch("users/"+e,s),url(t,e){let s=t?"users/"+t:"users";return e&&(s+="/"+e),s}}),at=(t={})=>{const e=o(o({},{endpoint:"/api",methodOverwrite:!0,onPrepare:t=>t,onStart(){},onComplete(){},onSuccess(){},onParserError(){},onError(t){throw window.console.log(t.message),t}}),t.config||{});let s=o(o(o({},e),Z(e)),t);return s.auth=(t=>({async login(e){const s={long:e.remember||!1,email:e.email,password:e.password};return await t.post("auth/login",s)},logout:async()=>t.post("auth/logout"),user:async e=>t.get("auth",e),verifyCode:async e=>await t.post("auth/code",{code:e})}))(s),s.files=st(s),s.languages=(t=>({create:async e=>await t.post("languages",e),delete:async e=>t.delete("languages/"+e),get:async e=>await t.get("languages/"+e),list:async()=>await t.get("languages"),update:async(e,s)=>t.patch("languages/"+e,s)}))(s),s.pages=it(s),s.roles=nt(s),s.system=(t=>({get:async(e={view:"panel"})=>t.get("system",e),install:async e=>(await t.post("system/install",e)).user,register:async e=>t.post("system/register",e)}))(s),s.site=(t=>({blueprint:async()=>t.get("site/blueprint"),blueprints:async()=>t.get("site/blueprints"),changeTitle:async e=>t.patch("site/title",{title:e}),children:async e=>t.post("site/children/search",e),get:async(e={view:"panel"})=>t.get("site",e),async options(){const e=(await t.get("site",{select:"options"})).options;let s=[];return s.push({click:"rename",icon:"title",text:r.$t("rename"),disabled:!e.changeTitle}),s},update:async e=>t.post("site",e)}))(s),s.translations=ot(s),s.users=rt(s),s.files.rename=s.files.changeName,s.pages.slug=s.pages.changeSlug,s.pages.status=s.pages.changeStatus,s.pages.template=s.pages.changeTemplate,s.pages.title=s.pages.changeTitle,s.site.title=s.site.changeTitle,s.system.info=s.system.get,s},lt={install(t,e){t.prototype.$api=t.$api=at({config:{endpoint:window.panel.$urls.api,onComplete:s=>{t.$api.requests=t.$api.requests.filter((t=>t!==s)),0===t.$api.requests.length&&e.dispatch("isLoading",!1)},onError:e=>{window.panel.$config.debug&&window.console.error(e),403!==e.code||"Unauthenticated"!==e.message&&"access.panel"!==e.key||t.prototype.$go("/logout")},onParserError:t=>{throw e.dispatch("fatal",t),new Error("The JSON response from the API could not be parsed")},onPrepare:t=>(window.panel.$language&&(t.headers["x-language"]=window.panel.$language.code),t.headers["x-csrf"]=window.panel.$system.csrf,t),onStart:(s,i=!1)=>{!1===i&&e.dispatch("isLoading",!0),t.$api.requests.push(s)},onSuccess:()=>{clearInterval(t.$api.ping),t.$api.ping=setInterval(t.$api.auth.user,3e5)}},ping:null,requests:[]}),t.$api.ping=setInterval(t.$api.auth.user,3e5)}},ct={install(t){const e=a(),s={entered:null,$on:e.on,$off:e.off,$emit:e.emit,click:t=>s.$emit("click",t),drop:t=>{s.prevent(t),s.$emit("drop",t)},dragenter:t=>{s.entered=t.target,s.prevent(t),s.$emit("dragenter",t)},dragleave:t=>{s.prevent(t),s.entered===t.target&&s.$emit("dragleave",t)},keydown:e=>{let i=["keydown"];(e.metaKey||e.ctrlKey)&&i.push("cmd"),!0===e.altKey&&i.push("alt"),!0===e.shiftKey&&i.push("shift");let n=t.prototype.$helper.string.lcfirst(e.key);const o={escape:"esc",arrowUp:"up",arrowDown:"down",arrowLeft:"left",arrowRight:"right"};o[n]&&(n=o[n]),!1===["alt","control","shift","meta"].includes(n)&&i.push(n),s.$emit(i.join("."),e),s.$emit("keydown",e)},keyup:t=>s.$emit("keyup",t),online:t=>s.$emit("online",t),offline:t=>s.$emit("offline",t),prevent:t=>{t.stopPropagation(),t.preventDefault()}};window.addEventListener("online",s.online),window.addEventListener("offline",s.offline),window.addEventListener("dragenter",s.dragenter,!1),window.addEventListener("dragover",s.prevent,!1),window.addEventListener("dragexit",s.prevent,!1),window.addEventListener("dragleave",s.dragleave,!1),window.addEventListener("drop",s.drop,!1),window.addEventListener("keydown",s.keydown,!1),window.addEventListener("keyup",s.keyup,!1),document.addEventListener("click",s.click,!1),t.prototype.$events=s}};function ut(t){if("string"==typeof t)return"pattern"===t?"var(--color-gray-800) var(--bg-pattern)":null!==t.match(/^(black|white|light|gray|red|orange|yellow|green|aqua|blue|purple})/i)?`var(--color-${t})`:t}function dt(t){if(!t.match("youtu"))return!1;let e=null;try{e=new URL(t)}catch(u){return!1}const s=e.pathname.split("/").filter((t=>""!==t)),i=s[0],n=s[1],o="https://"+e.host+"/embed",r=t=>!!t&&null!==t.match(/^[a-zA-Z0-9_-]+$/);let a=e.searchParams,l=null;switch(s.join("/")){case"embed/videoseries":case"playlist":r(a.get("list"))&&(l=o+"/videoseries");break;case"watch":r(a.get("v"))&&(l=o+"/"+a.get("v"),a.has("t")&&a.set("start",a.get("t")),a.delete("v"),a.delete("t"));break;default:e.host.includes("youtu.be")&&r(i)?(l="https://www.youtube.com/embed/"+i,a.has("t")&&a.set("start",a.get("t")),a.delete("t")):"embed"===i&&r(n)&&(l=o+"/"+n)}if(!l)return!1;const c=a.toString();return c.length&&(l+="?"+c),l}function pt(t){let e=null;try{e=new URL(t)}catch(a){return!1}const s=e.pathname.split("/").filter((t=>""!==t));let i=e.searchParams,n=null;switch(e.host){case"vimeo.com":case"www.vimeo.com":n=s[0];break;case"player.vimeo.com":n=s[1]}if(!n||!n.match(/^[0-9]*$/))return!1;let o="https://player.vimeo.com/video/"+n;const r=i.toString();return r.length&&(o+="?"+r),o}var ht={youtube:dt,vimeo:pt,video:function(t){return t.includes("youtu")?dt(t):!!t.includes("vimeo")&&pt(t)}},mt=t=>void 0!==r.options.components[t],ft=t=>!!t.dataTransfer&&(!!t.dataTransfer.types&&(!0===t.dataTransfer.types.includes("Files")&&!1===t.dataTransfer.types.includes("text/plain"))),gt=(t,e)=>{let s="";for(e=(e||2)-(t=String(t)).length;s.length<e;)s+="0";return s+t},vt=(t="3/2")=>{const e=String(t).split("/");if(2!==e.length)return"100%";const s=Number(e[0]),i=Number(e[1]);let n=100;return 0!==s&&0!==i&&(n=100/s*i),n+"%"};RegExp.escape=function(t){return t.replace(new RegExp("[-/\\\\^$*+?.()[\\]{}]","gu"),"\\$&")};var kt=(t,e=[],s="")=>{const i="-";return s="a-z0-9"+s,t=t.trim().toLowerCase(),e.forEach((e=>{e&&Object.keys(e).forEach((s=>{const i="/"!==s.substr(0,1),n=s.substring(1,s.length-1),o=i?s:n;t=t.replace(new RegExp(RegExp.escape(o),"g"),e[s])}))})),t=(t=(t=(t=(t=(t=t.replace("/[^\t\n\r -~]/","")).replace(new RegExp("[^"+s+"]","ig"),i)).replace(new RegExp("["+RegExp.escape(i)+"]{2,}","g"),i)).replace("/",i)).replace(new RegExp("^[^"+s+"]+","g"),"")).replace(new RegExp("[^"+s+"]+$","g"),"")},bt=t=>{var e=(t=t||{}).desc?-1:1,s=-e,i=/^0/,n=/\s+/g,o=/^\s+|\s+$/g,r=/[^\x00-\x80]/,a=/^0x[0-9a-f]+$/i,l=/(0x[\da-fA-F]+|(^[\+\-]?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?(?=\D|\s|$))|\d+)/g,c=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=t.insensitive?function(t){return function(t){if(t.toLocaleLowerCase)return t.toLocaleLowerCase();return t.toLowerCase()}(""+t).replace(o,"")}:function(t){return(""+t).replace(o,"")};function d(t){return t.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")}function p(t,e){return(!t.match(i)||1===e)&&parseFloat(t)||t.replace(n," ").replace(o,"")||0}return function(t,i){var n=u(t),o=u(i);if(!n&&!o)return 0;if(!n&&o)return s;if(n&&!o)return e;var l=d(n),h=d(o),m=parseInt(n.match(a),16)||1!==l.length&&Date.parse(n),f=parseInt(o.match(a),16)||m&&o.match(c)&&Date.parse(o)||null;if(f){if(m<f)return s;if(m>f)return e}for(var g=l.length,v=h.length,k=0,b=Math.max(g,v);k<b;k++){var _=p(l[k]||"",g),y=p(h[k]||"",v);if(isNaN(_)!==isNaN(y))return isNaN(_)?e:s;if(r.test(_+y)&&_.localeCompare){var $=_.localeCompare(y);if($>0)return e;if($<0)return s;if(k===b-1)return 0}else{if(_<y)return s;if(_>y)return e}}return 0}};function _t(t,e={}){const s="[{]{1,2}[ ]{0,}",i="[ ]{0,}[}]{1,2}";return Object.keys(e).forEach((n=>{t=t.replace(new RegExp(`${s}${n}${i}`,"gi"),e[n]||"…"),!0===Array.isArray(e[n])&&(t=t.replace(new RegExp(`${s}${n}.count${i}|${s}${n}.length${i}`,"gi"),e[n].length||0))})),t.replace(/{{.*}}/gi,"…")}function yt(t){const e=String(t);return e.charAt(0).toUpperCase()+e.substr(1)}var $t={camelToKebab:function(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},hasEmoji:function(t){if("string"!=typeof t)return!1;const e=t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c\ude32-\ude3a]|[\ud83c\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/i);return null!==e&&null!==e.length},lcfirst:function(t){const e=String(t);return e.charAt(0).toLowerCase()+e.substr(1)},random:function(t){let e="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=s.length;for(var n=0;n<t;n++)e+=s.charAt(Math.floor(Math.random()*i));return e},stripHTML:function(t){return String(t).replace(/(<([^>]+)>)/gi,"")},template:_t,ucfirst:yt,ucwords:function(t){return String(t).split(/ /g).map((t=>yt(t))).join(" ")}},wt=(t,e)=>{const s=Object.assign({url:"/",field:"file",method:"POST",accept:"text",attributes:{},complete:function(){},error:function(){},success:function(){},progress:function(){}},e),i=new FormData;i.append(s.field,t,t.name),s.attributes&&Object.keys(s.attributes).forEach((t=>{i.append(t,s.attributes[t])}));const n=new XMLHttpRequest,o=e=>{if(!e.lengthComputable||!s.progress)return;let i=Math.max(0,Math.min(100,e.loaded/e.total*100));s.progress(n,t,Math.ceil(i))};n.upload.addEventListener("loadstart",o),n.upload.addEventListener("progress",o),n.addEventListener("load",(e=>{let i=null;try{i=JSON.parse(e.target.response)}catch(o){i={status:"error",message:"The file could not be uploaded"}}i.status&&"error"===i.status?s.error(n,t,i):(s.success(n,t,i),s.progress(n,t,100))})),n.addEventListener("error",(e=>{const i=JSON.parse(e.target.response);s.error(n,t,i),s.progress(n,t,100)})),n.open("POST",s.url,!0),s.headers&&Object.keys(s.headers).forEach((t=>{const e=s.headers[t];n.setRequestHeader(t,e)})),n.send(i)},xt=()=>{var t,e,s="";for(t=0;t<32;t++)e=16*Math.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(s+="-"),s+=(12==t?4:16==t?3&e|8:e).toString(16);return s};var St={datetime:function(t,e,s,i,n="day"){let o=t.$library.dayjs.utc(e);return o.isValid()||(o=t.$library.dayjs.utc(e,"HH:mm:ss")),s?!e||!o.isValid()||(s=t.$library.dayjs.utc(s),o.isSame(s,n)||o[i](s,n)):e&&o.isValid()}},Ct={install(t){Array.prototype.sortBy=function(e){const s=t.prototype.$helper.sort(),i=e.split(" "),n=i[0],o=i[1]||"asc";return this.sort(((t,e)=>{const i=String(t[n]).toLowerCase(),r=String(e[n]).toLowerCase();return"desc"===o?s(r,i):s(i,r)}))},t.prototype.$helper={clone:G,color:ut,embed:ht,isComponent:mt,isUploadEvent:ft,debounce:Y,pad:gt,ratio:vt,slug:kt,sort:bt,string:$t,upload:wt,uuid:xt,validate:St}}};class Et extends String{toString(){const t=window.panel.$vue,e=this.valueOf();return t?t.$t(e):e}}var Ot={install(t){t.$t=t.prototype.$t=(t,e)=>{if("string"!=typeof t)return;return _t(window.panel.$translation.data[t]||t,e)}}},Tt={namespaced:!0,state:{current:null},mutations:{CURRENT(t,e){t.current=e}},actions:{current(t,e){t.commit("CURRENT",e)}}};const It=(t,e)=>{localStorage.setItem("kirby$content$"+t,JSON.stringify(e))};var Lt={namespaced:!0,state:{current:null,models:{},status:{enabled:!0}},getters:{exists:t=>e=>Object.prototype.hasOwnProperty.call(t.models,e),hasChanges:(t,e)=>t=>{const s=e.model(t).changes;return Object.keys(s).length>0},isCurrent:t=>e=>t.current===e,id:t=>e=>(e=e||t.current,window.panel.$language?e+"/"+window.panel.$language.code:e),model:(t,e)=>s=>(s=s||t.current,!0===e.exists(s)?t.models[s]:{api:null,originals:{},values:{},changes:{}}),originals:(t,e)=>t=>G(e.model(t).originals),values:(t,e)=>t=>o(o({},e.originals(t)),e.changes(t)),changes:(t,e)=>t=>G(e.model(t).changes)},mutations:{CLEAR(t){Object.keys(t.models).forEach((e=>{t.models[e].changes={}})),Object.keys(localStorage).forEach((t=>{t.startsWith("kirby$content$")&&localStorage.removeItem(t)}))},CREATE(t,[e,s]){if(!s)return!1;let i=t.models[e]?t.models[e].changes:s.changes;r.set(t.models,e,{api:s.api,originals:s.originals,changes:i||{}})},CURRENT(t,e){t.current=e},MOVE(t,[e,s]){const i=G(t.models[e]);r.delete(t.models,e),r.set(t.models,s,i);const n=localStorage.getItem("kirby$content$"+e);localStorage.removeItem("kirby$content$"+e),localStorage.setItem("kirby$content$"+s,n)},REMOVE(t,e){r.delete(t.models,e),localStorage.removeItem("kirby$content$"+e)},REVERT(t,e){t.models[e]&&(r.set(t.models[e],"changes",{}),localStorage.removeItem("kirby$content$"+e))},STATUS(t,e){r.set(t.status,"enabled",e)},UPDATE(t,[e,s,i]){if(!t.models[e])return!1;i=G(i);const n=JSON.stringify(i);JSON.stringify(t.models[e].originals[s])==n?r.delete(t.models[e].changes,s):r.set(t.models[e].changes,s,i),It(e,{api:t.models[e].api,originals:t.models[e].originals,changes:t.models[e].changes})}},actions:{init(t){Object.keys(localStorage).filter((t=>t.startsWith("kirby$content$"))).map((t=>t.split("kirby$content$")[1])).forEach((e=>{const s=localStorage.getItem("kirby$content$"+e);t.commit("CREATE",[e,JSON.parse(s)])})),Object.keys(localStorage).filter((t=>t.startsWith("kirby$form$"))).map((t=>t.split("kirby$form$")[1])).forEach((e=>{const s=localStorage.getItem("kirby$form$"+e);let i=null;try{i=JSON.parse(s)}catch(o){}if(!i||!i.api)return localStorage.removeItem("kirby$form$"+e),!1;const n={api:i.api,originals:i.originals,changes:i.values};t.commit("CREATE",[e,n]),It(e,n),localStorage.removeItem("kirby$form$"+e)}))},clear(t){t.commit("CLEAR")},create(t,e){e.id=t.getters.id(e.id),(e.id.startsWith("pages/")||e.id.startsWith("site"))&&delete e.content.title;const s={api:e.api,originals:G(e.content),changes:{}};t.commit("CREATE",[e.id,s]),t.dispatch("current",e.id)},current(t,e){t.commit("CURRENT",e)},disable(t){t.commit("STATUS",!1)},enable(t){t.commit("STATUS",!0)},move(t,[e,s]){e=t.getters.id(e),s=t.getters.id(s),t.commit("MOVE",[e,s])},remove(t,e){t.commit("REMOVE",e),t.getters.isCurrent(e)&&t.commit("CURRENT",null)},revert(t,e){e=e||t.state.current,t.commit("REVERT",e)},async save(t,e){if(e=e||t.state.current,t.getters.isCurrent(e)&&!1===t.state.status.enabled)return!1;t.dispatch("disable");const s=t.getters.model(e),i=o(o({},s.originals),s.changes);try{await r.$api.patch(s.api,i),t.commit("CREATE",[e,o(o({},s),{originals:i})]),t.dispatch("revert",e)}finally{t.dispatch("enable")}},update(t,[e,s,i]){i=i||t.state.current,t.commit("UPDATE",[i,e,s])}}},At={namespaced:!0,state:{open:[]},mutations:{CLOSE(t,e){t.open=t.open.filter((t=>t.id!==e))},GOTO(t,e){t.open=t.open.filter((t=>t.id===e))},OPEN(t,e){t.open.push(e)}},actions:{close(t,e){t.commit("CLOSE",e)},goto(t,e){t.commit("GOTO",e)},open(t,e){t.commit("OPEN",e)}}},Ft={namespaced:!0,state:{instance:null,clock:0,step:5,beats:[]},mutations:{ADD(t,e){t.beats.push(e)},CLEAR(t){clearInterval(t.instance),t.clock=0},CLOCK(t){t.clock+=t.step},INITIALIZE(t,e){t.instance=e},REMOVE(t,e){const s=t.beats.map((t=>t.handler)).indexOf(e);-1!==s&&r.delete(t.beats,s)}},actions:{add(t,e){window.panel.deprecated("The $store.heartbeat module has been deprecated and will be removed in 3.7.0."),(e={handler:e[0]||e,interval:e[1]||t.state.step}).handler(),t.commit("ADD",e),1===t.state.beats.length&&t.dispatch("run")},clear(t){window.panel.deprecated("The $store.heartbeat module has been deprecated and will be removed in 3.7.0."),t.commit("CLEAR")},remove(t,e){window.panel.deprecated("The $store.heartbeat module has been deprecated and will be removed in 3.7.0."),t.commit("REMOVE",e),t.state.beats.length<1&&t.commit("CLEAR")},run(t){window.panel.deprecated("The $store.heartbeat module has been deprecated and will be removed in 3.7.0."),t.commit("CLEAR"),t.commit("INITIALIZE",setInterval((()=>{t.commit("CLOCK"),t.state.beats.forEach((e=>{t.state.clock%e.interval==0&&e.handler()}))}),1e3*t.state.step))}}},Bt={timer:null,namespaced:!0,state:{type:null,message:null,details:null,timeout:null},mutations:{SET(t,e){t.type=e.type,t.message=e.message,t.details=e.details,t.timeout=e.timeout},UNSET(t){t.type=null,t.message=null,t.details=null,t.timeout=null}},actions:{close(t){clearTimeout(this.timer),t.commit("UNSET")},open(t,e){t.dispatch("close"),t.commit("SET",e),e.timeout&&(this.timer=setTimeout((()=>{t.dispatch("close")}),e.timeout))},success(t,e){"string"==typeof e&&(e={message:e}),t.dispatch("open",o({type:"success",timeout:4e3},e))},error(t,e){"string"==typeof e&&(e={message:e}),t.dispatch("open",o({type:"error"},e))}}};r.use(l);var jt=new l.Store({strict:!1,state:{dialog:null,drag:null,fatal:null,isLoading:!1},mutations:{SET_DIALOG(t,e){t.dialog=e},SET_DRAG(t,e){t.drag=e},SET_FATAL(t,e){t.fatal=e},START_LOADING(t){t.isLoading=!0},STOP_LOADING(t){t.isLoading=!1}},actions:{breadcrumb(){window.panel.deprecated("$store.disptach('breadcrumb') has been deprecated and removed.")},dialog(t,e){t.commit("SET_DIALOG",e)},drag(t,e){t.commit("SET_DRAG",e)},fatal(t,e){t.commit("SET_FATAL",e)},isLoading(t,e){t.commit(!0===e?"START_LOADING":"STOP_LOADING")},title(){window.panel.deprecated("$store.disptach('title') has been deprecated and removed.")},view(){window.panel.deprecated("$store.disptach('view') has been deprecated and removed.")}},modules:{blocks:Tt,content:Lt,drawers:At,heartbeat:Ft,notification:Bt}});function Dt(t,e,s,i,n,o,r,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):n&&(l=a?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}const Mt={};Dt({},undefined,undefined,!1,(function(t){for(let e in Mt)this[e]=Mt[e]}),null,null,null).options.__file="src/components/Misc/Invalid.vue";const Pt={props:{autofocus:{type:Boolean,default:!0},cancelButton:{type:[String,Boolean],default:!0},icon:{type:String,default:"check"},size:{type:String,default:"default"},submitButton:{type:[String,Boolean],default:!0},theme:String,visible:Boolean},data:()=>({notification:null}),computed:{cancelButtonLabel(){return!1!==this.cancelButton&&(!0===this.cancelButton||0===this.cancelButton.length?this.$t("cancel"):this.cancelButton)},submitButtonConfig(){return void 0!==this.$attrs.button?this.$attrs.button:void 0===this.submitButton||this.submitButton},submitButtonLabel(){return!0===this.submitButton||0===this.submitButton.length?this.$t("confirm"):this.submitButton}},created(){this.$events.$on("keydown.esc",this.close,!1)},destroyed(){this.$events.$off("keydown.esc",this.close,!1)},mounted(){this.visible&&this.$nextTick(this.open)},methods:{onOverlayClose(){this.notification=null,this.$emit("close"),this.$events.$off("keydown.esc",this.close),this.$store.dispatch("dialog",!1)},open(){this.$store.state.dialog||this.$store.dispatch("dialog",!0),this.notification=null,this.$refs.overlay.open(),this.$emit("open"),this.$events.$on("keydown.esc",this.close)},close(){this.$refs.overlay&&this.$refs.overlay.close()},cancel(){this.$emit("cancel"),this.close()},focus(){if(this.$refs.dialog&&this.$refs.dialog.querySelector){const t=this.$refs.dialog.querySelector(".k-dialog-button-cancel");t&&"function"==typeof t.focus&&t.focus()}},error(t){this.notification={message:t,type:"error"}},submit(){this.$emit("submit")},success(t){this.notification={message:t,type:"success"}}}},Rt={};var Nt=Dt(Pt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-overlay",{ref:"overlay",attrs:{autofocus:t.autofocus,centered:!0},on:{close:t.onOverlayClose,ready:function(e){return t.$emit("ready")}}},[s("div",{ref:"dialog",staticClass:"k-dialog",class:t.$vnode.data.staticClass,attrs:{"data-size":t.size},on:{mousedown:function(t){t.stopPropagation()}}},[t.notification?s("div",{staticClass:"k-dialog-notification",attrs:{"data-theme":t.notification.type}},[s("p",[t._v(t._s(t.notification.message))]),t._v(" "),s("k-button",{attrs:{icon:"cancel"},on:{click:function(e){t.notification=null}}})],1):t._e(),t._v(" "),s("div",{staticClass:"k-dialog-body"},[t._t("default")],2),t._v(" "),t.$slots.footer||t.cancelButton||t.submitButton?s("footer",{staticClass:"k-dialog-footer"},[t._t("footer",[s("k-button-group",[s("span",[t.cancelButton?s("k-button",{staticClass:"k-dialog-button-cancel",attrs:{icon:"cancel"},on:{click:t.cancel}},[t._v("\n              "+t._s(t.cancelButtonLabel)+"\n            ")]):t._e()],1),t._v(" "),s("span",[t.submitButtonConfig?s("k-button",{staticClass:"k-dialog-button-submit",attrs:{icon:t.icon,theme:t.theme},on:{click:t.submit}},[t._v("\n              "+t._s(t.submitButtonLabel)+"\n            ")]):t._e()],1)])])],2):t._e()])])}),[],!1,(function(t){for(let e in Rt)this[e]=Rt[e]}),null,null,null);Nt.options.__file="src/components/Dialogs/Dialog.vue";var qt=Nt.exports,zt={props:{autofocus:{type:Boolean,default:!0},cancelButton:{type:[String,Boolean],default:!0},icon:String,submitButton:{type:[String,Boolean],default:!0},size:String,theme:String,visible:Boolean},methods:{close(){this.$refs.dialog.close(),this.$emit("close")},error(t){this.$refs.dialog.error(t)},open(){this.$refs.dialog.open(),this.$emit("open")},success(t){this.$refs.dialog.close(),t.route&&this.$go(t.route),t.message&&this.$store.dispatch("notification/success",t.message),t.event&&("string"==typeof t.event&&(t.event=[t.event]),t.event.forEach((e=>{this.$events.$emit(e,t)}))),!1!==Object.prototype.hasOwnProperty.call(t,"emit")&&!1===t.emit||this.$emit("success")}}};const Ut={};var Ht=Dt({mixins:[zt],computed:{notification(){let t=this.$store.state.notification;return"error"===t.type?t:null}},methods:{enter(){this.$nextTick((()=>{this.$el&&this.$el.querySelector&&this.$el.querySelector(".k-dialog-footer .k-button").focus()}))},exit(){this.$store.dispatch("notification/close")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.notification?s("k-dialog",{ref:"dialog",staticClass:"k-error-dialog",attrs:{"cancel-button":!1,visible:!0},on:{close:t.exit,submit:function(e){return t.$refs.dialog.close()}}},[s("k-text",[t._v(t._s(t.notification.message))]),t._v(" "),t.notification.details&&Object.keys(t.notification.details).length?s("dl",{staticClass:"k-error-details"},[t._l(t.notification.details,(function(e,i){return[s("dt",{key:"detail-label-"+i},[t._v("\n        "+t._s(e.label)+"\n      ")]),t._v(" "),s("dd",{key:"detail-message-"+i},["object"==typeof e.message?[s("ul",t._l(e.message,(function(e,i){return s("li",{key:i},[t._v("\n              "+t._s(e)+"\n            ")])})),0)]:[t._v("\n          "+t._s(e.message)+"\n        ")]],2)]}))],2):t._e()],1):t._e()}),[],!1,(function(t){for(let e in Ut)this[e]=Ut[e]}),null,null,null);Ht.options.__file="src/components/Dialogs/ErrorDialog.vue";var Vt=Ht.exports;const Kt={};var Wt=Dt({props:{code:Number,component:String,path:String,props:Object,referrer:String},methods:{async onSubmit(t){try{const e=(await this.$request(this.path,{body:t,method:"POST",headers:{"X-Fiber-Referrer":this.referrer}})).$dialog;if(!e)throw"The dialog could not be submitted";if(e.error)throw e.error;this.$refs.dialog.close(),this.$store.dispatch("notification/success",":)"),e.event&&("string"==typeof e.event&&(e.event=[e.event]),e.event.forEach((()=>{this.$events.$emit(e.event,e)}))),e.dispatch&&Object.keys(e.dispatch).forEach((t=>{this.$store.dispatch(t,...e.dispatch[t])})),e.redirect?this.$go(e.redirect):this.$reload(e.reload||{})}catch(e){console.error(e),this.$refs.dialog.error(e)}}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.component,t._b({ref:"dialog",tag:"component",attrs:{visible:!0},on:{submit:t.onSubmit}},"component",t.props,!1))}),[],!1,(function(t){for(let e in Kt)this[e]=Kt[e]}),null,null,null);Wt.options.__file="src/components/Dialogs/FiberDialog.vue";var Gt=Wt.exports,Yt={data:()=>({models:[],issue:null,selected:{},options:{endpoint:null,max:null,multiple:!0,parent:null,selected:[],search:!0},search:null,pagination:{limit:20,page:1,total:0}}),computed:{checkedIcon(){return!0===this.multiple?"check":"circle-filled"},items(){return this.models.map(this.item)},multiple(){return!0===this.options.multiple&&1!==this.options.max}},watch:{search(){this.updateSearch()}},created(){this.updateSearch=Y(this.updateSearch,200)},methods:{async fetch(){const t=o({page:this.pagination.page,search:this.search},this.fetchData||{});try{const e=await this.$api.get(this.options.endpoint,t);this.models=e.data,this.pagination=e.pagination,this.onFetched&&this.onFetched(e)}catch(e){this.models=[],this.issue=e.message}},async open(t,e){this.pagination.page=0,this.search=null;let s=!0;Array.isArray(t)?(this.models=t,s=!1):(this.models=[],e=t),this.options=o(o({},this.options),e),this.selected={},this.options.selected.forEach((t=>{this.$set(this.selected,t,{id:t})})),s&&await this.fetch(),this.$refs.dialog.open()},paginate(t){this.pagination.page=t.page,this.pagination.limit=t.limit,this.fetch()},submit(){this.$emit("submit",Object.values(this.selected)),this.$refs.dialog.close()},isSelected(t){return void 0!==this.selected[t.id]},item:t=>(t.link=!1,t),toggle(t){!1!==this.options.multiple&&1!==this.options.max||(this.selected={}),!0!==this.isSelected(t)?this.options.max&&this.options.max<=Object.keys(this.selected).length||this.$set(this.selected,t.id,t):this.$delete(this.selected,t.id)},toggleBtn(t){const e=this.isSelected(t);return{autofocus:!0,icon:e?this.checkedIcon:"circle-outline",tooltip:e?this.$t("remove"):this.$t("select"),theme:e?"positive":null}},updateSearch(){this.pagination.page=0,this.fetch()}}};const Jt={};var Xt=Dt({mixins:[Yt]},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-files-dialog",attrs:{size:"medium"},on:{cancel:function(e){return t.$emit("cancel")},submit:t.submit}},[t.issue?[s("k-box",{attrs:{text:t.issue,theme:"negative"}})]:[t.options.search?s("k-input",{staticClass:"k-dialog-search",attrs:{autofocus:!0,placeholder:t.$t("search")+" …",type:"text",icon:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),t.items.length?[s("k-items",{attrs:{items:t.items,layout:"list",sortable:!1},on:{item:t.toggle},scopedSlots:t._u([{key:"options",fn:function(e){var i=e.item;return[s("k-button",t._b({on:{click:function(e){return t.toggle(i)}}},"k-button",t.toggleBtn(i),!1))]}}],null,!1,4112065674)}),t._v(" "),s("k-pagination",t._b({staticClass:"k-dialog-pagination",attrs:{details:!0,dropdown:!1,align:"center"},on:{paginate:t.paginate}},"k-pagination",t.pagination,!1))]:s("k-empty",{attrs:{icon:"image"}},[t._v("\n      "+t._s(t.$t("dialog.files.empty"))+"\n    ")])]],2)}),[],!1,(function(t){for(let e in Jt)this[e]=Jt[e]}),null,null,null);Xt.options.__file="src/components/Dialogs/FilesDialog.vue";var Zt=Xt.exports;const Qt={mixins:[zt],props:{fields:{type:[Array,Object],default:()=>[]},novalidate:{type:Boolean,default:!0},size:{type:String,default:"medium"},submitButton:{type:[String,Boolean],default:()=>new Et("save")},text:{type:String},theme:{type:String,default:"positive"},value:{type:Object,default:()=>({})}},data(){return{model:this.value}},watch:{value(t,e){t!==e&&(this.model=t)}}},te={};var ee=Dt(Qt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",t._b({ref:"dialog",on:{cancel:function(e){return t.$emit("cancel")},close:function(e){return t.$emit("close")},ready:function(e){return t.$emit("ready")},submit:function(e){return t.$refs.form.submit()}}},"k-dialog",t.$props,!1),[t.text?[s("k-text",{domProps:{innerHTML:t._s(t.text)}})]:t._e(),t._v(" "),s("k-form",{ref:"form",attrs:{value:t.model,fields:t.fields,novalidate:t.novalidate},on:{input:function(e){return t.$emit("input",e)},submit:function(e){return t.$emit("submit",e)}}})],2)}),[],!1,(function(t){for(let e in te)this[e]=te[e]}),null,null,null);ee.options.__file="src/components/Dialogs/FormDialog.vue";var se=ee.exports;const ie={};var ne=Dt({extends:se,watch:{"model.name"(t){this.fields.code.disabled||this.onNameChanges(t)},"model.code"(t){this.fields.code.disabled||(this.model.code=this.$helper.slug(t,[this.$system.ascii]),this.onCodeChanges(this.model.code))}},methods:{onCodeChanges(t){if(!t)return this.model.locale=null;if(t.length>=2)if(-1!==t.indexOf("-")){let e=t.split("-"),s=[e[0],e[1].toUpperCase()];this.model.locale=s.join("_")}else{let e=this.$system.locales||[];e&&e[t]?this.model.locale=e[t]:this.model.locale=null}},onNameChanges(t){this.model.code=this.$helper.slug(t,[this.model.rules,this.$system.ascii]).substr(0,2)}}},undefined,undefined,!1,(function(t){for(let e in ie)this[e]=ie[e]}),null,null,null);ne.options.__file="src/components/Dialogs/LanguageDialog.vue";var oe=ne.exports;const re={};var ae=Dt({mixins:[Yt],data(){const t=Yt.data();return o(o({},t),{model:{title:null,parent:null},options:o(o({},t.options),{parent:null})})},computed:{fetchData(){return{parent:this.options.parent}}},methods:{back(){this.options.parent=this.model.parent,this.pagination.page=1,this.fetch()},go(t){this.options.parent=t.id,this.pagination.page=1,this.fetch()},onFetched(t){this.model=t.model}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-pages-dialog",attrs:{size:"medium"},on:{cancel:function(e){return t.$emit("cancel")},submit:t.submit}},[t.issue?[s("k-box",{attrs:{text:t.issue,theme:"negative"}})]:[t.model?s("header",{staticClass:"k-pages-dialog-navbar"},[s("k-button",{attrs:{disabled:!t.model.id,tooltip:t.$t("back"),icon:"angle-left"},on:{click:t.back}}),t._v(" "),s("k-headline",[t._v(t._s(t.model.title))])],1):t._e(),t._v(" "),t.options.search?s("k-input",{staticClass:"k-dialog-search",attrs:{autofocus:!0,placeholder:t.$t("search")+" …",type:"text",icon:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),t.items.length?[s("k-items",{attrs:{items:t.items,layout:"list",sortable:!1},on:{item:t.toggle},scopedSlots:t._u([{key:"options",fn:function(e){var i=e.item;return[s("k-button",t._b({on:{click:function(e){return t.toggle(i)}}},"k-button",t.toggleBtn(i),!1)),t._v(" "),i?s("k-button",{attrs:{disabled:!i.hasChildren,tooltip:t.$t("open"),icon:"angle-right"},on:{click:function(e){return e.stopPropagation(),t.go(i)}}}):t._e()]}}],null,!1,563671250)}),t._v(" "),s("k-pagination",t._b({staticClass:"k-dialog-pagination",attrs:{details:!0,dropdown:!1,align:"center"},on:{paginate:t.paginate}},"k-pagination",t.pagination,!1))]:s("k-empty",{attrs:{icon:"page"}},[t._v("\n      "+t._s(t.$t("dialog.pages.empty"))+"\n    ")])]],2)}),[],!1,(function(t){for(let e in re)this[e]=re[e]}),null,null,null);ae.options.__file="src/components/Dialogs/PagesDialog.vue";var le=ae.exports;const ce={mixins:[zt],props:{icon:{type:String,default:"trash"},submitButton:{type:[String,Boolean],default:()=>new Et("delete")},text:String,theme:{type:String,default:"negative"}}},ue={};var de=Dt(ce,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-text-dialog",t._g(t._b({ref:"dialog"},"k-text-dialog",t.$props,!1),t.$listeners),[t._t("default")],2)}),[],!1,(function(t){for(let e in ue)this[e]=ue[e]}),null,null,null);de.options.__file="src/components/Dialogs/RemoveDialog.vue";var pe=de.exports;const he={};var me=Dt({mixins:[zt],props:{text:String}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",t._g(t._b({ref:"dialog"},"k-dialog",t.$props,!1),t.$listeners),[t._t("default",[s("k-text",{domProps:{innerHTML:t._s(t.text)}})])],2)}),[],!1,(function(t){for(let e in he)this[e]=he[e]}),null,null,null);me.options.__file="src/components/Dialogs/TextDialog.vue";var fe=me.exports;const ge={};var ve=Dt({mixins:[Yt],methods:{item:t=>o(o({},t),{key:t.email,info:t.info!==t.text?t.info:null,link:!1})}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-users-dialog",attrs:{size:"medium"},on:{cancel:function(e){return t.$emit("cancel")},submit:t.submit}},[t.issue?[s("k-box",{attrs:{text:t.issue,theme:"negative"}})]:[t.options.search?s("k-input",{staticClass:"k-dialog-search",attrs:{autofocus:!0,placeholder:t.$t("search")+" …",type:"text",icon:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),t.items.length?[s("k-items",{attrs:{items:t.items,layout:"list",sortable:!1},on:{item:t.toggle},scopedSlots:t._u([{key:"options",fn:function(e){var i=e.item;return[s("k-button",t._b({on:{click:function(e){return t.toggle(i)}}},"k-button",t.toggleBtn(i),!1))]}}],null,!1,409892637)}),t._v(" "),s("k-pagination",t._b({staticClass:"k-dialog-pagination",attrs:{details:!0,dropdown:!1,align:"center"},on:{paginate:t.paginate}},"k-pagination",t.pagination,!1))]:s("k-empty",{attrs:{icon:"users"}},[t._v("\n      "+t._s(t.$t("dialog.users.empty"))+"\n    ")])]],2)}),[],!1,(function(t){for(let e in ge)this[e]=ge[e]}),null,null,null);ve.options.__file="src/components/Dialogs/UsersDialog.vue";var ke=ve.exports;const be={};var _e=Dt({inheritAttrs:!1,props:{icon:String,tab:String,tabs:Object,title:String},data:()=>({click:!1}),computed:{breadcrumb(){return this.$store.state.drawers.open},hasTabs(){return this.tabs&&Object.keys(this.tabs).length>1},index(){return this.breadcrumb.findIndex((t=>t.id===this._uid))},nested(){return this.index>0}},watch:{index(){-1===this.index&&this.close()}},destroyed(){this.$store.dispatch("drawers/close",this._uid)},methods:{close(){this.$refs.overlay.close()},goTo(t){if(t===this._uid)return!0;this.$store.dispatch("drawers/goto",t)},mouseup(){!0===this.click&&this.close(),this.click=!1},onClose(){this.$store.dispatch("drawers/close",this._uid),this.$emit("close")},onOpen(){this.$store.dispatch("drawers/open",{id:this._uid,icon:this.icon,title:this.title}),this.$emit("open")},open(){this.$refs.overlay.open()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-overlay",{ref:"overlay",attrs:{dimmed:!1},on:{close:t.onClose,open:t.onOpen}},[s("div",{staticClass:"k-drawer",attrs:{"data-nested":t.nested},on:{mousedown:function(e){t.click=!0},mouseup:t.mouseup}},[s("div",{staticClass:"k-drawer-box",on:{mousedown:function(e){e.stopPropagation(),t.click=!1}}},[s("header",{staticClass:"k-drawer-header"},[1===t.breadcrumb.length?s("h2",{staticClass:"k-drawer-title"},[s("k-icon",{attrs:{type:t.icon}}),t._v(" "+t._s(t.title)+"\n        ")],1):s("ul",{staticClass:"k-drawer-breadcrumb"},t._l(t.breadcrumb,(function(e){return s("li",{key:e.id},[s("k-button",{attrs:{icon:e.icon},on:{click:function(s){return t.goTo(e.id)}}},[t._v("\n              "+t._s(e.title)+"\n            ")])],1)})),0),t._v(" "),t.hasTabs?s("nav",{staticClass:"k-drawer-tabs"},t._l(t.tabs,(function(e){return s("k-button",{key:e.name,staticClass:"k-drawer-tab",attrs:{current:t.tab==e.name},on:{click:function(s){return s.stopPropagation(),t.$emit("tab",e.name)}}},[t._v("\n            "+t._s(e.label)+"\n          ")])})),1):t._e(),t._v(" "),s("nav",{staticClass:"k-drawer-options"},[t._t("options"),t._v(" "),s("k-button",{staticClass:"k-drawer-option",attrs:{icon:"check"},on:{click:t.close}})],2)]),t._v(" "),s("div",{staticClass:"k-drawer-body"},[t._t("default")],2)])])])}),[],!1,(function(t){for(let e in be)this[e]=be[e]}),null,null,null);_e.options.__file="src/components/Drawers/Drawer.vue";var ye=_e.exports;const $e={};var we=Dt({inheritAttrs:!1,props:{empty:{type:String,default:()=>"Missing field setup"},icon:String,tabs:Object,title:String,type:String,value:Object},data:()=>({tab:null}),computed:{fields(){const t=this.tab||null;return(this.tabs[t]||this.firstTab).fields||{}},firstTab(){return Object.values(this.tabs)[0]}},methods:{close(){this.$refs.drawer.close()},focus(t){this.$refs.form&&"function"==typeof this.$refs.form.focus&&this.$refs.form.focus(t)},open(t,e=!0){this.$refs.drawer.open(),this.tab=t||this.firstTab.name,!1!==e&&setTimeout((()=>{let t=Object.values(this.fields).filter((t=>!0===t.autofocus))[0]||null;this.focus(t)}),1)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-drawer",{ref:"drawer",staticClass:"k-form-drawer",attrs:{icon:t.icon,tabs:t.tabs,tab:t.tab,title:t.title},on:{close:function(e){return t.$emit("close")},open:function(e){return t.$emit("open")},tab:function(e){t.tab=e}},scopedSlots:t._u([{key:"options",fn:function(){return[t._t("options")]},proxy:!0},{key:"default",fn:function(){return[0===Object.keys(t.fields).length?s("k-box",{attrs:{theme:"info"}},[t._v("\n      "+t._s(t.empty)+"\n    ")]):s("k-form",{ref:"form",attrs:{autofocus:!0,fields:t.fields,value:t.$helper.clone(t.value)},on:{input:function(e){return t.$emit("input",e)}}})]},proxy:!0}],null,!0)})}),[],!1,(function(t){for(let e in $e)this[e]=$e[e]}),null,null,null);we.options.__file="src/components/Drawers/FormDrawer.vue";var xe=we.exports;const Se={};var Ce=Dt({props:{limit:{type:Number,default:10},skip:{type:Array,default:()=>[]},options:Array,query:String},data:()=>({matches:[],selected:{text:null}}),methods:{close(){this.$refs.dropdown.close()},onSelect(t){this.$emit("select",t),this.$refs.dropdown.close()},search(t){if(t.length<1)return;const e=new RegExp(RegExp.escape(t),"ig");this.matches=this.options.filter((t=>!!t.text&&(-1===this.skip.indexOf(t.value)&&null!==t.text.match(e)))).slice(0,this.limit),this.$emit("search",t,this.matches),this.$refs.dropdown.open()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dropdown",{staticClass:"k-autocomplete"},[t._t("default"),t._v(" "),s("k-dropdown-content",t._g({ref:"dropdown",attrs:{autofocus:!0}},t.$listeners),t._l(t.matches,(function(e,i){return s("k-dropdown-item",t._b({key:i,on:{mousedown:function(s){return t.onSelect(e)},keydown:[function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"tab",9,s.key,"Tab")?null:(s.preventDefault(),t.onSelect(e))},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),t.onSelect(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.preventDefault(),t.close(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"backspace",void 0,e.key,void 0)?null:(e.preventDefault(),t.close(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.close(e))}]}},"k-dropdown-item",e,!1),[t._v("\n      "+t._s(e.text)+"\n    ")])})),1),t._v("\n  "+t._s(t.query)+"\n")],2)}),[],!1,(function(t){for(let e in Se)this[e]=Se[e]}),null,null,null);Ce.options.__file="src/components/Forms/Autocomplete.vue";var Ee=Ce.exports;const Oe={props:{disabled:Boolean,multiple:Boolean,max:String,min:String,value:[Array,String]},data(){return this.toData(this.value)},computed:{numberOfDays(){return this.viewDt.daysInMonth()},numberOfWeeks(){return Math.ceil((this.numberOfDays+this.firstWeekday-1)/7)},firstWeekday(){const t=this.viewDt.day();return t>0?t:7},weekdays(){return[this.$t("days.mon"),this.$t("days.tue"),this.$t("days.wed"),this.$t("days.thu"),this.$t("days.fri"),this.$t("days.sat"),this.$t("days.sun")]},monthnames(){return[this.$t("months.january"),this.$t("months.february"),this.$t("months.march"),this.$t("months.april"),this.$t("months.may"),this.$t("months.june"),this.$t("months.july"),this.$t("months.august"),this.$t("months.september"),this.$t("months.october"),this.$t("months.november"),this.$t("months.december")]},months(){var t=[];return this.monthnames.forEach(((e,s)=>{const i=this.toDate(1,s);t.push({value:s,text:e,disabled:i.isBefore(this.view.min,"month")||i.isAfter(this.view.max,"month")})})),t},years(){var t=[];const e=this.view.min?this.view.min.get("year"):this.view.year-20,s=this.view.max?this.view.max.get("year"):this.view.year+20;for(var i=e;i<=s;i++)t.push({value:i,text:this.$helper.pad(i)});return t},viewDt(){const t=`${this.view.year}-${this.view.month+1}-01 00:00:00`;return this.$library.dayjs.utc(t)}},watch:{value(t){const e=this.toData(t);this.datetimes=e.datetimes,this.view=e.view}},methods:{days(t){let e=[];const s=7*(t-1)+1;for(let i=s;i<s+7;i++){let t=i-(this.firstWeekday-1);t<=0||t>this.numberOfDays?e.push(""):e.push(t)}return e},isBetween(t){if(""===t||0==this.multiple||this.datetimes.length<2)return!1;const e=this.toDate(t);return this.isFirst(t)||this.isLast(t)||e.isAfter(this.datetimes[0],"day")&&e.isBefore(this.datetimes[1],"day")},isDisabled(t){const e=this.toDate(t);return e.isBefore(this.view.min,"day")||e.isAfter(this.view.max,"day")},isFirst(t){if(""===t||0==this.multiple||this.datetimes.length<2)return!1;return this.toDate(t).isSame(this.datetimes[0],"day")},isLast(t){if(""===t||0==this.multiple||this.datetimes.length<2)return!1;return this.toDate(t).isSame(this.datetimes[1],"day")},isSelected(t){if(""===t)return!1;const e=this.toDate(t);return this.datetimes.some((t=>e.isSame(t,"day")))},isToday(t){return this.toDate(t).isSame(this.toToday(),"day")},next(){let t=this.viewDt.clone().add(1,"month");this.show(t)},prev(){let t=this.viewDt.clone().subtract(1,"month");this.show(t)},mergeTime:(t,e)=>t.clone().set("second",e.get("second")).set("minute",e.get("minute")).set("hour",e.get("hour")),select(t){const e=this.datetimes[0]||this.toToday();if("today"===t){const t=this.mergeTime(this.$library.dayjs(),e);this.datetimes=[t],this.show(t)}else{let s=this.toDate(t);s=this.mergeTime(s,e),!1===this.multiple||0===this.datetimes.length||2===this.datetimes.length||s.isBefore(this.datetimes[0])?this.datetimes=[s]:this.datetimes.push(s)}const s=this.multiple?this.datetimes.map((t=>this.toISO(t))):this.toISO(this.datetimes[0]);this.$emit("input",s)},show(t){this.view.year=t.year(),this.view.month=t.month()},toData(t){const e=this.toToday(),s=this.toDatetimes(t);return{datetimes:s,view:{month:(s[0]||e).month(),year:(s[0]||e).year(),min:this.min?this.$library.dayjs.utc(this.min):null,max:this.max?this.$library.dayjs.utc(this.max):null}}},toDate(t,e=this.view.month,s=this.view.year){return this.$library.dayjs.utc(`${s}-${e+1}-${t} 00:00:00`)},toDatetimes(t){return t?"string"==typeof t?[this.$library.dayjs.utc(t)]:t.map((t=>this.$library.dayjs.utc(t))):[]},toISO:t=>t.format("YYYY-MM-DD HH:mm:ss"),toToday(){return this.$library.dayjs.utc()}}},Te={};var Ie=Dt(Oe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-calendar-input"},[s("nav",[s("k-button",{attrs:{icon:"angle-left"},on:{click:t.prev}}),t._v(" "),s("span",{staticClass:"k-calendar-selects"},[s("k-select-input",{attrs:{options:t.months,disabled:t.disabled,required:!0},model:{value:t.view.month,callback:function(e){t.$set(t.view,"month",t._n(e))},expression:"view.month"}}),t._v(" "),s("k-select-input",{attrs:{options:t.years,disabled:t.disabled,required:!0},model:{value:t.view.year,callback:function(e){t.$set(t.view,"year",t._n(e))},expression:"view.year"}})],1),t._v(" "),s("k-button",{attrs:{icon:"angle-right"},on:{click:t.next}})],1),t._v(" "),s("table",{staticClass:"k-calendar-table"},[s("thead",[s("tr",t._l(t.weekdays,(function(e){return s("th",{key:"weekday_"+e},[t._v("\n          "+t._s(e)+"\n        ")])})),0)]),t._v(" "),s("tbody",t._l(t.numberOfWeeks,(function(e){return s("tr",{key:"week_"+e},t._l(t.days(e),(function(e,i){return s("td",{key:"day_"+i,staticClass:"k-calendar-day",attrs:{"aria-current":!!t.isToday(e)&&"date","aria-selected":!!t.isSelected(e)&&"date","data-between":t.isBetween(e),"data-first":t.isFirst(e),"data-last":t.isLast(e)}},[e?s("k-button",{attrs:{disabled:t.isDisabled(e)},on:{click:function(s){return t.select(e)}}},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()],1)})),0)})),0),t._v(" "),s("tfoot",[s("tr",[s("td",{staticClass:"k-calendar-today",attrs:{colspan:"7"}},[s("k-button",{on:{click:function(e){return t.select("today")}}},[t._v("\n            "+t._s(t.$t("today"))+"\n          ")])],1)])])])])}),[],!1,(function(t){for(let e in Te)this[e]=Te[e]}),null,null,null);Ie.options.__file="src/components/Forms/Calendar.vue";var Le=Ie.exports;const Ae={props:{count:Number,min:Number,max:Number,required:{type:Boolean,default:!1}},computed:{valid(){return!1===this.required&&0===this.count||(!0!==this.required||0!==this.count)&&(!(this.min&&this.count<this.min)&&!(this.max&&this.count>this.max))}}},Fe={};var Be=Dt(Ae,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-counter",attrs:{"data-invalid":!t.valid}},[s("span",[t._v(t._s(t.count))]),t._v(" "),t.min&&t.max?s("span",{staticClass:"k-counter-rules"},[t._v("("+t._s(t.min)+"–"+t._s(t.max)+")")]):t.min?s("span",{staticClass:"k-counter-rules"},[t._v("≥ "+t._s(t.min))]):t.max?s("span",{staticClass:"k-counter-rules"},[t._v("≤ "+t._s(t.max))]):t._e()])}),[],!1,(function(t){for(let e in Fe)this[e]=Fe[e]}),null,null,null);Be.options.__file="src/components/Forms/Counter.vue";var je=Be.exports;const De={props:{disabled:Boolean,config:Object,fields:{type:[Array,Object],default:()=>({})},novalidate:{type:Boolean,default:!1},value:{type:Object,default:()=>({})}},data(){return{errors:{},listeners:o(o({},this.$listeners),{submit:this.onSubmit})}},methods:{focus(t){this.$refs.fields&&this.$refs.fields.focus&&this.$refs.fields.focus(t)},onSubmit(){this.$emit("submit",this.value)},submit(){this.$refs.submitter.click()}}},Me={};var Pe=Dt(De,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{ref:"form",staticClass:"k-form",attrs:{method:"POST",autocomplete:"off",novalidate:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._t("header"),t._v(" "),t._t("default",[s("k-fieldset",t._g({ref:"fields",attrs:{disabled:t.disabled,fields:t.fields,novalidate:t.novalidate},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t.listeners))]),t._v(" "),t._t("footer"),t._v(" "),s("input",{ref:"submitter",staticClass:"k-form-submitter",attrs:{type:"submit"}})],2)}),[],!1,(function(t){for(let e in Me)this[e]=Me[e]}),null,null,null);Pe.options.__file="src/components/Forms/Form.vue";var Re=Pe.exports;const Ne={props:{lock:[Boolean,Object]},data:()=>({isRefreshing:null,isLocking:null}),computed:{hasChanges(){return this.$store.getters["content/hasChanges"]()},isDisabled(){return!1===this.$store.state.content.status.enabled},isLocked(){return this.supportsLocking&&"lock"===this.lock.state},isUnlocked(){return this.supportsLocking&&"unlock"===this.lock.state},mode(){return this.supportsLocking&&null!==this.lock.state?this.lock.state:!0===this.hasChanges?"changes":null},supportsLocking(){return!1!==this.lock}},watch:{hasChanges:{handler(t,e){!0===this.supportsLocking&&!1===this.isLocked&&!1===this.isUnlocked&&(!0===t?(this.onLock(),this.isLocking=setInterval(this.onLock,3e4)):e&&(clearInterval(this.isLocking),this.onLock(!1)))},immediate:!0},isLocked(t){!1===t&&this.$events.$emit("model.reload")}},created(){this.supportsLocking&&(this.isRefreshing=setInterval(this.check,1e4)),this.$events.$on("keydown.cmd.s",this.onSave)},destroyed(){clearInterval(this.isRefreshing),clearInterval(this.isLocking),this.$events.$off("keydown.cmd.s",this.onSave)},methods:{check(){this.$reload({only:"$view.props.lock",silent:!0})},async onLock(t=!0){const e=[this.$view.path+"/lock",null,null,!0];if(!0===t)try{await this.$api.patch(...e)}catch(s){clearInterval(this.isLocking),this.$store.dispatch("content/revert")}else clearInterval(this.isLocking),await this.$api.delete(...e)},onDownload(){let t="";const e=this.$store.getters["content/changes"]();Object.keys(e).forEach((s=>{t+=s+": \n\n"+e[s],t+="\n\n----\n\n"}));let s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),s.setAttribute("download",this.$view.path+".txt"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},async onResolve(){await this.onUnlock(!1),this.$store.dispatch("content/revert")},onRevert(){this.$refs.revert.open()},async onSave(t){if(!t)return!1;if(t.preventDefault&&t.preventDefault(),!1===this.hasChanges)return!0;try{this.$store.dispatch("content/save"),this.$events.$emit("model.update"),this.$store.dispatch("notification/success",":)")}catch(e){if(403===e.code)return;e.details&&Object.keys(e.details).length>0?this.$store.dispatch("notification/error",{message:this.$t("error.form.incomplete"),details:e.details}):this.$store.dispatch("notification/error",{message:this.$t("error.form.notSaved"),details:[{label:"Exception: "+e.exception,message:e.message}]})}},async onUnlock(t=!0){const e=[this.$view.path+"/unlock",null,null,!0];!0===t?await this.$api.patch(...e):await this.$api.delete(...e),this.$reload({silent:!0})},revert(){this.$store.dispatch("content/revert"),this.$refs.revert.close()}}},qe={};var ze=Dt(Ne,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"k-form-buttons",attrs:{"data-theme":t.mode}},["unlock"===t.mode?s("k-view",[s("p",{staticClass:"k-form-lock-info"},[t._v("\n      "+t._s(t.$t("lock.isUnlocked"))+"\n    ")]),t._v(" "),s("span",{staticClass:"k-form-lock-buttons"},[s("k-button",{staticClass:"k-form-button",attrs:{icon:"download"},on:{click:t.onDownload}},[t._v("\n        "+t._s(t.$t("download"))+"\n      ")]),t._v(" "),s("k-button",{staticClass:"k-form-button",attrs:{icon:"check"},on:{click:t.onResolve}},[t._v("\n        "+t._s(t.$t("confirm"))+"\n      ")])],1)]):"lock"===t.mode?s("k-view",[s("p",{staticClass:"k-form-lock-info"},[s("k-icon",{attrs:{type:"lock"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("lock.isLocked",{email:t.lock.data.email}))}})],1),t._v(" "),t.lock.data.unlockable?s("k-button",{staticClass:"k-form-button",attrs:{icon:"unlock"},on:{click:function(e){return t.onUnlock()}}},[t._v("\n      "+t._s(t.$t("lock.unlock"))+"\n    ")]):s("k-icon",{staticClass:"k-form-lock-loader",attrs:{type:"loader"}})],1):"changes"===t.mode?s("k-view",[s("k-button",{staticClass:"k-form-button",attrs:{disabled:t.isDisabled,icon:"undo"},on:{click:t.onRevert}},[t._v("\n      "+t._s(t.$t("revert"))+"\n    ")]),t._v(" "),s("k-button",{staticClass:"k-form-button",attrs:{disabled:t.isDisabled,icon:"check"},on:{click:t.onSave}},[t._v("\n      "+t._s(t.$t("save"))+"\n    ")])],1):t._e(),t._v(" "),s("k-dialog",{ref:"revert",attrs:{"submit-button":t.$t("revert"),icon:"undo",theme:"negative"},on:{submit:t.revert}},[s("k-text",{domProps:{innerHTML:t._s(t.$t("revert.confirm"))}})],1)],1)}),[],!1,(function(t){for(let e in qe)this[e]=qe[e]}),null,null,null);ze.options.__file="src/components/Forms/FormButtons.vue";var Ue=ze.exports;const He={};var Ve=Dt({data:()=>({isOpen:!1,entries:[]}),computed:{store(){return this.$store.state.content.models},models(){return Object.keys(this.store).filter((t=>!!this.store[t])).map((t=>o({id:t},this.store[t]))).filter((t=>Object.keys(t.changes).length>0))},hasChanges(){return this.models.length>0}},methods:{go(t){let e={};t.language&&(e.language=t.language),this.$go(t.link,{data:e})},load(){const t=this.models.map((async t=>{try{const e=await this.$api.get(t.api,{view:"compact"},null,!0);let s;if(s=!0===t.id.startsWith("pages/")?{icon:"page",label:e.title,target:{link:this.$api.pages.link(e.id)}}:!0===t.id.startsWith("files/")?{icon:"image",label:e.filename,target:{link:e.link}}:!0===t.id.startsWith("users/")?{icon:"user",label:e.email,target:{link:this.$api.users.link(e.id)}}:{icon:"home",label:e.title,target:{link:"/site"}},this.$language){const e=t.id.split("/").pop();s.label=s.label+" ("+e+")",s.target.language=e}return s}catch(e){return this.$store.dispatch("content/remove",t.id),null}}));return Promise.all(t).then((t=>{this.entries=t.filter((t=>null!==t)),0===this.entries.length&&this.$store.dispatch("notification/success",this.$t("lock.unsaved.empty"))}))},toggle(){!1===this.$refs.list.isOpen?this.load().then((()=>{this.$refs.list&&this.$refs.list.toggle()})):this.$refs.list.toggle()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hasChanges?s("k-dropdown",{staticClass:"k-form-indicator"},[s("k-button",{staticClass:"k-topbar-button",on:{click:t.toggle}},[s("k-icon",{staticClass:"k-form-indicator-icon",attrs:{type:"edit"}})],1),t._v(" "),s("k-dropdown-content",{ref:"list",attrs:{align:"right",theme:"light"}},[s("p",{staticClass:"k-form-indicator-info"},[t._v("\n      "+t._s(t.$t("lock.unsaved"))+":\n    ")]),t._v(" "),s("hr"),t._v(" "),t._l(t.entries,(function(e){return s("k-dropdown-item",{key:e.id,attrs:{icon:e.icon},nativeOn:{click:function(s){return s.stopPropagation(),t.go(e.target)}}},[t._v("\n      "+t._s(e.label)+"\n    ")])}))],2)],1):t._e()}),[],!1,(function(t){for(let e in He)this[e]=He[e]}),null,null,null);Ve.options.__file="src/components/Forms/FormIndicator.vue";var Ke=Ve.exports,We={props:{after:String}},Ge={props:{autofocus:Boolean}},Ye={props:{before:String}},Je={props:{disabled:Boolean}},Xe={props:{help:String}},Ze={props:{id:{type:[Number,String],default(){return this._uid}}}},Qe={props:{invalid:Boolean}},ts={props:{label:String}},es={props:{name:[Number,String]}},ss={props:{required:Boolean}};const is={mixins:[Je,Xe,ts,es,ss],props:{counter:[Boolean,Object],endpoints:Object,input:[String,Number],translate:Boolean,type:String}},ns={};var os=Dt({mixins:[is],inheritAttrs:!1,computed:{labelText(){return this.label||" "}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"k-field k-field-name-"+t.name,attrs:{"data-disabled":t.disabled,"data-translate":t.translate},on:{focusin:function(e){return t.$emit("focus",e)},focusout:function(e){return t.$emit("blur",e)}}},[t._t("header",[s("header",{staticClass:"k-field-header"},[t._t("label",[s("label",{staticClass:"k-field-label",attrs:{for:t.input}},[t._v(t._s(t.labelText)+" "),t.required?s("abbr",{attrs:{title:t.$t("field.required")}},[t._v("*")]):t._e()])]),t._v(" "),t._t("options"),t._v(" "),t._t("counter",[t.counter?s("k-counter",t._b({staticClass:"k-field-counter",attrs:{required:t.required}},"k-counter",t.counter,!1)):t._e()])],2)]),t._v(" "),t._t("default"),t._v(" "),t._t("footer",[t.help||t.$slots.help?s("footer",{staticClass:"k-field-footer"},[t._t("help",[t.help?s("k-text",{staticClass:"k-field-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()])],2):t._e()])],2)}),[],!1,(function(t){for(let e in ns)this[e]=ns[e]}),null,null,null);os.options.__file="src/components/Forms/Field.vue";var rs=os.exports;const as={props:{config:Object,disabled:Boolean,fields:{type:[Array,Object],default:()=>[]},novalidate:{type:Boolean,default:!1},value:{type:Object,default:()=>({})}},data:()=>({errors:{}}),methods:{focus(t){if(t)return void(this.hasField(t)&&"function"==typeof this.$refs[t][0].focus&&this.$refs[t][0].focus());const e=Object.keys(this.$refs)[0];this.focus(e)},hasFieldType(t){return this.$helper.isComponent(`k-${t}-field`)},hasField(t){return this.$refs[t]&&this.$refs[t][0]},meetsCondition(t){if(!t.when)return!0;let e=!0;return Object.keys(t.when).forEach((s=>{this.value[s.toLowerCase()]!==t.when[s]&&(e=!1)})),e},onInvalid(t,e,s,i){this.errors[i]=e,this.$emit("invalid",this.errors)},hasErrors(){return Object.keys(this.errors).length}}},ls={};var cs=Dt(as,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("fieldset",{staticClass:"k-fieldset"},[s("k-grid",[t._l(t.fields,(function(e,i){return["hidden"!==e.type&&t.meetsCondition(e)?s("k-column",{key:e.signature,attrs:{width:e.width}},[s("k-error-boundary",[t.hasFieldType(e.type)?s("k-"+e.type+"-field",t._b({ref:i,refInFor:!0,tag:"component",attrs:{"form-data":t.value,name:i,novalidate:t.novalidate,disabled:t.disabled||e.disabled},on:{input:function(s){return t.$emit("input",t.value,e,i)},focus:function(s){return t.$emit("focus",s,e,i)},invalid:function(s,n){return t.onInvalid(s,n,e,i)},submit:function(s){return t.$emit("submit",s,e,i)}},model:{value:t.value[i],callback:function(e){t.$set(t.value,i,e)},expression:"value[fieldName]"}},"component",e,!1)):s("k-box",{attrs:{theme:"negative"}},[s("k-text",{attrs:{size:"small"}},[t._v("\n              The field type "),s("strong",[t._v('"'+t._s(i)+'"')]),t._v(" does not exist\n            ")])],1)],1)],1):t._e()]}))],2)],1)}),[],!1,(function(t){for(let e in ls)this[e]=ls[e]}),null,null,null);cs.options.__file="src/components/Forms/Fieldset.vue";var us=cs.exports;const ds={mixins:[We,Ye,Je,Qe],props:{type:String,icon:[String,Boolean],theme:String,novalidate:{type:Boolean,default:!1},value:{type:[String,Boolean,Number,Object,Array],default:null}}},ps={};var hs=Dt({mixins:[ds],inheritAttrs:!1,data(){return{isInvalid:this.invalid,listeners:o(o({},this.$listeners),{invalid:(t,e)=>{this.isInvalid=t,this.$emit("invalid",t,e)}})}},computed:{inputProps(){return o(o({},this.$props),this.$attrs)}},methods:{blur(t){t&&t.relatedTarget&&!1===this.$el.contains(t.relatedTarget)&&this.trigger(null,"blur")},focus(t){this.trigger(t,"focus")},select(t){this.trigger(t,"select")},trigger(t,e){if(t&&t.target&&"INPUT"===t.target.tagName&&"function"==typeof t.target[e])return void t.target[e]();if(this.$refs.input&&"function"==typeof this.$refs.input[e])return void this.$refs.input[e]();const s=this.$el.querySelector("input, select, textarea");s&&"function"==typeof s[e]&&s[e]()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-input",attrs:{"data-disabled":t.disabled,"data-invalid":!t.novalidate&&t.isInvalid,"data-theme":t.theme,"data-type":t.type}},[t.$slots.before||t.before?s("span",{staticClass:"k-input-before",on:{click:t.focus}},[t._t("before",[t._v(t._s(t.before))])],2):t._e(),t._v(" "),s("span",{staticClass:"k-input-element",on:{click:function(e){return e.stopPropagation(),t.focus(e)}}},[t._t("default",[s("k-"+t.type+"-input",t._g(t._b({ref:"input",tag:"component",attrs:{value:t.value}},"component",t.inputProps,!1),t.listeners))])],2),t._v(" "),t.$slots.after||t.after?s("span",{staticClass:"k-input-after",on:{click:t.focus}},[t._t("after",[t._v(t._s(t.after))])],2):t._e(),t._v(" "),t.$slots.icon||t.icon?s("span",{staticClass:"k-input-icon",on:{click:t.focus}},[t._t("icon",[s("k-icon",{attrs:{type:t.icon}})])],2):t._e()])}),[],!1,(function(t){for(let e in ps)this[e]=ps[e]}),null,null,null);hs.options.__file="src/components/Forms/Input.vue";var ms=hs.exports;const fs={};var gs=Dt({props:{methods:Array},data:()=>({currentForm:null,isLoading:!1,issue:"",user:{email:"",password:"",remember:!1}}),computed:{canToggle(){return null!==this.codeMode&&!0===this.methods.includes("password")&&(!0===this.methods.includes("password-reset")||!0===this.methods.includes("code"))},codeMode(){return!0===this.methods.includes("password-reset")?"password-reset":!0===this.methods.includes("code")?"code":null},fields(){let t={email:{autofocus:!0,label:this.$t("email"),type:"email",required:!0,link:!1}};return"email-password"===this.form&&(t.password={label:this.$t("password"),type:"password",minLength:8,required:!0,autocomplete:"current-password",counter:!1}),t},form(){return this.currentForm?this.currentForm:"password"===this.methods[0]?"email-password":"email"},isResetForm(){return"password-reset"===this.codeMode&&"email"===this.form},toggleText(){return this.$t("login.toggleText."+this.codeMode+"."+this.formOpposite(this.form))}},methods:{formOpposite:t=>"email-password"===t?"email":"email-password",async login(){this.issue=null,this.isLoading=!0;let t=Object.assign({},this.user);"email"===this.currentForm&&(t.password=null),!0===this.isResetForm&&(t.remember=!1);try{await this.$api.auth.login(t),this.$reload()}catch(e){this.issue=e.message}finally{this.isLoading=!1}},toggleForm(){this.currentForm=this.formOpposite(this.form),this.$refs.fieldset.focus("email")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"k-login-form",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("h1",{staticClass:"k-offscreen"},[t._v("\n    "+t._s(t.$t("login"))+"\n  ")]),t._v(" "),t.issue?s("k-login-alert",{on:{click:function(e){t.issue=null}}},[t._v("\n    "+t._s(t.issue)+"\n  ")]):t._e(),t._v(" "),s("div",{staticClass:"k-login-fields"},[!0===t.canToggle?s("button",{staticClass:"k-login-toggler",attrs:{type:"button"},on:{click:t.toggleForm}},[t._v("\n      "+t._s(t.toggleText)+"\n    ")]):t._e(),t._v(" "),s("k-fieldset",{ref:"fieldset",attrs:{novalidate:!0,fields:t.fields},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),t._v(" "),s("div",{staticClass:"k-login-buttons"},[!1===t.isResetForm?s("span",{staticClass:"k-login-checkbox"},[s("k-checkbox-input",{attrs:{value:t.user.remember,label:t.$t("login.remember")},on:{input:function(e){t.user.remember=e}}})],1):t._e(),t._v(" "),s("k-button",{staticClass:"k-login-button",attrs:{icon:"check",type:"submit"}},[t._v("\n      "+t._s(t.$t("login"+(t.isResetForm?".reset":"")))+"\n      "),t.isLoading?[t._v("\n        …\n      ")]:t._e()],2)],1)],1)}),[],!1,(function(t){for(let e in fs)this[e]=fs[e]}),null,null,null);gs.options.__file="src/components/Forms/Login.vue";var vs=gs.exports;const ks={};var bs=Dt({props:{methods:Array,pending:Object},data:()=>({code:"",isLoadingBack:!1,isLoadingLogin:!1,issue:""}),computed:{mode(){return!0===this.methods.includes("password-reset")?"password-reset":"login"}},methods:{async back(){this.isLoadingBack=!0,this.$go("/logout")},async login(){this.issue=null,this.isLoadingLogin=!0;try{await this.$api.auth.verifyCode(this.code),this.$store.dispatch("notification/success",this.$t("welcome")),"password-reset"===this.mode?this.$go("reset-password"):this.$reload()}catch(t){this.issue=t.message}finally{this.isLoadingLogin=!1}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"k-login-form k-login-code-form",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("h1",{staticClass:"k-offscreen"},[t._v("\n    "+t._s(t.$t("login"))+"\n  ")]),t._v(" "),t.issue?s("k-login-alert",{on:{click:function(e){t.issue=null}}},[t._v("\n    "+t._s(t.issue)+"\n  ")]):t._e(),t._v(" "),s("k-user-info",{attrs:{user:t.pending.email}}),t._v(" "),s("k-text-field",{attrs:{autofocus:!0,counter:!1,help:t.$t("login.code.text."+t.pending.challenge),label:t.$t("login.code.label."+t.mode),novalidate:!0,placeholder:t.$t("login.code.placeholder."+t.pending.challenge),required:!0,autocomplete:"one-time-code",icon:"unlock",name:"code"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t._v(" "),s("div",{staticClass:"k-login-buttons"},[s("k-button",{staticClass:"k-login-button k-login-back-button",attrs:{icon:"angle-left"},on:{click:t.back}},[t._v("\n      "+t._s(t.$t("back"))+" "),t.isLoadingBack?[t._v("\n        …\n      ")]:t._e()],2),t._v(" "),s("k-button",{staticClass:"k-login-button",attrs:{icon:"check",type:"submit"}},[t._v("\n      "+t._s(t.$t("login"+("password-reset"===t.mode?".reset":"")))+"\n      "),t.isLoadingLogin?[t._v("\n        …\n      ")]:t._e()],2)],1)],1)}),[],!1,(function(t){for(let e in ks)this[e]=ks[e]}),null,null,null);bs.options.__file="src/components/Forms/LoginCode.vue";var _s=bs.exports;const ys={props:{url:{type:String},accept:{type:String,default:"*"},attributes:{type:Object},multiple:{type:Boolean,default:!0},max:{type:Number}},data(){return{options:this.$props,completed:{},errors:[],files:[],total:0}},methods:{open(t){this.params(t),setTimeout((()=>{this.$refs.input.click()}),1)},params(t){this.options=Object.assign({},this.$props,t)},select(t){this.upload(t.target.files)},drop(t,e){this.params(e),this.upload(t)},upload(t){this.$refs.dialog.open(),this.files=[...t],this.completed={},this.errors=[],this.hasErrors=!1,this.options.max&&(this.files=this.files.slice(0,this.options.max)),this.total=this.files.length,this.files.forEach((t=>{this.$helper.upload(t,{url:this.options.url,attributes:this.options.attributes,headers:{"X-CSRF":window.panel.$system.csrf},progress:(t,e,s)=>{this.$refs[e.name]&&this.$refs[e.name][0]&&this.$refs[e.name][0].set(s)},success:(t,e,s)=>{this.complete(e,s.data)},error:(t,e,s)=>{this.errors.push({file:e,message:s.message}),this.complete(e,s.data)}})}))},complete(t,e){if(this.completed[t.name]=e,Object.keys(this.completed).length==this.total){if(this.$refs.input.value="",this.errors.length>0)return this.$forceUpdate(),void this.$emit("error",this.files);setTimeout((()=>{this.$refs.dialog.close(),this.$emit("success",this.files,Object.values(this.completed))}),250)}}}},$s={};var ws=Dt(ys,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-upload"},[s("input",{ref:"input",attrs:{accept:t.options.accept,multiple:t.options.multiple,"aria-hidden":"true",type:"file",tabindex:"-1"},on:{change:t.select,click:function(t){t.stopPropagation()}}}),t._v(" "),s("k-dialog",{ref:"dialog",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"},scopedSlots:t._u([{key:"footer",fn:function(){return[t.errors.length>0?[s("k-button-group",[s("k-button",{attrs:{icon:"check"},on:{click:function(e){return t.$refs.dialog.close()}}},[t._v("\n            "+t._s(t.$t("confirm"))+"\n          ")])],1)]:t._e()]},proxy:!0}])},[t.errors.length>0?[s("k-headline",[t._v(t._s(t.$t("upload.errors")))]),t._v(" "),s("ul",{staticClass:"k-upload-error-list"},t._l(t.errors,(function(e,i){return s("li",{key:"error-"+i},[s("p",{staticClass:"k-upload-error-filename"},[t._v("\n            "+t._s(e.file.name)+"\n          ")]),t._v(" "),s("p",{staticClass:"k-upload-error-message"},[t._v("\n            "+t._s(e.message)+"\n          ")])])})),0)]:[s("k-headline",[t._v(t._s(t.$t("upload.progress")))]),t._v(" "),s("ul",{staticClass:"k-upload-list"},t._l(t.files,(function(e,i){return s("li",{key:"file-"+i},[s("k-progress",{ref:e.name,refInFor:!0}),t._v(" "),s("p",{staticClass:"k-upload-list-filename"},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("p",[t._v(t._s(t.errors[e.name]))])],1)})),0)]],2)],1)}),[],!1,(function(t){for(let e in $s)this[e]=$s[e]}),null,null,null);ws.options.__file="src/components/Forms/Upload.vue";var xs=ws.exports;var Ss=t=>({$from:e})=>((t,e)=>{for(let s=t.depth;s>0;s--){const i=t.node(s);if(e(i))return{pos:s>0?t.before(s):0,start:t.start(s),depth:s,node:i}}})(e,t),Cs=t=>e=>{if((t=>t instanceof h)(e)){const{node:s,$from:i}=e;if(((t,e)=>Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t)(t,s))return{node:s,pos:i.pos,depth:i.depth}}},Es=(t,e,s={})=>{const i=Cs(e)(t.selection)||Ss((t=>t.type===e))(t.selection);return Object.keys(s).length&&i?i.node.hasMarkup(e,o(o({},i.node.attrs),s)):!!i};function Os(t=null,e=null){if(!t||!e)return!1;const s=t.parent.childAfter(t.parentOffset);if(!s.node)return!1;const i=s.node.marks.find((t=>t.type===e));if(!i)return!1;let n=t.index(),o=t.start()+s.offset,r=n+1,a=o+s.node.nodeSize;for(;n>0&&i.isInSet(t.parent.child(n-1).marks);)n-=1,o-=t.parent.child(n).nodeSize;for(;r<t.parent.childCount&&i.isInSet(t.parent.child(r).marks);)a+=t.parent.child(r).nodeSize,r+=1;return{from:o,to:a}}function Ts(t,e){return t.type===e.nodes.bulletList||t.type===e.nodes.orderedList||t.type===e.nodes.todoList}var Is={chainCommands:v,exitCode:k,setBlockType:m,toggleMark:b,wrappingInputRule:_,textblockTypeInputRule:y,addListNodes:$,wrapInList:g,splitListItem:w,liftListItem:f,sinkListItem:x,getMarkAttrs:function(t,e){const{from:s,to:i}=t.selection;let n=[];t.doc.nodesBetween(s,i,(t=>{n=[...n,...t.marks]}));const o=n.find((t=>t.type.name===e.name));return o?o.attrs:{}},markInputRule:function(t,e,s){return new c(t,((t,i,n,o)=>{const r=s instanceof Function?s(i):s,{tr:a}=t,l=i.length-1;let c=o,u=n;if(i[l]){const s=n+i[0].indexOf(i[l-1]),r=s+i[l-1].length-1,d=s+i[l-1].lastIndexOf(i[l]),p=d+i[l].length;if(function(t,e,s){let i=[];return s.doc.nodesBetween(t,e,((t,e)=>{i=[...i,...t.marks.map((s=>({start:e,end:e+t.nodeSize,mark:s})))]})),i}(n,o,t).filter((t=>{const{excluded:s}=t.mark.type;return s.find((t=>t.name===e.name))})).filter((t=>t.end>s)).length)return!1;p<r&&a.delete(p,r),d>s&&a.delete(s,d),u=s,c=u+i[l].length}return a.addMark(u,c,e.create(r)),a.removeStoredMark(e),a}))},markIsActive:function(t,e){const{from:s,$from:i,to:n,empty:o}=t.selection;return o?!!e.isInSet(t.storedMarks||i.marks()):!!t.doc.rangeHasMark(s,n,e)},markPasteRule:function(t,e,s){const i=(n,o)=>{const r=[];return n.forEach((n=>{if(n.isText){const{text:i,marks:a}=n;let l,c=0;const u=!!a.filter((t=>"link"===t.type.name))[0];for(;!u&&null!==(l=t.exec(i));)if(o&&o.type.allowsMarkType(e)&&l[1]){const t=l.index,i=t+l[0].length,o=t+l[0].indexOf(l[1]),a=o+l[1].length,u=s instanceof Function?s(l):s;t>0&&r.push(n.cut(c,t)),r.push(n.cut(o,a).mark(e.create(u).addToSet(n.marks))),c=i}c<i.length&&r.push(n.cut(c))}else r.push(n.copy(i(n.content,n)))})),p.fromArray(r)};return new u({props:{transformPasted:t=>new d(i(t.content),t.openStart,t.openEnd)}})},minMax:function(t=0,e=0,s=0){return Math.min(Math.max(parseInt(t,10),e),s)},nodeIsActive:Es,nodeInputRule:function(t,e,s){return new c(t,((t,i,n,o)=>{const r=s instanceof Function?s(i):s,{tr:a}=t;return i[0]&&a.replaceWith(n-1,o,e.create(r)),a}))},pasteRule:function(t,e,s){const i=n=>{const o=[];return n.forEach((n=>{if(n.isText){const{text:i}=n;let r,a=0;do{if(r=t.exec(i),r){const t=r.index,i=t+r[0].length,l=s instanceof Function?s(r[0]):s;t>0&&o.push(n.cut(a,t)),o.push(n.cut(t,i).mark(e.create(l).addToSet(n.marks))),a=i}}while(r);a<i.length&&o.push(n.cut(a))}else o.push(n.copy(i(n.content)))})),p.fromArray(o)};return new u({props:{transformPasted:t=>new d(i(t.content),t.openStart,t.openEnd)}})},removeMark:function(t){return(e,s)=>{const{tr:i,selection:n}=e;let{from:o,to:r}=n;const{$from:a,empty:l}=n;if(l){const e=Os(a,t);o=e.from,r=e.to}return i.removeMark(o,r,t),s(i)}},toggleBlockType:function(t,e,s={}){return(i,n,o)=>Es(i,t,s)?m(e)(i,n,o):m(t,s)(i,n,o)},toggleList:function(t,e){return(s,i,n)=>{const{schema:o,selection:r}=s,{$from:a,$to:l}=r,c=a.blockRange(l);if(!c)return!1;const u=Ss((t=>Ts(t,o)))(r);if(c.depth>=1&&u&&c.depth-u.depth<=1){if(u.node.type===t)return f(e)(s,i,n);if(Ts(u.node,o)&&t.validContent(u.node.content)){const{tr:e}=s;return e.setNodeMarkup(u.pos,t),i&&i(e),!1}}return g(t)(s,i,n)}},updateMark:function(t,e){return(s,i)=>{const{tr:n,selection:o,doc:r}=s,{ranges:a,empty:l}=o;if(l){const{from:s,to:i}=Os(o.$from,t);r.rangeHasMark(s,i,t)&&n.removeMark(s,i,t),n.addMark(s,i,t.create(e))}else a.forEach((s=>{const{$to:i,$from:o}=s;r.rangeHasMark(o.pos,i.pos,t)&&n.removeMark(o.pos,i.pos,t),n.addMark(o.pos,i.pos,t.create(e))}));return i(n)}}};class Ls{constructor(t=[],e){t.forEach((t=>{t.bindEditor(e),t.init()})),this.extensions=t}commands({schema:t,view:e}){return this.extensions.filter((t=>t.commands)).reduce(((s,i)=>{const{name:n,type:r}=i,a={},l=i.commands(o({schema:t,utils:Is},["node","mark"].includes(r)?{type:t[`${r}s`][n]}:{})),c=(t,s)=>{a[t]=t=>{if("function"!=typeof s||!e.editable)return!1;e.focus();const i=s(t);return"function"==typeof i?i(e.state,e.dispatch,e):i}};return"object"==typeof l?Object.entries(l).forEach((([t,e])=>{c(t,e)})):c(n,l),o(o({},s),a)}),{})}buttons(t="mark"){const e={};return this.extensions.filter((e=>e.type===t)).filter((t=>t.button)).forEach((t=>{Array.isArray(t.button)?t.button.forEach(((s,i)=>{e[t.name+"-"+i]=s})):e[t.name]=t.button})),e}getAllowedExtensions(t){return t instanceof Array||!t?t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions:[]}getFromExtensions(t,e,s=this.extensions){return s.filter((t=>["extension"].includes(t.type))).filter((e=>e[t])).map((s=>s[t](o(o({},e),{utils:Is}))))}getFromNodesAndMarks(t,e,s=this.extensions){return s.filter((t=>["node","mark"].includes(t.type))).filter((e=>e[t])).map((s=>s[t](o(o({},e),{type:e.schema[`${s.type}s`][s.name],utils:Is}))))}inputRules({schema:t,excludedExtensions:e}){const s=this.getAllowedExtensions(e);return[...this.getFromExtensions("inputRules",{schema:t},s),...this.getFromNodesAndMarks("inputRules",{schema:t},s)].reduce(((t,e)=>[...t,...e]),[])}keymaps({schema:t}){return[...this.getFromExtensions("keys",{schema:t}),...this.getFromNodesAndMarks("keys",{schema:t})].map((t=>S(t)))}get marks(){return this.extensions.filter((t=>"mark"===t.type)).reduce(((t,{name:e,schema:s})=>o(o({},t),{[e]:s})),{})}get nodes(){return this.extensions.filter((t=>"node"===t.type)).reduce(((t,{name:e,schema:s})=>o(o({},t),{[e]:s})),{})}get options(){const{view:t}=this;return this.extensions.reduce(((e,s)=>o(o({},e),{[s.name]:new Proxy(s.options,{set(e,s,i){const n=e[s]!==i;return Object.assign(e,{[s]:i}),n&&t.updateState(t.state),!0}})})),{})}pasteRules({schema:t,excludedExtensions:e}){const s=this.getAllowedExtensions(e);return[...this.getFromExtensions("pasteRules",{schema:t},s),...this.getFromNodesAndMarks("pasteRules",{schema:t},s)].reduce(((t,e)=>[...t,...e]),[])}plugins({schema:t}){return[...this.getFromExtensions("plugins",{schema:t}),...this.getFromNodesAndMarks("plugins",{schema:t})].reduce(((t,e)=>[...t,...e]),[]).map((t=>t instanceof u?t:new u(t)))}}class As{constructor(t={}){this.options=o(o({},this.defaults),t)}init(){return null}bindEditor(t=null){this.editor=t}get name(){return null}get type(){return"extension"}get defaults(){return{}}plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class Fs extends As{constructor(t={}){super(t)}get type(){return"node"}get schema(){return null}commands(){return{}}}class Bs extends Fs{get defaults(){return{inline:!1}}get name(){return"doc"}get schema(){return{content:this.options.inline?"paragraph+":"block+"}}}class js extends Fs{commands({utils:t,type:e}){return{paragraph:()=>t.setBlockType(e)}}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}get name(){return"paragraph"}}class Ds extends Fs{get name(){return"text"}get schema(){return{group:"inline"}}}class Ms extends class{emit(t,...e){this._callbacks=this._callbacks||{};const s=this._callbacks[t];return s&&s.forEach((t=>t.apply(this,e))),this}off(t,e){if(arguments.length){const s=this._callbacks?this._callbacks[t]:null;s&&(e?this._callbacks[t]=s.filter((t=>t!==e)):delete this._callbacks[t])}else this._callbacks={};return this}on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push(e),this}}{constructor(t={}){super(),this.defaults={autofocus:!1,content:"",disableInputRules:!1,disablePasteRules:!1,editable:!0,element:null,extensions:[],emptyDocument:{type:"doc",content:[]},events:{},inline:!1,parseOptions:{},topNode:"doc",useBuiltInExtensions:!0},this.init(t)}blur(){this.view.dom.blur()}get builtInExtensions(){return this.options.useBuiltInExtensions?[new Bs({inline:this.options.inline}),new Ds,new js]:[]}buttons(t){return this.extensions.buttons(t)}clearContent(t=!1){this.setContent(this.options.emptyDocument,t)}command(t,...e){this.commands[t]&&this.commands[t](...e)}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createDocument(t,e=this.options.parseOptions){if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof t)try{return this.schema.nodeFromJSON(t)}catch(s){return window.console.warn("Invalid content.","Passed value:",t,"Error:",s),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof t){const s=`<div>${t}</div>`,i=(new window.DOMParser).parseFromString(s,"text/html").body.firstElementChild;return C.fromSchema(this.schema).parse(i,e)}return!1}createEvents(){const t=this.options.events||{};return Object.entries(t).forEach((([t,e])=>{this.on(t,e)})),t}createExtensions(){return new Ls([...this.builtInExtensions,...this.options.extensions],this)}createFocusEvents(){const t=(t,e,s=!0)=>{this.focused=s,this.emit(s?"focus":"blur",{event:e,state:t.state,view:t});const i=this.state.tr.setMeta("focused",s);this.view.dispatch(i)};return new u({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(e,s)=>{t(e,s,!0)},blur:(e,s)=>{t(e,s,!1)}}}})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createMarks(){return this.extensions.marks}createNodes(){return this.extensions.nodes}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createPlugins(){return this.extensions.plugins({schema:this.schema})}createSchema(){return new E({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return O.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,T({rules:this.inputRules}),...this.pasteRules,...this.keymaps,S({Backspace:F}),S(B),this.createFocusEvents()]})}createView(){return new I(this.element,{dispatchTransaction:this.dispatchTransaction.bind(this),editable:()=>this.options.editable,handlePaste:(...t)=>{this.emit("paste",...t)},handleDrop:(...t)=>{this.emit("drop",...t)},state:this.createState()})}destroy(){this.view&&this.view.destroy()}dispatchTransaction(t){const e=this.state,s=this.state.apply(t);this.view.updateState(s),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks();const i={getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t};this.emit("transaction",i),!t.docChanged&&t.getMeta("preventUpdate")||this.emit("update",i);const{from:n,to:r}=this.state.selection,a=!e||!e.selection.eq(s.selection);this.emit(s.selection.empty?"deselect":"select",o(o({},i),{from:n,hasChanged:a,to:r}))}focus(t=null){if(this.view.focused&&null===t||!1===t)return;const{from:e,to:s}=this.selectionAtPosition(t);this.setSelection(e,s),setTimeout((()=>this.view.focus()),10)}getHTML(){const t=document.createElement("div"),e=L.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),this.options.inline&&t.querySelector("p")?t.querySelector("p").innerHTML:t.innerHTML}getJSON(){return this.state.doc.toJSON()}getMarkAttrs(t=null){return this.activeMarkAttrs[t]}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.nodes,marks:this.marks}))}init(t={}){this.options=o(o({},this.defaults),t),this.element=this.options.element,this.focused=!1,this.selection={from:0,to:0},this.events=this.createEvents(),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.plugins=this.createPlugins(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),!1!==this.options.autofocus&&this.focus(this.options.autofocus),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}isEditable(){return this.options.editable}isEmpty(){if(this.state)return 0===this.state.doc.textContent.length}get isActive(){return Object.entries(o(o({},this.activeMarks),this.activeNodes)).reduce(((t,[e,s])=>o(o({},t),{[e]:(t={})=>s(t)})),{})}removeMark(t){if(this.schema.marks[t])return Is.removeMark(this.schema.marks[t])(this.state,this.view.dispatch)}selectionAtPosition(t=null){if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{doc:t}=this.state;return{from:t.content.size,to:t.content.size}}return{from:t,to:t}}setActiveNodesAndMarks(){this.activeMarks=Object.values(this.schema.marks).filter((t=>Is.markIsActive(this.state,t))).map((t=>t.name)),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((t,[e,s])=>o(o({},t),{[e]:Is.getMarkAttrs(this.state,s)})),{}),this.activeNodes=Object.values(this.schema.nodes).filter((t=>Is.nodeIsActive(this.state,t))).map((t=>t.name))}setContent(t={},e=!1,s){const{doc:i,tr:n}=this.state,o=this.createDocument(t,s),r=A.create(i,0,i.content.size),a=n.setSelection(r).replaceSelectionWith(o,!1).setMeta("preventUpdate",!e);this.view.dispatch(a)}setSelection(t=0,e=0){const{doc:s,tr:i}=this.state,n=Is.minMax(t,0,s.content.size),o=Is.minMax(e,0,s.content.size),r=A.create(s,n,o),a=i.setSelection(r);this.view.dispatch(a)}get state(){return this.view?this.view.state:null}toggleMark(t){if(this.schema.marks[t])return Is.toggleMark(this.schema.marks[t])(this.state,this.view.dispatch)}updateMark(t,e){if(this.schema.marks[t])return Is.updateMark(this.schema.marks[t],e)(this.state,this.view.dispatch)}}const Ps={};var Rs=Dt({data:()=>({link:{href:null,title:null,target:!1}}),computed:{fields(){return{href:{label:this.$t("url"),type:"text",icon:"url"},title:{label:this.$t("title"),type:"text",icon:"title"},target:{label:this.$t("open.newWindow"),type:"toggle",text:[this.$t("no"),this.$t("yes")]}}}},methods:{open(t){this.link=o({title:null,target:!1},t),this.link.target=Boolean(this.link.target),this.$refs.dialog.open()},submit(){this.$emit("submit",o(o({},this.link),{target:this.link.target?"_blank":null})),this.$refs.dialog.close()}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("confirm"),size:"medium"},on:{close:function(e){return t.$emit("close")},submit:t.submit},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}})}),[],!1,(function(t){for(let e in Ps)this[e]=Ps[e]}),null,null,null);Rs.options.__file="src/components/Writer/Dialogs/LinkDialog.vue";var Ns=Rs.exports;const qs={};var zs=Dt({data:()=>({email:{email:null,title:null}}),computed:{fields(){return{href:{label:this.$t("email"),type:"email",icon:"email"},title:{label:this.$t("title"),type:"text",icon:"title"}}}},methods:{open(t){this.email=o({title:null},t),this.$refs.dialog.open()},submit(){this.$emit("submit",this.email),this.$refs.dialog.close()}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-form-dialog",{ref:"dialog",attrs:{fields:t.fields,"submit-button":t.$t("confirm"),size:"medium"},on:{close:function(e){return t.$emit("close")},submit:t.submit},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})}),[],!1,(function(t){for(let e in qs)this[e]=qs[e]}),null,null,null);zs.options.__file="src/components/Writer/Dialogs/EmailDialog.vue";var Us=zs.exports;class Hs extends As{constructor(t={}){super(t)}command(){return()=>{}}remove(){this.editor.removeMark(this.name)}get schema(){return null}get type(){return"mark"}toggle(){return this.editor.toggleMark(this.name)}update(t){this.editor.updateMark(this.name,t)}}class Vs extends Hs{get button(){return{icon:"code",label:r.$t("toolbar.button.code")}}commands(){return()=>this.toggle()}inputRules({type:t,utils:e}){return[e.markInputRule(/(?:`)([^`]+)(?:`)$/,t)]}keys(){return{"Mod-`":()=>this.toggle()}}get name(){return"code"}pasteRules({type:t,utils:e}){return[e.markPasteRule(/(?:`)([^`]+)(?:`)/g,t)]}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}}class Ks extends Hs{get button(){return{icon:"bold",label:r.$t("toolbar.button.bold")}}commands(){return()=>this.toggle()}inputRules({type:t,utils:e}){return[e.markInputRule(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}keys(){return{"Mod-b":()=>this.toggle()}}get name(){return"bold"}pasteRules({type:t,utils:e}){return[e.markPasteRule(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]}}}class Ws extends Hs{get button(){return{icon:"italic",label:r.$t("toolbar.button.italic")}}commands(){return()=>this.toggle()}inputRules({type:t,utils:e}){return[e.markInputRule(/(?:^|[^_])(_([^_]+)_)$/,t),e.markInputRule(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}keys(){return{"Mod-i":()=>this.toggle()}}get name(){return"italic"}pasteRules({type:t,utils:e}){return[e.markPasteRule(/_([^_]+)_/g,t),e.markPasteRule(/\*([^*]+)\*/g,t)]}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}}class Gs extends Hs{get button(){return{icon:"url",label:r.$t("toolbar.button.link")}}commands(){return{link:()=>{this.editor.emit("link")},insertLink:(t={})=>{if(t.href)return this.update(t)},removeLink:()=>this.remove(),toggleLink:(t={})=>{t.href&&t.href.length>0?this.editor.command("insertLink",t):this.editor.command("removeLink")}}}get defaults(){return{target:null}}get name(){return"link"}pasteRules({type:t,utils:e}){return[e.pasteRule(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,]*)/gi,t,(t=>({href:t})))]}plugins(){return[{props:{handleClick:(t,e,s)=>{const i=this.editor.getMarkAttrs("link");i.href&&!0===s.altKey&&s.target instanceof HTMLAnchorElement&&(s.stopPropagation(),window.open(i.href,i.target))}}}]}get schema(){return{attrs:{href:{default:null},target:{default:null},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]:not([href^='mailto:'])",getAttrs:t=>({href:t.getAttribute("href"),target:t.getAttribute("target"),title:t.getAttribute("title")})}],toDOM:t=>["a",o(o({},t.attrs),{rel:"noopener noreferrer nofollow"}),0]}}}class Ys extends Hs{get button(){return{icon:"email",label:"Email"}}commands(){return{email:()=>{this.editor.emit("email")},insertEmail:(t={})=>{if(t.href)return this.update(t)},removeEmail:()=>this.remove(),toggleEmail:(t={})=>{t.href&&t.href.length>0?this.editor.command("insertEmail",t):this.editor.command("removeEmail")}}}get defaults(){return{target:null}}get name(){return"email"}pasteRules({type:t,utils:e}){return[e.pasteRule(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/gi,t,(t=>({href:t})))]}plugins(){return[{props:{handleClick:(t,e,s)=>{const i=this.editor.getMarkAttrs("email");i.href&&!0===s.altKey&&s.target instanceof HTMLAnchorElement&&(s.stopPropagation(),window.open(i.href))}}}]}get schema(){return{attrs:{href:{default:null},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href^='mailto:']",getAttrs:t=>({href:t.getAttribute("href").replace("mailto:","")})}],toDOM:t=>["a",o(o({},t.attrs),{href:"mailto:"+t.attrs.href}),0]}}}class Js extends Hs{get button(){return{icon:"strikethrough",label:r.$t("toolbar.button.strike")}}commands(){return()=>this.toggle()}inputRules({type:t,utils:e}){return[e.markInputRule(/~([^~]+)~$/,t)]}keys(){return{"Mod-d":()=>this.toggle()}}get name(){return"strike"}pasteRules({type:t,utils:e}){return[e.markPasteRule(/~([^~]+)~/g,t)]}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],toDOM:()=>["s",0]}}}class Xs extends Hs{get button(){return{icon:"underline",label:r.$t("toolbar.button.underline")}}commands(){return()=>this.toggle()}keys(){return{"Mod-u":()=>this.toggle()}}get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],toDOM:()=>["u",0]}}}class Zs extends Fs{get button(){return{icon:"list-bullet",label:r.$t("toolbar.button.ul")}}commands({type:t,schema:e,utils:s}){return()=>s.toggleList(t,e.nodes.listItem)}inputRules({type:t,utils:e}){return[e.wrappingInputRule(/^\s*([-+*])\s$/,t)]}keys({type:t,schema:e,utils:s}){return{"Shift-Ctrl-8":s.toggleList(t,e.nodes.listItem)}}get name(){return"bulletList"}get schema(){return{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}}class Qs extends Fs{commands({utils:t,type:e}){return()=>this.createHardBreak(t,e)}createHardBreak(t,e){return t.chainCommands(t.exitCode,((t,s)=>(s(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)))}get defaults(){return{enter:!1,text:!1}}keys({utils:t,type:e}){const s=this.createHardBreak(t,e);let i={"Mod-Enter":s,"Shift-Enter":s};return this.options.enter&&(i.Enter=s),i}get name(){return"hardBreak"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}}class ti extends Fs{get button(){return this.options.levels.map((t=>({command:`h${t}`,icon:"title",label:`Heading ${t}`})))}commands({type:t,schema:e,utils:s}){let i={toggleHeading:i=>s.toggleBlockType(t,e.nodes.paragraph,i)};return this.options.levels.forEach((e=>{i[`h${e}`]=()=>s.setBlockType(t,{level:e})})),i}get defaults(){return{levels:[1,2,3]}}inputRules({type:t,utils:e}){return this.options.levels.map((s=>e.textblockTypeInputRule(new RegExp(`^(#{1,${s}})\\s$`),t,(()=>({level:s})))))}keys({type:t,utils:e}){return this.options.levels.reduce(((s,i)=>o(o({},s),{[`Shift-Ctrl-${i}`]:e.setBlockType(t,{level:i})})),{})}get name(){return"heading"}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}}))),toDOM:t=>[`h${t.attrs.level}`,0]}}}class ei extends Fs{commands({type:t}){return()=>(e,s)=>s(e.tr.replaceSelectionWith(t.create()))}inputRules({type:t,utils:e}){return[e.nodeInputRule(/^(?:---|___\s|\*\*\*\s)$/,t)]}get name(){return"horizontalRule"}get schema(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]}}}class si extends Fs{keys({type:t,utils:e}){return{Enter:e.splitListItem(t),"Shift-Tab":e.liftListItem(t),Tab:e.sinkListItem(t)}}get name(){return"listItem"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}}class ii extends Fs{get button(){return{icon:"list-numbers",label:r.$t("toolbar.button.ol")}}commands({type:t,schema:e,utils:s}){return()=>s.toggleList(t,e.nodes.listItem)}inputRules({type:t,utils:e}){return[e.wrappingInputRule(/^(\d+)\.\s$/,t,(t=>({order:+t[1]})),((t,e)=>e.childCount+e.attrs.order===+t[1]))]}keys({type:t,schema:e,utils:s}){return{"Shift-Ctrl-9":s.toggleList(t,e.nodes.listItem)}}get name(){return"orderedList"}get schema(){return{attrs:{order:{default:1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}}class ni extends As{commands(){return{undo:()=>j,redo:()=>D,undoDepth:()=>M,redoDepth:()=>P}}get defaults(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":j,"Mod-y":D,"Shift-Mod-z":D,"Mod-я":j,"Shift-Mod-я":D}}get name(){return"history"}plugins(){return[R({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}class oi extends As{constructor(t={}){super(t)}close(){this.visible=!1,this.emit()}emit(){this.editor.emit("toolbar",{marks:this.marks,nodes:this.nodes,position:this.position,visible:this.visible})}init(){this.position={left:0,bottom:0},this.visible=!1,this.editor.on("blur",(()=>{this.close()})),this.editor.on("deselect",(()=>{this.close()})),this.editor.on("select",(({hasChanged:t})=>{!1!==t?this.open():this.emit()}))}get marks(){return this.editor.activeMarks}get nodes(){return this.editor.activeNodes}open(){this.visible=!0,this.reposition(),this.emit()}reposition(){const{from:t,to:e}=this.editor.selection,s=this.editor.view.coordsAtPos(t),i=this.editor.view.coordsAtPos(e,!0),n=this.editor.element.getBoundingClientRect();let o=(s.left+i.left)/2-n.left,r=Math.round(n.bottom-s.top);return this.position={bottom:r,left:o}}get type(){return"toolbar"}}const ri={};var ai=Dt({props:{activeMarks:{type:Array,default:()=>[]},activeNodes:{type:Array,default:()=>[]},editor:{type:Object,required:!0},marks:{type:Array}},computed:{activeNode(){const t=Object.keys(this.nodeButtons).find((t=>this.activeNodes.includes(t)));return!!t&&this.nodeButtons[t]},markButtons(){return this.buttons("mark")},nodeButtons(){return this.buttons("node")}},methods:{buttons(t){const e=this.editor.buttons(t);let s=this.sorting;!1!==s&&!1!==Array.isArray(s)||(s=Object.keys(e));let i={};return s.forEach((t=>{e[t]&&(i[t]=e[t])})),i},command(t,...e){this.$emit("command",t,...e)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-writer-toolbar"},[Object.keys(t.nodeButtons).length>1&&t.activeNode?s("k-dropdown",{nativeOn:{mousedown:function(t){t.preventDefault()}}},[s("k-button",{staticClass:"k-writer-toolbar-button k-writer-toolbar-nodes",attrs:{icon:t.activeNode.icon},on:{click:function(e){return t.$refs.nodes.toggle()}}}),t._v(" "),s("k-dropdown-content",{ref:"nodes"},t._l(t.nodeButtons,(function(e,i){return s("k-dropdown-item",{key:i,attrs:{icon:e.icon},on:{click:function(s){return t.command(e.command||i)}}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),1)],1):t._e(),t._v(" "),t._l(t.markButtons,(function(e,i){return s("k-button",{key:i,class:{"k-writer-toolbar-button":!0,"k-writer-toolbar-button-active":t.activeMarks.includes(i)},attrs:{icon:e.icon},on:{mousedown:function(s){return s.preventDefault(),t.command(e.command||i)}}})}))],2)}),[],!1,(function(t){for(let e in ri)this[e]=ri[e]}),null,null,null);ai.options.__file="src/components/Writer/Toolbar.vue";var li=ai.exports;const ci={props:{breaks:Boolean,code:Boolean,disabled:Boolean,emptyDocument:{type:Object,default:()=>({type:"doc",content:[]})},headings:[Array,Boolean],inline:{type:Boolean,default:!1},marks:{type:[Array,Boolean],default:!0},nodes:{type:[Array,Boolean],default:()=>["heading","bulletList","orderedList"]},placeholder:String,spellcheck:Boolean,extensions:Array,value:{type:String,default:""}}},ui={};var di=Dt({components:{"k-writer-email-dialog":Us,"k-writer-link-dialog":Ns,"k-writer-toolbar":li},mixins:[ci],data(){return{editor:null,html:this.value,isEmpty:!0,toolbar:!1}},watch:{value(t,e){t!==e&&t!==this.html&&(this.html=t,this.editor.setContent(this.html))}},mounted(){this.editor=new Ms({content:this.value,editable:!this.disabled,element:this.$el,emptyDocument:this.emptyDocument,events:{link:()=>{this.$refs.linkDialog.open(this.editor.getMarkAttrs("link"))},email:()=>{this.$refs.emailDialog.open(this.editor.getMarkAttrs("email"))},toolbar:t=>{this.toolbar=t,this.toolbar.visible&&this.$nextTick((()=>{this.onToolbarOpen()}))},update:()=>{this.html=this.editor.getHTML(),this.isEmpty=this.editor.isEmpty(),this.$emit("input",!1===this.isEmpty?this.html:"")}},extensions:[...this.createMarks(),...this.createNodes(),new ni,new oi,...this.extensions||[]],inline:this.inline}),this.isEmpty=this.editor.isEmpty()},beforeDestroy(){this.editor.destroy()},methods:{filterExtensions(t,e,s){!1===e?e=[]:!0!==e&&!1!==Array.isArray(e)||(e=Object.keys(t));let i=[];return e.forEach((e=>{t[e]&&i.push(t[e])})),"function"==typeof s&&(i=s(e,i)),i},command(t,...e){this.editor.command(t,...e)},createMarks(){return this.filterExtensions({bold:new Ks,italic:new Ws,strike:new Js,underline:new Xs,code:new Vs,link:new Gs,email:new Ys},this.marks)},createNodes(){const t=new Qs({text:!0,enter:this.inline});return!0===this.inline?[t]:this.filterExtensions({bulletList:new Zs,orderedList:new ii,heading:new ti,horizontalRule:new ei,listItem:new si},this.nodes,((e,s)=>((e.includes("bulletList")||e.includes("orderedList"))&&s.push(new si),s.push(t),s)))},getHTML(){return this.editor.getHTML()},focus(){this.editor.focus()},onToolbarOpen(){if(this.$refs.toolbar){const t=this.$el.clientWidth,e=this.$refs.toolbar.$el.clientWidth;let s=this.toolbar.position.left;s-e/2<0&&(s=s+(e/2-s)-20),s+e/2>t&&(s=s-(s+e/2-t)+20),s!==this.toolbar.position.left&&(this.$refs.toolbar.$el.style.left=s+"px")}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"editor",staticClass:"k-writer",attrs:{"data-empty":t.isEmpty,"data-placeholder":t.placeholder,spellcheck:t.spellcheck}},[t.editor?[t.toolbar.visible?s("k-writer-toolbar",{ref:"toolbar",style:{bottom:t.toolbar.position.bottom+"px",left:t.toolbar.position.left+"px"},attrs:{editor:t.editor,"active-marks":t.toolbar.marks,"active-nodes":t.toolbar.nodes},on:{command:function(e){return t.editor.command(e)}}}):t._e(),t._v(" "),s("k-writer-link-dialog",{ref:"linkDialog",on:{close:function(e){return t.editor.focus()},submit:function(e){return t.editor.command("toggleLink",e)}}}),t._v(" "),s("k-writer-email-dialog",{ref:"emailDialog",on:{close:function(e){return t.editor.focus()},submit:function(e){return t.editor.command("toggleEmail",e)}}})]:t._e()],2)}),[],!1,(function(t){for(let e in ui)this[e]=ui[e]}),null,null,null);di.options.__file="src/components/Writer/Writer.vue";var pi=di.exports;const hi={};var mi=Dt({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-login-alert",on:{click:function(e){return t.$emit("click")}}},[s("span",[t._t("default")],2),t._v(" "),s("k-icon",{attrs:{type:"alert"}})],1)}),[],!1,(function(t){for(let e in hi)this[e]=hi[e]}),null,null,null);mi.options.__file="src/components/Forms/LoginAlert.vue";var fi=mi.exports;const gi={mixins:[Ge,Je,Ze,ts,ss],inheritAttrs:!1,props:{value:Boolean},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},onChange(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.focus()}},validations(){return{value:{required:!this.required||N.required}}}},vi={};var ki=Dt(gi,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-checkbox-input",on:{click:function(t){t.stopPropagation()}}},[s("input",{ref:"input",staticClass:"k-checkbox-input-native",attrs:{id:t.id,disabled:t.disabled,type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.onChange(e.target.checked)}}}),t._v(" "),s("span",{staticClass:"k-checkbox-input-icon",attrs:{"aria-hidden":"true"}},[s("svg",{attrs:{width:"12",height:"10",viewBox:"0 0 12 10",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M1 5l3.3 3L11 1","stroke-width":"2",fill:"none","fill-rule":"evenodd"}})])]),t._v(" "),s("span",{staticClass:"k-checkbox-input-label",domProps:{innerHTML:t._s(t.label)}})])}),[],!1,(function(t){for(let e in vi)this[e]=vi[e]}),null,null,null);ki.options.__file="src/components/Forms/Input/CheckboxInput.vue";var bi=ki.exports;const _i={mixins:[Ge,Je,Ze,ss],props:{columns:Number,max:Number,min:Number,options:Array,value:{type:[Array,Object],default:()=>[]}}},yi={};var $i=Dt({mixins:[_i],inheritAttrs:!1,data(){return{selected:this.valueToArray(this.value)}},watch:{value(t){this.selected=this.valueToArray(t)},selected(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$el.querySelector("input").focus()},onInput(t,e){if(!0===e)this.selected.push(t);else{const e=this.selected.indexOf(t);-1!==e&&this.selected.splice(e,1)}this.$emit("input",this.selected)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.focus()},valueToArray:t=>!0===Array.isArray(t)?t:"string"==typeof t?String(t).split(","):"object"==typeof t?Object.values(t):void 0},validations(){return{selected:{required:!this.required||N.required,min:!this.min||N.minLegth(this.min),max:!this.max||N.maxLength(this.max)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"k-checkboxes-input",style:"--columns:"+t.columns},t._l(t.options,(function(e,i){return s("li",{key:i},[s("k-checkbox-input",{attrs:{id:t.id+"-"+i,label:e.text,value:-1!==t.selected.indexOf(e.value)},on:{input:function(s){return t.onInput(e.value,s)}}})],1)})),0)}),[],!1,(function(t){for(let e in yi)this[e]=yi[e]}),null,null,null);$i.options.__file="src/components/Forms/Input/CheckboxesInput.vue";var wi=$i.exports;const xi={mixins:[Ge,Je,Ze,ss],props:{display:{type:String,default:"DD.MM.YYYY"},max:String,min:String,step:{type:Object,default:()=>({size:1,unit:"day"})},type:{type:String,default:"date"},value:String}},Si={};var Ci=Dt({mixins:[xi],inheritAttrs:!1,data(){return{input:this.toFormat(this.value),selected:null}},computed:{map:()=>({day:["D","DD"],month:["M","MM","MMM","MMMM"],year:["YY","YYYY"]}),parsed(){if(this.input)for(let t=0;t<this.patterns.length;t++){const e=this.$library.dayjs.utc(this.input,this.patterns[t]);if(e.isValid())return e}return null},parts(){return String(this.input).split(/\W/)},patterns(){let t=[],e=[];for(let s=0;s<this.tokens.length;s++){const i=this.toTokens(this.tokens[s]);if(i){let s=[];0===t.length?s=i.map((t=>[t])):i.forEach((t=>{s=s.concat(e.map((e=>e.concat([t]))))})),t=t.concat(s),e=s,s=[]}}return t.map((t=>t.join(this.separator))).reverse()},separator(){return this.display.match(/[\W]/)[0]},tokens(){return this.display.split(/\W/)}},watch:{value(t){this.input=this.toFormat(t),this.onInvalid()}},mounted(){this.onInvalid()},methods:{emit(t){const e=this.toFormat(this.parsed,"YYYY-MM-DD HH:mm:ss")||"";this.$emit(t,e)},focus(){this.$refs.input.focus()},manipulate(t){let e;if(this.parsed){let s=this.step.unit,i=this.step.size;if(this.selected=this.toCursorIndex(),null!==this.selected){const e=this.tokens[this.selected];"a"===e.toLowerCase()?(s="hour",i=12,t="pm"===this.parts[this.selected]?"subtract":"add"):(s=this.toUnit(e),s!==this.step.unit&&(i=1))}e=this.parsed.clone()[t](i,s)}else e=this.toNearest(this.$library.dayjs()),this.selected=this.toIndex();this.input=this.toFormat(e),this.emit("update"),this.$nextTick((()=>{this.select()}))},onBlur(){this.parsed||(this.input=null),this.selected=null,this.emit("update")},onDown(){this.manipulate("subtract")},onEnter(){this.onBlur(),this.emit("enter")},onInput(){this.emit("input")},onInvalid(t,e){this.$emit("invalid",t||this.$v.$invalid,e||this.$v)},onTab(t){const e=this.toCursorIndex();null===this.selected?this.selected=e||0:e!==this.selected?this.selected=e:this.selected++,this.selected>=this.parts.length?this.selected=null:(t.preventDefault(),t.stopPropagation(),this.select())},onUp(){this.manipulate("add")},select(){if(null!==this.selected){const t=this.toRange(this.selected);this.selected>0&&t.start++,this.$refs.input.$refs.input.setSelectionRange(t.start,t.end)}},toCursorIndex(){if(0===this.$refs.input.$refs.input.selectionStart&&this.$refs.input.$refs.input.selectionEnd===String(this.input).length)return null;for(let t=0;t<this.parts.length;t++){const e=this.toRange(t);if(e.start<=this.$refs.input.$refs.input.selectionStart&&e.end>=this.$refs.input.$refs.input.selectionEnd)return t}},toDatetime(t){return this.$library.dayjs.utc(t)},toFormat(t,e=this.display){return t?("string"==typeof t&&(t=this.toDatetime(t)),!1===t.isValid()?null:this.toNearest(t).format(e)):null},toNearest(t,e=this.step.unit,s=this.step.size){"day"===e&&(e="date");const i=t.get(e),n=Math.round(i/s)*s;return t.set(e,n).startOf(e)},toIndex(t=this.step.unit){const e=this.map[t];for(let s=0;s<e.length;s++){const t=this.tokens.indexOf(e[s]);if(-1!==t)return t}},toRange(t){return{start:this.parts.slice(0,t).join(this.separator).length,end:this.parts.slice(0,t+1).join(this.separator).length}},toTokens(t){return Object.values(this.map).filter((e=>e.includes(t)))[0]},toUnit(t,e=!0){const s=Object.keys(this.map);let i=Object.values(this.map).findIndex((e=>e.includes(t)));const n=this.step.unit;return!0===e&&i<s.indexOf(n)?n:s[i]}},validations(){return{value:{min:!this.min||(t=>this.$helper.validate.datetime(this,t,this.min,"isAfter",this.step.unit)),max:!this.max||(t=>this.$helper.validate.datetime(this,t,this.max,"isBefore",this.step.unit)),required:!this.required||N.required}}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-text-input",t._b({ref:"input",class:"k-"+t.type+"-input",attrs:{placeholder:t.display,spellcheck:!1,type:"text"},on:{blur:t.onBlur,input:t.onInput,invalid:t.onInvalid,focus:function(e){return t.$emit("focus")},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.stopPropagation(),e.preventDefault(),t.onDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.stopPropagation(),e.preventDefault(),t.onUp(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.onTab(e)}]},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},"k-text-input",t.$props,!1))}),[],!1,(function(t){for(let e in Si)this[e]=Si[e]}),null,null,null);Ci.options.__file="src/components/Forms/Input/DateInput.vue";var Ei=Ci.exports;const Oi={mixins:[xi],props:{time:{type:[Boolean,Object],default:()=>({})},value:String}},Ti={};var Ii=Dt({mixins:[Oi],inheritAttrs:!1,data(){return{input:this.toDatetime(this.value)}},computed:{dateOptions(){return{autofocus:this.autofocus,disabled:this.disabled,display:this.display,id:this.id,required:this.required,value:this.value}},timeOptions(){return o(o({},this.time),{disabled:this.disabled,required:this.required,value:this.value?this.toDatetime(this.value).format("HH:mm:ss"):null})}},watch:{value(){this.input=this.toDatetime(this.value),this.onInvalid()}},mounted(){this.onInvalid()},methods:{emit(t,e=this.input){e?this.$emit(t,e.format("YYYY-MM-DD HH:mm:ss")):this.$emit(t,"")},focus(){this.$refs.dateInput.focus()},onUpdate(t,e){const s=this.toDatetime(this.value);e=this.toDatetime(t,e,s),this.emit("update",e)},onEnter(t,e){this.onUpdate(e,t),this.emit("enter")},onInput(t,e){this.input=this.toDatetime(t,e,this.input),this.emit("input")},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},toDatetime(t,e,s){if(!t)return null;let i=this.$library.dayjs.utc(t);return"time"===e&&(i=this.$library.dayjs.utc(t,"HH:mm:ss")),!1===i.isValid()?null:e&&s?"date"===e?s.clone().utc().set("year",i.get("year")).set("month",i.get("month")).set("date",i.get("date")):"time"===e?s.clone().utc().set("hour",i.get("hour")).set("minute",i.get("minute")).set("second",i.get("second")):void 0:i}},validations(){return{value:{min:!this.min||(t=>this.$helper.validate.datetime(this,t,this.min,"isAfter",this.step.unit)),max:!this.max||(t=>this.$helper.validate.datetime(this,t,this.max,"isBefore",this.step.unit)),required:!this.required||N.required}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-datetime-input"},[s("k-date-input",t._b({ref:"dateInput",on:{input:function(e){return t.onInput(e,"date")},update:function(e){return t.onUpdate(e,"date")},enter:function(e){return t.onEnter(e,"date")},focus:function(e){return t.$emit("focus")}}},"k-date-input",t.dateOptions,!1)),t._v(" "),t.time?[s("k-time-input",t._b({ref:"timeInput",on:{input:function(e){return t.onInput(e,"time")},update:function(e){return t.onUpdate(e,"time")},enter:function(e){return t.onEnter(e,"time")},focus:function(e){return t.$emit("focus")}}},"k-time-input",t.timeOptions,!1))]:t._e()],2)}),[],!1,(function(t){for(let e in Ti)this[e]=Ti[e]}),null,null,null);Ii.options.__file="src/components/Forms/Input/DateTimeInput.vue";var Li=Ii.exports,Ai=t=>{const e=t.$languages.default||null,s=t.$languages.current||null,i=t.$system.multilang||!1,n=t.$user?t.$user.language:null,o=s?s.direction:null;if(i&&s&&!1===t.disabled&&(s.direction!==e.direction||n!==s.code))return o};const Fi={mixins:[Ge,Je,Ze,es,ss],props:{autocomplete:{type:[Boolean,String],default:"off"},maxlength:Number,minlength:Number,pattern:String,placeholder:String,preselect:Boolean,spellcheck:{type:[Boolean,String],default:"off"},type:{type:String,default:"text"},value:String}},Bi={};var ji=Dt({mixins:[Fi],inheritAttrs:!1,data(){return{listeners:o(o({},this.$listeners),{input:t=>this.onInput(t.target.value)})}},computed:{direction(){return Ai(this)}},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus(),this.$props.preselect&&this.select()},methods:{focus(){this.$refs.input.focus()},onInput(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.$refs.input.select()}},validations(){return{value:{required:!this.required||N.required,minLength:!this.minlength||N.minLength(this.minlength),maxLength:!this.maxlength||N.maxLength(this.maxlength),email:"email"!==this.type||N.email,url:"url"!==this.type||N.url,pattern:!this.pattern||(t=>!this.required&&!t||!this.$refs.input.validity.patternMismatch)}}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g(t._b({ref:"input",staticClass:"k-text-input",attrs:{dir:t.direction}},"input",{autocomplete:t.autocomplete,autofocus:t.autofocus,disabled:t.disabled,id:t.id,minlength:t.minlength,name:t.name,pattern:t.pattern,placeholder:t.placeholder,required:t.required,spellcheck:t.spellcheck,type:t.type,value:t.value},!1),t.listeners))}),[],!1,(function(t){for(let e in Bi)this[e]=Bi[e]}),null,null,null);ji.options.__file="src/components/Forms/Input/TextInput.vue";var Di=ji.exports;const Mi={mixins:[Fi],props:{autocomplete:{type:String,default:"email"},placeholder:{type:String,default:()=>new Et("email.placeholder")},type:{type:String,default:"email"}}};const Pi={};var Ri=Dt({extends:Di,mixins:[Mi]},undefined,undefined,!1,(function(t){for(let e in Pi)this[e]=Pi[e]}),null,null,null);Ri.options.__file="src/components/Forms/Input/EmailInput.vue";var Ni=Ri.exports;class qi extends Bs{get schema(){return{content:"bulletList|orderedList"}}}const zi={inheritAttrs:!1,props:{marks:{type:[Array,Boolean],default:!0},value:String},data(){return{list:this.value,html:this.value}},computed:{extensions:()=>[new qi({inline:!0})]},watch:{value(t){t!==this.html&&(this.list=t,this.html=t)}},methods:{focus(){this.$refs.input.focus()},onInput(t){let e=(new DOMParser).parseFromString(t,"text/html").querySelector("ul, ol");e&&0!==e.textContent.trim().length?(this.list=t,this.html=t.replace(/(<p>|<\/p>)/gi,""),this.$emit("input",this.html)):this.$emit("input",this.list="")}}},Ui={};var Hi=Dt(zi,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-writer",t._b({ref:"input",staticClass:"k-list-input",attrs:{extensions:t.extensions,nodes:["bulletList","orderedList"],value:t.list},on:{input:t.onInput}},"k-writer",t.$props,!1))}),[],!1,(function(t){for(let e in Ui)this[e]=Ui[e]}),null,null,null);Hi.options.__file="src/components/Forms/Input/ListInput.vue";var Vi=Hi.exports;const Ki={mixins:[Je,Ze,ss],props:{max:Number,min:Number,layout:String,options:{type:Array,default:()=>[]},search:[Object,Boolean],separator:{type:String,default:","},sort:Boolean,value:{type:Array,required:!0,default:()=>[]}}},Wi={};var Gi=Dt({mixins:[Ki],inheritAttrs:!1,data(){return{state:this.value,q:null,limit:!0,scrollTop:0}},computed:{draggable(){return this.state.length>1&&!this.sort},dragOptions(){return{disabled:!this.draggable,draggable:".k-tag",delay:1}},emptyLabel(){return this.q?this.$t("search.results.none"):this.$t("options.none")},filtered(){return this.q&&this.q.length>=(this.search.min||0)?this.options.filter((t=>this.isFiltered(t))).map((t=>o(o({},t),{display:this.toHighlightedString(t.text),info:this.toHighlightedString(t.value)}))):this.options.map((t=>o(o({},t),{display:t.text,info:t.value})))},more(){return!this.max||this.state.length<this.max},regex(){return new RegExp(`(${RegExp.escape(this.q)})`,"ig")},sorted(){if(!1===this.sort)return this.state;let t=this.state;const e=t=>this.options.findIndex((e=>e.value===t.value));return t.sort(((t,s)=>e(t)-e(s)))},visible(){return this.limit?this.filtered.slice(0,this.search.display||this.filtered.length):this.filtered}},watch:{value(t){this.state=t,this.onInvalid()}},mounted(){this.onInvalid(),this.$events.$on("click",this.close),this.$events.$on("keydown.cmd.s",this.close)},destroyed(){this.$events.$off("click",this.close),this.$events.$off("keydown.cmd.s",this.close)},methods:{add(t){!0===this.more&&(this.state.push(t),this.onInput())},blur(){this.close()},close(){!0===this.$refs.dropdown.isOpen&&(this.$refs.dropdown.close(),this.limit=!0)},escape(){this.q?this.q=null:this.close()},focus(){this.$refs.dropdown.open()},index(t){return this.state.findIndex((e=>e.value===t.value))},isFiltered(t){return String(t.text).match(this.regex)||String(t.value).match(this.regex)},isSelected(t){return-1!==this.index(t)},navigate(t){let e=document.activeElement;switch(t){case"prev":e&&e.previousSibling&&e.previousSibling.focus&&e.previousSibling.focus();break;case"next":e&&e.nextSibling&&e.nextSibling.focus&&e.nextSibling.focus()}},onClose(){!1===this.$refs.dropdown.isOpen&&(document.activeElement===this.$parent.$el&&(this.q=null),this.$parent.$el.focus())},onInput(){this.$emit("input",this.sorted)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onOpen(){this.$nextTick((()=>{this.$refs.search&&this.$refs.search.focus&&this.$refs.search.focus(),this.$refs.dropdown.$el.querySelector(".k-multiselect-options").scrollTop=this.scrollTop}))},remove(t){this.state.splice(this.index(t),1),this.onInput()},select(t){this.scrollTop=this.$refs.dropdown.$el.querySelector(".k-multiselect-options").scrollTop,t={text:t.text,value:t.value},this.isSelected(t)?this.remove(t):this.add(t)},toHighlightedString(t){return(t=this.$helper.string.stripHTML(t)).replace(this.regex,"<b>$1</b>")}},validations(){return{state:{required:!this.required||N.required,minLength:!this.min||N.minLength(this.min),maxLength:!this.max||N.maxLength(this.max)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-draggable",{staticClass:"k-multiselect-input",attrs:{list:t.state,options:t.dragOptions,"data-layout":t.layout,element:"k-dropdown"},on:{end:t.onInput},nativeOn:{click:function(e){return t.$refs.dropdown.toggle(e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[s("k-dropdown-content",{ref:"dropdown",on:{open:t.onOpen,close:t.onClose},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.close(e))}}},[t.search?s("k-dropdown-item",{staticClass:"k-multiselect-search",attrs:{icon:"search"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"search",attrs:{placeholder:t.search.min?t.$t("search.min",{min:t.search.min}):t.$t("search")+" …"},domProps:{value:t.q},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.escape(e))},input:function(e){e.target.composing||(t.q=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"k-multiselect-options"},[t._l(t.visible,(function(e){return s("k-dropdown-item",{key:e.value,class:{"k-multiselect-option":!0,selected:t.isSelected(e),disabled:!t.more},attrs:{icon:t.isSelected(e)?"check":"circle-outline"},on:{click:function(s){return s.preventDefault(),t.select(e)}},nativeOn:{keydown:[function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),s.stopPropagation(),t.select(e))},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"space",32,s.key,[" ","Spacebar"])?null:(s.preventDefault(),s.stopPropagation(),t.select(e))}]}},[s("span",{domProps:{innerHTML:t._s(e.display)}}),t._v(" "),s("span",{staticClass:"k-multiselect-value",domProps:{innerHTML:t._s(e.info)}})])})),t._v(" "),0===t.filtered.length?s("k-dropdown-item",{staticClass:"k-multiselect-option",attrs:{disabled:!0}},[t._v("\n          "+t._s(t.emptyLabel)+"\n        ")]):t._e()],2),t._v(" "),t.visible.length<t.filtered.length?s("k-button",{staticClass:"k-multiselect-more",on:{click:function(e){e.stopPropagation(),t.limit=!1}}},[t._v("\n        "+t._s(t.$t("search.all"))+" ("+t._s(t.filtered.length)+")\n      ")]):t._e()],1)]},proxy:!0}])},t._l(t.sorted,(function(e){return s("k-tag",{key:e.value,ref:e.value,refInFor:!0,attrs:{removable:!0},on:{remove:function(s){return t.remove(e)}},nativeOn:{click:function(t){t.stopPropagation()},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.navigate("prev")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.navigate("next")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.$refs.dropdown.open(e)}]}},[t._v("\n    "+t._s(e.text)+"\n  ")])})),1)}),[],!1,(function(t){for(let e in Wi)this[e]=Wi[e]}),null,null,null);Gi.options.__file="src/components/Forms/Input/MultiselectInput.vue";var Yi=Gi.exports;const Ji={mixins:[Ge,Je,Ze,ss],props:{max:Number,min:Number,name:[Number,String],placeholder:String,preselect:Boolean,step:Number,value:{type:[Number,String],default:null}}},Xi={};var Zi=Dt({mixins:[Ji],inheritAttrs:!1,data(){return{number:this.format(this.value),stepNumber:this.format(this.step),timeout:null,listeners:o(o({},this.$listeners),{input:t=>this.onInput(t.target.value),blur:this.onBlur})}},watch:{value(t){this.number=t},number:{immediate:!0,handler(){this.onInvalid()}}},mounted(){this.$props.autofocus&&this.focus(),this.$props.preselect&&this.select()},methods:{decimals(){const t=Number(this.step||0);return Math.floor(t)===t?0:-1!==t.toString().indexOf("e")?parseInt(t.toFixed(16).split(".")[1].split("").reverse().join("")).toString().length:t.toString().split(".")[1].length||0},format(t){if(isNaN(t)||""===t)return"";const e=this.decimals();return t=e?parseFloat(t).toFixed(e):Number.isInteger(this.step)?parseInt(t):parseFloat(t)},clean(){this.number=this.format(this.number)},emit(t){t=parseFloat(t),isNaN(t)&&(t=""),t!==this.value&&this.$emit("input",t)},focus(){this.$refs.input.focus()},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onInput(t){this.number=t,this.emit(t)},onBlur(){this.clean(),this.emit(this.number)},select(){this.$refs.input.select()}},validations(){return{value:{required:!this.required||N.required,min:!this.min||N.minValue(this.min),max:!this.max||N.maxValue(this.max)}}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g(t._b({ref:"input",staticClass:"k-number-input",attrs:{step:t.stepNumber,type:"number"},domProps:{value:t.number},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:e.ctrlKey?t.clean(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:e.metaKey?t.clean(e):null}]}},"input",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,max:t.max,min:t.min,name:t.name,placeholder:t.placeholder,required:t.required},!1),t.listeners))}),[],!1,(function(t){for(let e in Xi)this[e]=Xi[e]}),null,null,null);Zi.options.__file="src/components/Forms/Input/NumberInput.vue";var Qi=Zi.exports;const tn={mixins:[Fi],props:{autocomplete:{type:String,default:"new-password"},type:{type:String,default:"password"}}};const en={};var sn=Dt({extends:Di,mixins:[tn]},undefined,undefined,!1,(function(t){for(let e in en)this[e]=en[e]}),null,null,null);sn.options.__file="src/components/Forms/Input/PasswordInput.vue";var nn=sn.exports;const on={mixins:[Ge,Je,Ze,ss],props:{columns:Number,options:Array,value:[String,Number,Boolean]}},rn={};var an=Dt({mixins:[on],inheritAttrs:!1,watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$el.querySelector("input").focus()},onInput(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.focus()}},validations(){return{value:{required:!this.required||N.required}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"k-radio-input",style:"--columns:"+t.columns},t._l(t.options,(function(e,i){return s("li",{key:i},[s("input",{staticClass:"k-radio-input-native",attrs:{id:t.id+"-"+i,name:t.id,type:"radio"},domProps:{value:e.value,checked:t.value===e.value},on:{change:function(s){return t.onInput(e.value)}}}),t._v(" "),s("label",{attrs:{for:t.id+"-"+i}},[e.info?[s("span",{staticClass:"k-radio-input-text"},[t._v(t._s(e.text))]),t._v(" "),s("span",{staticClass:"k-radio-input-info"},[t._v(t._s(e.info))])]:[t._v("\n        "+t._s(e.text)+"\n      ")]],2),t._v(" "),e.icon?s("k-icon",{attrs:{type:e.icon}}):t._e()],1)})),0)}),[],!1,(function(t){for(let e in rn)this[e]=rn[e]}),null,null,null);an.options.__file="src/components/Forms/Input/RadioInput.vue";var ln=an.exports;const cn={mixins:[Ge,Je,Ze,es,ss],props:{default:[Number,String],max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:1},tooltip:{type:[Boolean,Object],default:()=>({before:null,after:null})},value:[Number,String]}},un={};var dn=Dt({mixins:[cn],inheritAttrs:!1,data(){return{listeners:o(o({},this.$listeners),{input:t=>this.onInput(t.target.value)})}},computed:{baseline(){return this.min<0?0:this.min},label(){return this.required||this.value||0===this.value?this.format(this.position):"–"},position(){return this.value||0===this.value?this.value:this.default||this.baseline}},watch:{position(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},format(t){const e=document.lang?document.lang.replace("_","-"):"en",s=this.step.toString().split("."),i=s.length>1?s[1].length:0;return new Intl.NumberFormat(e,{minimumFractionDigits:i}).format(t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onInput(t){this.$emit("input",t)}},validations(){return{position:{required:!this.required||N.required,min:!this.min||N.minValue(this.min),max:!this.max||N.maxValue(this.max)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-range-input"},[s("input",t._g(t._b({ref:"input",staticClass:"k-range-input-native",style:"--min: "+t.min+"; --max: "+t.max+"; --value: "+t.position,attrs:{type:"range"},domProps:{value:t.position}},"input",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,max:t.max,min:t.min,name:t.name,required:t.required,step:t.step},!1),t.listeners)),t._v(" "),t.tooltip?s("span",{staticClass:"k-range-input-tooltip"},[t.tooltip.before?s("span",{staticClass:"k-range-input-tooltip-before"},[t._v(t._s(t.tooltip.before))]):t._e(),t._v(" "),s("span",{staticClass:"k-range-input-tooltip-text"},[t._v(t._s(t.label))]),t._v(" "),t.tooltip.after?s("span",{staticClass:"k-range-input-tooltip-after"},[t._v(t._s(t.tooltip.after))]):t._e()]):t._e()])}),[],!1,(function(t){for(let e in un)this[e]=un[e]}),null,null,null);dn.options.__file="src/components/Forms/Input/RangeInput.vue";var pn=dn.exports;const hn={mixins:[Ge,Je,Ze,es,ss],props:{ariaLabel:String,default:String,empty:{type:[Boolean,String],default:!0},placeholder:String,options:{type:Array,default:()=>[]},value:{type:[String,Number,Boolean],default:""}}},mn={};var fn=Dt({mixins:[hn],inheritAttrs:!1,data(){return{selected:this.value,listeners:o(o({},this.$listeners),{click:t=>this.onClick(t),change:t=>this.onInput(t.target.value),input:()=>{}})}},computed:{emptyOption(){return this.placeholder||"—"},hasEmptyOption(){return!1!==this.empty&&!(this.required&&this.default)},label(){const t=this.text(this.selected);return""===this.selected||null===this.selected||null===t?this.emptyOption:t}},watch:{value(t){this.selected=t,this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},onClick(t){t.stopPropagation(),this.$emit("click",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onInput(t){this.selected=t,this.$emit("input",this.selected)},select(){this.focus()},text(t){let e=null;return this.options.forEach((s=>{s.value==t&&(e=s.text)})),e}},validations(){return{selected:{required:!this.required||N.required}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-select-input",attrs:{"data-disabled":t.disabled,"data-empty":""===t.selected}},[s("select",t._g({ref:"input",staticClass:"k-select-input-native",attrs:{id:t.id,autofocus:t.autofocus,"aria-label":t.ariaLabel,disabled:t.disabled,name:t.name,required:t.required},domProps:{value:t.selected}},t.listeners),[t.hasEmptyOption?s("option",{attrs:{disabled:t.required,value:""}},[t._v("\n      "+t._s(t.emptyOption)+"\n    ")]):t._e(),t._v(" "),t._l(t.options,(function(e){return s("option",{key:e.value,attrs:{disabled:e.disabled},domProps:{value:e.value}},[t._v("\n      "+t._s(e.text)+"\n    ")])}))],2),t._v("\n  "+t._s(t.label)+"\n")])}),[],!1,(function(t){for(let e in mn)this[e]=mn[e]}),null,null,null);fn.options.__file="src/components/Forms/Input/SelectInput.vue";var gn=fn.exports;const vn={mixins:[Fi],props:{allow:{type:String,default:""},formData:{type:Object,default:()=>({})},sync:{type:String}}},kn={};var bn=Dt({extends:Di,mixins:[vn],data(){return{slug:this.sluggify(this.value),slugs:this.$languages.current?this.$languages.current.rules:this.$system.slugs,syncValue:null}},watch:{formData:{handler(t){return!this.disabled&&(!(!this.sync||void 0===t[this.sync])&&(t[this.sync]!=this.syncValue&&(this.syncValue=t[this.sync],void this.onInput(this.sluggify(this.syncValue)))))},deep:!0,immediate:!0},value(t){(t=this.sluggify(t))!==this.slug&&(this.slug=t,this.$emit("input",this.slug))}},methods:{sluggify(t){return this.$helper.slug(t.trim(),[this.slugs,this.$system.ascii],this.allow)},onInput(t){this.slug=this.sluggify(t),this.$emit("input",this.slug)}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._g(t._b({ref:"input",staticClass:"k-text-input",attrs:{dir:t.direction,autocomplete:"off",spellcheck:"false",type:"text"},domProps:{value:t.slug}},"input",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,minlength:t.minlength,name:t.name,pattern:t.pattern,placeholder:t.placeholder,required:t.required},!1),t.listeners))}),[],!1,(function(t){for(let e in kn)this[e]=kn[e]}),null,null,null);bn.options.__file="src/components/Forms/Input/SlugInput.vue";var _n=bn.exports;const yn={mixins:[Ge,Je,Ze,es,ss],props:{accept:{type:String,default:"all"},icon:{type:[String,Boolean],default:"tag"},layout:String,max:Number,min:Number,options:{type:Array,default:()=>[]},separator:{type:String,default:","},value:{type:Array,default:()=>[]}}},$n={};var wn=Dt({mixins:[yn],inheritAttrs:!1,data(){return{tags:this.prepareTags(this.value),selected:null,newTag:null,tagOptions:this.options.map((t=>(this.icon&&this.icon.length>0&&(t.icon=this.icon),t)),this)}},computed:{direction(){return Ai(this)},dragOptions(){return{delay:1,disabled:!this.draggable,draggable:".k-tag"}},draggable(){return this.tags.length>1},skip(){return this.tags.map((t=>t.value))}},watch:{value(t){this.tags=this.prepareTags(t),this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{addString(t){if(t)if((t=t.trim()).includes(this.separator))t.split(this.separator).forEach((t=>{this.addString(t)}));else if(0!==t.length)if("options"===this.accept){const e=this.options.filter((e=>e.text===t))[0];if(!e)return;this.addTag(e)}else this.addTag({text:t,value:t})},addTag(t){this.addTagToIndex(t),this.$refs.autocomplete.close(),this.$refs.input.focus()},addTagToIndex(t){if("options"===this.accept){if(!this.options.filter((e=>e.value===t.value))[0])return}-1===this.index(t)&&(!this.max||this.tags.length<this.max)&&(this.tags.push(t),this.onInput()),this.newTag=null},blurInput(t){let e=t.relatedTarget||t.explicitOriginalTarget;this.$refs.autocomplete.$el&&this.$refs.autocomplete.$el.contains(e)||this.$refs.input.value.length&&(this.addTagToIndex(this.$refs.input.value),this.$refs.autocomplete.close())},edit(t){this.newTag=t.text,this.$refs.input.select(),this.remove(t)},enter(t){if(!this.newTag||0===this.newTag.length)return!0;t.preventDefault(),this.addString(this.newTag)},focus(){this.$refs.input.focus()},get(t){let e=null,s=null;switch(t){case"prev":if(!this.selected)return;if(s=this.index(this.selected),e=s-1,e<0)return;break;case"next":if(!this.selected)return;if(s=this.index(this.selected),e=s+1,e>=this.tags.length)return;break;case"first":e=0;break;case"last":e=this.tags.length-1;break;default:e=t}let i=this.tags[e];if(i){let t=this.$refs[i.value];if(t&&t[0])return{ref:t[0],tag:i,index:e}}return!1},index(t){return this.tags.findIndex((e=>e.value===t.value))},onInput(){this.$emit("input",this.tags)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},leaveInput(t){0===t.target.selectionStart&&t.target.selectionStart===t.target.selectionEnd&&0!==this.tags.length&&(this.$refs.autocomplete.close(),this.navigate("last"),t.preventDefault())},navigate(t){var e=this.get(t);e?(e.ref.focus(),this.selectTag(e.tag)):"next"===t&&(this.$refs.input.focus(),this.selectTag(null))},prepareTags:t=>!1===Array.isArray(t)?[]:t.map((t=>"string"==typeof t?{text:t,value:t}:t)),remove(t){const e=this.get("prev"),s=this.get("next");this.tags.splice(this.index(t),1),this.onInput(),e?(this.selectTag(e.tag),e.ref.focus()):s?this.selectTag(s.tag):(this.selectTag(null),this.$refs.input.focus())},select(){this.focus()},selectTag(t){this.selected=t},tab(t){this.newTag&&this.newTag.length>0&&(t.preventDefault(),this.addString(this.newTag))},type(t){this.newTag=t,this.$refs.autocomplete.search(t)}},validations(){return{tags:{required:!this.required||N.required,minLength:!this.min||N.minLength(this.min),maxLength:!this.max||N.maxLength(this.max)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-draggable",{ref:"box",staticClass:"k-tags-input",attrs:{list:t.tags,"data-layout":t.layout,options:t.dragOptions,dir:t.direction},on:{end:t.onInput},scopedSlots:t._u([{key:"footer",fn:function(){return[s("span",{staticClass:"k-tags-input-element"},[s("k-autocomplete",{ref:"autocomplete",attrs:{options:t.options,skip:t.skip},on:{select:t.addTag,leave:function(e){return t.$refs.input.focus()}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newTag,expression:"newTag",modifiers:{trim:!0}}],ref:"input",attrs:{id:t.id,autofocus:t.autofocus,disabled:t.disabled||t.max&&t.tags.length>=t.max,name:t.name,autocomplete:"off",type:"text"},domProps:{value:t.newTag},on:{input:[function(e){e.target.composing||(t.newTag=e.target.value.trim())},function(e){return t.type(e.target.value)}],blur:[t.blurInput,function(e){return t.$forceUpdate()}],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:e.metaKey?t.blurInput(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.leaveInput(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.enter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.tab(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"backspace",void 0,e.key,void 0)||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.leaveInput(e)}]}})])],1)]},proxy:!0}])},t._l(t.tags,(function(e,i){return s("k-tag",{key:i,ref:e.value,refInFor:!0,attrs:{removable:!t.disabled,name:"tag"},on:{remove:function(s){return t.remove(e)}},nativeOn:{click:function(t){t.stopPropagation()},blur:function(e){return t.selectTag(null)},focus:function(s){return t.selectTag(e)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.navigate("prev")},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.navigate("next")}],dblclick:function(s){return t.edit(e)}}},[t._v("\n    "+t._s(e.text)+"\n  ")])})),1)}),[],!1,(function(t){for(let e in $n)this[e]=$n[e]}),null,null,null);wn.options.__file="src/components/Forms/Input/TagsInput.vue";var xn=wn.exports;const Sn={mixins:[Fi],props:{autocomplete:{type:String,default:"tel"},type:{type:String,default:"tel"}}};const Cn={};var En=Dt({extends:Di,mixins:[Sn]},undefined,undefined,!1,(function(t){for(let e in Cn)this[e]=Cn[e]}),null,null,null);En.options.__file="src/components/Forms/Input/TelInput.vue";var On=En.exports;const Tn={mixins:[Ge,Je,Ze,es,ss],props:{buttons:{type:[Boolean,Array],default:!0},endpoints:Object,font:String,maxlength:Number,minlength:Number,placeholder:String,preselect:Boolean,size:String,spellcheck:{type:[Boolean,String],default:"off"},theme:String,uploads:[Boolean,Object,Array],value:String}},In={};var Ln=Dt({mixins:[Tn],inheritAttrs:!1,data:()=>({over:!1}),computed:{direction(){return Ai(this)}},watch:{value(){this.onInvalid(),this.$nextTick((()=>{this.resize()}))}},mounted(){this.$nextTick((()=>{this.$library.autosize(this.$refs.input)})),this.onInvalid(),this.$props.autofocus&&this.focus(),this.$props.preselect&&this.select()},methods:{cancel(){this.$refs.input.focus()},dialog(t){if(!this.$refs[t+"Dialog"])throw"Invalid toolbar dialog";this.$refs[t+"Dialog"].open(this.$refs.input,this.selection())},focus(){this.$refs.input.focus()},insert(t){const e=this.$refs.input,s=e.value;setTimeout((()=>{if(e.focus(),document.execCommand("insertText",!1,t),e.value===s){const s=e.value.slice(0,e.selectionStart)+t+e.value.slice(e.selectionEnd);e.value=s,this.$emit("input",s)}})),this.resize()},insertFile(t){t&&t.length>0&&this.insert(t.map((t=>t.dragText)).join("\n\n"))},insertUpload(t,e){this.insert(e.map((t=>t.dragText)).join("\n\n")),this.$events.$emit("model.update")},onClick(){this.$refs.toolbar&&this.$refs.toolbar.close()},onCommand(t,e){"function"==typeof this[t]?"function"==typeof e?this[t](e(this.$refs.input,this.selection())):this[t](e):window.console.warn(t+" is not a valid command")},onDrop(t){if(this.uploads&&this.$helper.isUploadEvent(t))return this.$refs.fileUpload.drop(t.dataTransfer.files,{url:this.$urls.api+"/"+this.endpoints.field+"/upload",multiple:!1});const e=this.$store.state.drag;e&&"text"===e.type&&(this.focus(),this.insert(e.data))},onFocus(t){this.$emit("focus",t)},onInput(t){this.$emit("input",t.target.value)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},onOut(){this.$refs.input.blur(),this.over=!1},onOver(t){if(this.uploads&&this.$helper.isUploadEvent(t))return t.dataTransfer.dropEffect="copy",this.focus(),void(this.over=!0);const e=this.$store.state.drag;e&&"text"===e.type&&(t.dataTransfer.dropEffect="copy",this.focus(),this.over=!0)},onShortcut(t){!1!==this.buttons&&"Meta"!==t.key&&"Control"!==t.key&&this.$refs.toolbar&&this.$refs.toolbar.shortcut(t.key,t)},onSubmit(t){return this.$emit("submit",t)},prepend(t){this.insert(t+" "+this.selection())},resize(){this.$library.autosize.update(this.$refs.input)},select(){this.$refs.select()},selectFile(){this.$refs.fileDialog.open({endpoint:this.endpoints.field+"/files",multiple:!1})},selection(){const t=this.$refs.input,e=t.selectionStart,s=t.selectionEnd;return t.value.substring(e,s)},uploadFile(){this.$refs.fileUpload.open({url:this.$urls.api+"/"+this.endpoints.field+"/upload",multiple:!1})},wrap(t){this.insert(t+this.selection()+t)}},validations(){return{value:{required:!this.required||N.required,minLength:!this.minlength||N.minLength(this.minlength),maxLength:!this.maxlength||N.maxLength(this.maxlength)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-textarea-input",attrs:{"data-theme":t.theme,"data-over":t.over}},[s("div",{staticClass:"k-textarea-input-wrapper"},[t.buttons&&!t.disabled?s("k-toolbar",{ref:"toolbar",attrs:{buttons:t.buttons,disabled:t.disabled,uploads:t.uploads},on:{command:t.onCommand},nativeOn:{mousedown:function(t){t.preventDefault()}}}):t._e(),t._v(" "),s("textarea",t._b({ref:"input",staticClass:"k-textarea-input-native",attrs:{"data-font":t.font,"data-size":t.size,dir:t.direction},on:{click:t.onClick,focus:t.onFocus,input:t.onInput,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?t.onSubmit(e):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.onSubmit(e):null},function(e){return e.metaKey?t.onShortcut(e):null},function(e){return e.ctrlKey?t.onShortcut(e):null}],dragover:t.onOver,dragleave:t.onOut,drop:t.onDrop}},"textarea",{autofocus:t.autofocus,disabled:t.disabled,id:t.id,minlength:t.minlength,name:t.name,placeholder:t.placeholder,required:t.required,spellcheck:t.spellcheck,value:t.value},!1))],1),t._v(" "),s("k-toolbar-email-dialog",{ref:"emailDialog",on:{cancel:t.cancel,submit:function(e){return t.insert(e)}}}),t._v(" "),s("k-toolbar-link-dialog",{ref:"linkDialog",on:{cancel:t.cancel,submit:function(e){return t.insert(e)}}}),t._v(" "),s("k-files-dialog",{ref:"fileDialog",on:{cancel:t.cancel,submit:function(e){return t.insertFile(e)}}}),t._v(" "),t.uploads?s("k-upload",{ref:"fileUpload",on:{success:t.insertUpload}}):t._e()],1)}),[],!1,(function(t){for(let e in In)this[e]=In[e]}),null,null,null);Ln.options.__file="src/components/Forms/Input/TextareaInput.vue";var An=Ln.exports;const Fn={props:{display:{type:String,default:"HH:mm"},max:String,min:String,step:{type:Object,default:()=>({size:5,unit:"minute"})},type:{type:String,default:"time"}}};const Bn={};var jn=Dt({extends:Ei,mixins:[Fn],computed:{is12HourFormat(){return this.display.toLowerCase().includes("a")},map(){return{second:["s","ss"],minute:["m","mm"],hour:this.is12HourFormat?["h","hh"]:["H","HH"]}},patterns(){let t=Ei.computed.patterns.apply(this);return this.is12HourFormat&&(t=t.map((t=>t+"a")).concat(t)),t}},methods:{emit(t){const e=this.toFormat(this.parsed,"HH:mm:ss")||"";this.$emit(t,e)},toDatetime(t){return this.$library.dayjs.utc(t,"HH:mm:ss")}}},undefined,undefined,!1,(function(t){for(let e in Bn)this[e]=Bn[e]}),null,null,null);jn.options.__file="src/components/Forms/Input/TimeInput.vue";var Dn=jn.exports;const Mn={props:{autofocus:Boolean,disabled:Boolean,id:[Number,String],text:{type:[Array,String]},required:Boolean,value:Boolean}},Pn={};var Rn=Dt({mixins:[Mn],inheritAttrs:!1,computed:{label(){const t=this.text||[this.$t("off"),this.$t("on")];return Array.isArray(t)?this.value?t[1]:t[0]:t}},watch:{value(){this.onInvalid()}},mounted(){this.onInvalid(),this.$props.autofocus&&this.focus()},methods:{focus(){this.$refs.input.focus()},onEnter(t){"Enter"===t.key&&this.$refs.input.click()},onInput(t){this.$emit("input",t)},onInvalid(){this.$emit("invalid",this.$v.$invalid,this.$v)},select(){this.$refs.input.focus()}},validations(){return{value:{required:!this.required||N.required}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"k-toggle-input",attrs:{"data-disabled":t.disabled}},[s("input",{ref:"input",staticClass:"k-toggle-input-native",attrs:{id:t.id,disabled:t.disabled,type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.onInput(e.target.checked)}}}),t._v(" "),s("span",{staticClass:"k-toggle-input-label",domProps:{innerHTML:t._s(t.label)}})])}),[],!1,(function(t){for(let e in Pn)this[e]=Pn[e]}),null,null,null);Rn.options.__file="src/components/Forms/Input/ToggleInput.vue";var Nn=Rn.exports;const qn={mixins:[Fi],props:{autocomplete:{type:String,default:"url"},type:{type:String,default:"url"}}};const zn={};var Un=Dt({extends:Di,mixins:[qn]},undefined,undefined,!1,(function(t){for(let e in zn)this[e]=zn[e]}),null,null,null);Un.options.__file="src/components/Forms/Input/UrlInput.vue";var Hn=Un.exports;const Vn={};var Kn=Dt({mixins:[is],inheritAttrs:!1,props:{empty:String,fieldsets:Object,fieldsetGroups:Object,group:String,max:{type:Number,default:null},value:{type:Array,default:()=>[]}},data:()=>({opened:[]}),computed:{hasFieldsets(){return Object.keys(this.fieldsets).length},isEmpty(){return 0===this.value.length},isFull(){return null!==this.max&&this.value.length>=this.max}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-blocks-field",scopedSlots:t._u([{key:"options",fn:function(){return[t.hasFieldsets?s("k-dropdown",[s("k-button",{attrs:{icon:"dots"},on:{click:function(e){return t.$refs.options.toggle()}}}),t._v(" "),s("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{disabled:t.isFull,icon:"add"},on:{click:function(e){return t.$refs.blocks.choose(t.value.length)}}},[t._v("\n          "+t._s(t.$t("add"))+"\n        ")]),t._v(" "),s("k-dropdown-item",{attrs:{disabled:t.isEmpty,icon:"trash"},on:{click:function(e){return t.$refs.blocks.confirmToRemoveAll()}}},[t._v("\n          "+t._s(t.$t("delete.all"))+"\n        ")])],1)],1):t._e()]},proxy:!0}])},"k-field",t.$props,!1),[t._v(" "),s("k-blocks",t._g({ref:"blocks",attrs:{compact:!1,empty:t.empty,endpoints:t.endpoints,fieldsets:t.fieldsets,"fieldset-groups":t.fieldsetGroups,group:t.group,max:t.max,value:t.value},on:{close:function(e){t.opened=e},open:function(e){t.opened=e}}},t.$listeners))],1)}),[],!1,(function(t){for(let e in Vn)this[e]=Vn[e]}),null,null,null);Kn.options.__file="src/components/Forms/Field/BlocksField.vue";var Wn=Kn.exports,Gn={props:{counter:{type:Boolean,default:!0}},computed:{counterOptions(){if(null===this.value||this.disabled||!1===this.counter)return!1;let t=0;return this.value&&(t=Array.isArray(this.value)?this.value.length:String(this.value).length),{count:t,min:this.min,max:this.max}}}};const Yn={};var Jn=Dt({mixins:[is,ds,_i,Gn],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-checkboxes-field",attrs:{counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"checkboxes"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in Yn)this[e]=Yn[e]}),null,null,null);Jn.options.__file="src/components/Forms/Field/CheckboxesField.vue";var Xn=Jn.exports;const Zn={mixins:[is,ds,Oi],inheritAttrs:!1,props:{calendar:{type:Boolean,default:!0},icon:{type:String,default:"calendar"}},data(){return{datetime:this.value}},computed:{inputType(){return!1===this.time?"date":"datetime"},listeners(){return o(o({},this.$listeners),{enter:this.onSelect,focus:this.onFocus,input:this.onInput,update:this.onUpdate})}},watch:{value(t){this.datetime=t}},methods:{focus(){this.$refs.input.focus()},onUpdate(t){this.$emit("input",t)},onFocus(){this.$refs.calendar&&this.$refs.calendar.open()},onInput(t){this.datetime=t},onSelect(t){this.onUpdate(t),this.$refs.calendar&&this.$refs.calendar.close()}}},Qn={};var to=Dt(Zn,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-date-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,type:t.inputType,value:t.value,theme:"field"},scopedSlots:t._u([t.calendar?{key:"icon",fn:function(){return[s("k-dropdown",[s("k-button",{staticClass:"k-input-icon-button",attrs:{icon:t.icon,tooltip:t.$t("date.select"),tabindex:"-1"},on:{click:t.onFocus}}),t._v(" "),s("k-dropdown-content",{ref:"calendar",attrs:{align:"right"}},[s("k-calendar",{attrs:{value:t.datetime,min:t.min,max:t.max},on:{input:t.onSelect}})],1)],1)]},proxy:!0}:null],null,!0)},"k-input",t.$props,!1),t.listeners))],1)}),[],!1,(function(t){for(let e in Qn)this[e]=Qn[e]}),null,null,null);to.options.__file="src/components/Forms/Field/DateField.vue";var eo=to.exports;const so={mixins:[is,ds,Mi],inheritAttrs:!1,props:{link:{type:Boolean,default:!0},icon:{type:String,default:"email"}},computed:{mailto(){return this.value&&this.value.length>0?"mailto:"+this.value:null}},methods:{focus(){this.$refs.input.focus()}}},io={};var no=Dt(so,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-email-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"email"},scopedSlots:t._u([{key:"icon",fn:function(){return[t.link?s("k-button",{staticClass:"k-input-icon-button",attrs:{icon:t.icon,link:t.mailto,tooltip:t.$t("open"),tabindex:"-1",target:"_blank"}}):t._e()]},proxy:!0}])},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in io)this[e]=io[e]}),null,null,null);no.options.__file="src/components/Forms/Field/EmailField.vue";var oo=no.exports,ro={mixins:[is],inheritAttrs:!1,props:{empty:String,info:String,link:Boolean,layout:{type:String,default:"list"},max:Number,multiple:Boolean,parent:String,search:Boolean,size:String,text:String,value:{type:Array,default:()=>[]}},data(){return{selected:this.value}},computed:{btnIcon(){return!this.multiple&&this.selected.length>0?"refresh":"add"},btnLabel(){return!this.multiple&&this.selected.length>0?this.$t("change"):this.$t("add")},isInvalid(){return!(!this.required||0!==this.selected.length)||(!!(this.min&&this.selected.length<this.min)||!!(this.max&&this.selected.length>this.max))},items(){return this.models.map(this.item)},more(){return!this.max||this.max>this.selected.length}},watch:{value(t){this.selected=t}},methods:{focus(){},item(t){return t.link=this.link?t.link:null,t},onInput(){this.$emit("input",this.selected)},open(){if(this.disabled)return!1;this.$refs.selector.open({endpoint:this.endpoints.field,max:this.max,multiple:this.multiple,search:this.search,selected:this.selected.map((t=>t.id))})},remove(t){this.selected.splice(t,1),this.onInput()},removeById(t){this.selected=this.selected.filter((e=>e.id!==t)),this.onInput()},select(t){0!==t.length?(this.selected=this.selected.filter((e=>t.filter((t=>t.id===e.id)).length>0)),t.forEach((t=>{0===this.selected.filter((e=>t.id===e.id)).length&&this.selected.push(t)})),this.onInput()):this.selected=[]}}};const ao={mixins:[ro],props:{uploads:[Boolean,Object,Array]},computed:{options(){return this.uploads?{icon:this.btnIcon,text:this.btnLabel,options:[{icon:"check",text:this.$t("select"),click:"open"},{icon:"upload",text:this.$t("upload"),click:"upload"}]}:{options:[{icon:"check",text:this.$t("select"),click:"open"}]}}},created(){this.$events.$on("file.delete",this.removeById)},destroyed(){this.$events.$off("file.delete",this.removeById)},methods:{prompt(t){if(t.stopPropagation(),this.disabled)return!1;this.more&&this.uploads?this.$refs.options.toggle():this.open()},onAction(t){switch(t){case"open":return this.open();case"upload":return this.$refs.fileUpload.open({url:this.$urls.api+"/"+this.endpoints.field+"/upload",multiple:this.multiple,accept:this.uploads.accept})}},upload(t,e){!1===this.multiple&&(this.selected=[]),e.forEach((t=>{this.selected.push(t)})),this.onInput(),this.$events.$emit("model.update")}}},lo={};var co=Dt(ao,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-files-field",scopedSlots:t._u([t.more&&!t.disabled?{key:"options",fn:function(){return[s("k-button-group",{staticClass:"k-field-options"},[s("k-options-dropdown",t._b({ref:"options",on:{action:t.onAction}},"k-options-dropdown",t.options,!1))],1)]},proxy:!0}:null],null,!0)},"k-field",t.$props,!1),[t._v(" "),t.selected.length?[s("k-items",{attrs:{items:t.selected,layout:t.layout,size:t.size,sortable:!t.disabled&&t.selected.length>1},on:{sort:t.onInput,sortChange:function(e){return t.$emit("change",e)}},scopedSlots:t._u([{key:"options",fn:function(e){var i=e.index;return[t.disabled?t._e():s("k-button",{attrs:{tooltip:t.$t("remove"),icon:"remove"},on:{click:function(e){return t.remove(i)}}})]}}],null,!1,1805525116)})]:s("k-empty",{attrs:{layout:t.layout,"data-invalid":t.isInvalid,icon:"image"},on:{click:t.prompt}},[t._v("\n    "+t._s(t.empty||t.$t("field.files.empty"))+"\n  ")]),t._v(" "),s("k-files-dialog",{ref:"selector",on:{submit:t.select}}),t._v(" "),s("k-upload",{ref:"fileUpload",on:{success:t.upload}})],2)}),[],!1,(function(t){for(let e in lo)this[e]=lo[e]}),null,null,null);co.options.__file="src/components/Forms/Field/FilesField.vue";var uo=co.exports;const po={};var ho=Dt({},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"k-field k-gap-field"})}),[],!1,(function(t){for(let e in po)this[e]=po[e]}),null,null,null);ho.options.__file="src/components/Forms/Field/GapField.vue";var mo=ho.exports;const fo={mixins:[Xe,ts],props:{numbered:Boolean}},go={};var vo=Dt(fo,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-headline-field"},[s("k-headline",{attrs:{"data-numbered":t.numbered,size:"large"}},[t._v("\n    "+t._s(t.label)+"\n  ")]),t._v(" "),t.help?s("footer",{staticClass:"k-field-footer"},[t.help?s("k-text",{staticClass:"k-field-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()],1):t._e()],1)}),[],!1,(function(t){for(let e in go)this[e]=go[e]}),null,null,null);vo.options.__file="src/components/Forms/Field/HeadlineField.vue";var ko=vo.exports;const bo={};var _o=Dt({mixins:[Xe,ts],props:{text:String,theme:{type:String,default:"info"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-field k-info-field"},[s("k-headline",[t._v(t._s(t.label))]),t._v(" "),s("k-box",{attrs:{theme:t.theme}},[s("k-text",{domProps:{innerHTML:t._s(t.text)}})],1),t._v(" "),t.help?s("footer",{staticClass:"k-field-footer"},[t.help?s("k-text",{staticClass:"k-field-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()],1):t._e()],1)}),[],!1,(function(t){for(let e in bo)this[e]=bo[e]}),null,null,null);_o.options.__file="src/components/Forms/Field/InfoField.vue";var yo=_o.exports;const $o={props:{blocks:Array,endpoints:Object,fieldsetGroups:Object,fieldsets:Object,id:String,isSelected:Boolean,width:String}},wo={};var xo=Dt($o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-column k-layout-column",attrs:{id:t.id,"data-width":t.width,tabindex:"0"},on:{dblclick:function(e){return t.$refs.blocks.choose(t.blocks.length)}}},[s("k-blocks",{ref:"blocks",attrs:{endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets,value:t.blocks,group:"layout"},on:{input:function(e){return t.$emit("input",e)}},nativeOn:{dblclick:function(t){t.stopPropagation()}}})],1)}),[],!1,(function(t){for(let e in wo)this[e]=wo[e]}),null,null,null);xo.options.__file="src/components/Layouter/Column.vue";const So={components:{"k-layout-column":xo.exports},props:{attrs:[Array,Object],columns:Array,disabled:Boolean,endpoints:Object,fieldsetGroups:Object,fieldsets:Object,id:String,isSelected:Boolean,settings:Object},computed:{tabs(){let t=this.settings.tabs;return Object.entries(t).forEach((([e,s])=>{Object.entries(s.fields).forEach((([s])=>{t[e].fields[s].endpoints={field:this.endpoints.field+"/fields/"+s,section:this.endpoints.section,model:this.endpoints.model}}))})),t}}},Co={};var Eo=Dt(So,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"k-layout",attrs:{"data-selected":t.isSelected,tabindex:"0"},on:{click:function(e){return t.$emit("select")}}},[s("k-grid",{staticClass:"k-layout-columns"},t._l(t.columns,(function(e,i){return s("k-layout-column",t._b({key:e.id,attrs:{endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets},on:{input:function(s){return t.$emit("updateColumn",{column:e,columnIndex:i,blocks:s})}}},"k-layout-column",e,!1))})),1),t._v(" "),t.disabled?t._e():s("nav",{staticClass:"k-layout-toolbar"},[t.settings?s("k-button",{staticClass:"k-layout-toolbar-button",attrs:{tooltip:t.$t("settings"),icon:"settings"},on:{click:function(e){return t.$refs.drawer.open()}}}):t._e(),t._v(" "),s("k-dropdown",[s("k-button",{staticClass:"k-layout-toolbar-button",attrs:{icon:"angle-down"},on:{click:function(e){return t.$refs.options.toggle()}}}),t._v(" "),s("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{icon:"angle-up"},on:{click:function(e){return t.$emit("prepend")}}},[t._v("\n          "+t._s(t.$t("insert.before"))+"\n        ")]),t._v(" "),s("k-dropdown-item",{attrs:{icon:"angle-down"},on:{click:function(e){return t.$emit("append")}}},[t._v("\n          "+t._s(t.$t("insert.after"))+"\n        ")]),t._v(" "),s("hr"),t._v(" "),t.settings?s("k-dropdown-item",{attrs:{icon:"settings"},on:{click:function(e){return t.$refs.drawer.open()}}},[t._v("\n          "+t._s(t.$t("settings"))+"\n        ")]):t._e(),t._v(" "),s("k-dropdown-item",{attrs:{icon:"copy"},on:{click:function(e){return t.$emit("duplicate")}}},[t._v("\n          "+t._s(t.$t("duplicate"))+"\n        ")]),t._v(" "),s("hr"),t._v(" "),s("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(e){return t.$refs.confirmRemoveDialog.open()}}},[t._v("\n          "+t._s(t.$t("field.layout.delete"))+"\n        ")])],1)],1),t._v(" "),s("k-sort-handle")],1),t._v(" "),t.settings?s("k-form-drawer",{ref:"drawer",staticClass:"k-layout-drawer",attrs:{tabs:t.tabs,title:t.$t("settings"),value:t.attrs,icon:"settings"},on:{input:function(e){return t.$emit("updateAttrs",e)}}}):t._e(),t._v(" "),s("k-remove-dialog",{ref:"confirmRemoveDialog",attrs:{text:t.$t("field.layout.delete.confirm")},on:{submit:function(e){return t.$emit("remove")}}})],1)}),[],!1,(function(t){for(let e in Co)this[e]=Co[e]}),null,null,null);Eo.options.__file="src/components/Layouter/Layout.vue";const Oo={components:{"k-layout":Eo.exports},props:{disabled:Boolean,empty:String,endpoints:Object,fieldsetGroups:Object,fieldsets:Object,layouts:Array,max:Number,settings:Object,value:Array},data(){return{currentLayout:null,nextIndex:null,rows:this.value,selected:null}},computed:{draggableOptions(){return{id:this._uid,handle:!0,list:this.rows}}},watch:{value(){this.rows=this.value}},methods:{async addLayout(t){let e=await this.$api.post(this.endpoints.field+"/layout",{columns:t});this.rows.splice(this.nextIndex,0,e),this.layouts.length>1&&this.$refs.selector.close(),this.save()},duplicateLayout(t,e){let s=o(o({},this.$helper.clone(e)),{id:this.$helper.uuid()});s.columns=s.columns.map((t=>(t.id=this.$helper.uuid(),t.blocks=t.blocks.map((t=>(t.id=this.$helper.uuid(),t))),t))),this.rows.splice(t+1,0,s),this.save()},removeLayout(t){const e=this.rows.findIndex((e=>e.id===t.id));-1!==e&&this.$delete(this.rows,e),this.save()},save(){this.$emit("input",this.rows)},selectLayout(t){this.nextIndex=t,1!==this.layouts.length?this.$refs.selector.open():this.addLayout(this.layouts[0])},updateColumn(t){this.rows[t.layoutIndex].columns[t.columnIndex].blocks=t.blocks,this.save()},updateAttrs(t,e){this.rows[t].attrs=e,this.save()}}},To={};var Io=Dt(Oo,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.rows.length?[s("k-draggable",t._b({staticClass:"k-layouts",on:{sort:t.save}},"k-draggable",t.draggableOptions,!1),t._l(t.rows,(function(e,i){return s("k-layout",t._b({key:e.id,attrs:{disabled:t.disabled,endpoints:t.endpoints,"fieldset-groups":t.fieldsetGroups,fieldsets:t.fieldsets,"is-selected":t.selected===e.id,settings:t.settings},on:{append:function(e){return t.selectLayout(i+1)},duplicate:function(s){return t.duplicateLayout(i,e)},prepend:function(e){return t.selectLayout(i)},remove:function(s){return t.removeLayout(e)},select:function(s){t.selected=e.id},updateAttrs:function(e){return t.updateAttrs(i,e)},updateColumn:function(s){return t.updateColumn(Object.assign({},{layout:e,layoutIndex:i},s))}}},"k-layout",e,!1))})),1),t._v(" "),t.disabled?t._e():s("k-button",{staticClass:"k-layout-add-button",attrs:{icon:"add"},on:{click:function(e){return t.selectLayout(t.rows.length)}}})]:[s("k-empty",{staticClass:"k-layout-empty",attrs:{icon:"dashboard"},on:{click:function(e){return t.selectLayout(0)}}},[t._v("\n      "+t._s(t.empty||t.$t("field.layout.empty"))+"\n    ")])],t._v(" "),s("k-dialog",{ref:"selector",staticClass:"k-layout-selector",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"}},[s("k-headline",[t._v(t._s(t.$t("field.layout.select")))]),t._v(" "),s("ul",t._l(t.layouts,(function(e,i){return s("li",{key:i,staticClass:"k-layout-selector-option"},[s("k-grid",{nativeOn:{click:function(s){return t.addLayout(e)}}},t._l(e,(function(t,e){return s("k-column",{key:e,attrs:{width:t}})})),1)],1)})),0)],1)],2)}),[],!1,(function(t){for(let e in To)this[e]=To[e]}),null,null,null);Io.options.__file="src/components/Layouter/Layouts.vue";var Lo=Io.exports;const Ao={};var Fo=Dt({components:{"k-block-layouts":Lo},mixins:[is],inheritAttrs:!1,props:{empty:String,fieldsetGroups:Object,fieldsets:Object,layouts:{type:Array,default:()=>[["1/1"]]},settings:Object,value:{type:Array,default:()=>[]}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-layout-field"},"k-field",t.$props,!1),[s("k-block-layouts",t._b({on:{input:function(e){return t.$emit("input",e)}}},"k-block-layouts",t.$props,!1))],1)}),[],!1,(function(t){for(let e in Ao)this[e]=Ao[e]}),null,null,null);Fo.options.__file="src/components/Forms/Field/LayoutField.vue";var Bo=Fo.exports;const jo={};var Do=Dt({},(function(){var t=this.$createElement;return(this._self._c||t)("hr",{staticClass:"k-line-field"})}),[],!1,(function(t){for(let e in jo)this[e]=jo[e]}),null,null,null);Do.options.__file="src/components/Forms/Field/LineField.vue";var Mo=Do.exports;const Po={mixins:[is,ds],inheritAttrs:!1,props:{marks:[Array,Boolean],value:String},methods:{focus(){this.$refs.input.focus()}}},Ro={};var No=Dt(Po,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-list-field",attrs:{input:t._uid,counter:!1}},"k-field",t.$props,!1),[s("k-input",t._b({ref:"input",attrs:{id:t._uid,marks:t.marks,value:t.value,type:"list",theme:"field"},on:{input:function(e){return t.$emit("input",e)}}},"k-input",t.$props,!1))],1)}),[],!1,(function(t){for(let e in Ro)this[e]=Ro[e]}),null,null,null);No.options.__file="src/components/Forms/Field/ListField.vue";var qo=No.exports;const zo={};var Uo=Dt({mixins:[is,ds,Ki,Gn],inheritAttrs:!1,props:{icon:{type:String,default:"angle-down"}},mounted(){this.$refs.input.$el.setAttribute("tabindex",0)},methods:{blur(t){this.$refs.input.blur(t)},focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-multiselect-field",attrs:{input:t._uid,counter:t.counterOptions},on:{blur:t.blur},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focus(e))}}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"multiselect"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in zo)this[e]=zo[e]}),null,null,null);Uo.options.__file="src/components/Forms/Field/MultiselectField.vue";var Ho=Uo.exports;const Vo={};var Ko=Dt({mixins:[is,ds,Ji],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-number-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"number"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in Vo)this[e]=Vo[e]}),null,null,null);Ko.options.__file="src/components/Forms/Field/NumberField.vue";var Wo=Ko.exports;const Go={};var Yo=Dt({mixins:[ro]},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-pages-field",scopedSlots:t._u([{key:"options",fn:function(){return[s("k-button-group",{staticClass:"k-field-options"},[t.more&&!t.disabled?s("k-button",{staticClass:"k-field-options-button",attrs:{icon:t.btnIcon},on:{click:t.open}},[t._v("\n        "+t._s(t.btnLabel)+"\n      ")]):t._e()],1)]},proxy:!0}])},"k-field",t.$props,!1),[t._v(" "),t.selected.length?[s("k-items",{attrs:{items:t.selected,layout:t.layout,size:t.size,sortable:!t.disabled&&t.selected.length>1},on:{sort:t.onInput,sortChange:function(e){return t.$emit("change",e)}},scopedSlots:t._u([{key:"options",fn:function(e){var i=e.index;return[t.disabled?t._e():s("k-button",{attrs:{tooltip:t.$t("remove"),icon:"remove"},on:{click:function(e){return t.remove(i)}}})]}}],null,!1,1805525116)})]:s("k-empty",{attrs:{layout:t.layout,"data-invalid":t.isInvalid,icon:"page"},on:{click:t.open}},[t._v("\n    "+t._s(t.empty||t.$t("field.pages.empty"))+"\n  ")]),t._v(" "),s("k-pages-dialog",{ref:"selector",on:{submit:t.select}})],2)}),[],!1,(function(t){for(let e in Go)this[e]=Go[e]}),null,null,null);Yo.options.__file="src/components/Forms/Field/PagesField.vue";var Jo=Yo.exports;const Xo={};var Zo=Dt({mixins:[is,ds,tn,Gn],inheritAttrs:!1,props:{minlength:{type:Number,default:8},icon:{type:String,default:"key"}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-password-field",attrs:{input:t._uid,counter:t.counterOptions},scopedSlots:t._u([{key:"options",fn:function(){return[t._t("options")]},proxy:!0}],null,!0)},"k-field",t.$props,!1),[t._v(" "),s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"password"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in Xo)this[e]=Xo[e]}),null,null,null);Zo.options.__file="src/components/Forms/Field/PasswordField.vue";var Qo=Zo.exports;const tr={};var er=Dt({mixins:[is,ds,on],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-radio-field"},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"radio"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in tr)this[e]=tr[e]}),null,null,null);er.options.__file="src/components/Forms/Field/RadioField.vue";var sr=er.exports;const ir={};var nr=Dt({mixins:[ds,is,cn],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-range-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"range"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in ir)this[e]=ir[e]}),null,null,null);nr.options.__file="src/components/Forms/Field/RangeField.vue";var or=nr.exports;const rr={};var ar=Dt({mixins:[is,ds,hn],inheritAttrs:!1,props:{icon:{type:String,default:"angle-down"}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-select-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"select"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in rr)this[e]=rr[e]}),null,null,null);ar.options.__file="src/components/Forms/Field/SelectField.vue";var lr=ar.exports;const cr={mixins:[is,ds,vn],inheritAttrs:!1,props:{icon:{type:String,default:"url"},path:{type:String},wizzard:{type:[Boolean,Object],default:!1}},data(){return{slug:this.value}},computed:{preview(){return void 0!==this.help?this.help:void 0!==this.path?this.path+this.value:null}},watch:{value(){this.slug=this.value}},methods:{focus(){this.$refs.input.focus()},onWizzard(){this.wizzard&&this.wizzard.field&&this.formData[this.wizzard.field]&&(this.slug=this.formData[this.wizzard.field])}}},ur={};var dr=Dt(cr,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-slug-field",attrs:{input:t._uid},scopedSlots:t._u([t.wizzard&&t.wizzard.text?{key:"options",fn:function(){return[s("k-button",{attrs:{icon:"wand"},on:{click:t.onWizzard}},[t._v("\n      "+t._s(t.wizzard.text)+"\n    ")])]},proxy:!0}:null],null,!0)},"k-field",Object.assign({},t.$props,{help:t.preview}),!1),[t._v(" "),s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"slug"}},"k-input",Object.assign({},t.$props,{value:t.slug}),!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in ur)this[e]=ur[e]}),null,null,null);dr.options.__file="src/components/Forms/Field/SlugField.vue";var pr=dr.exports;const hr={mixins:[is],inheritAttrs:!1,props:{columns:Object,duplicate:{type:Boolean,default:!0},empty:String,fields:Object,limit:Number,max:Number,min:Number,prepend:{type:Boolean,default:!1},sortable:{type:Boolean,default:!0},sortBy:String,value:{type:Array,default:()=>[]}},data(){return{autofocus:null,items:this.makeItems(this.value),currentIndex:null,currentModel:null,trash:null,page:1}},computed:{direction(){return Ai(this)},dragOptions(){return{disabled:!this.isSortable,fallbackClass:"k-sortable-row-fallback"}},formFields(){let t={};return Object.keys(this.fields).forEach((e=>{let s=this.fields[e];s.section=this.name,s.endpoints={field:this.endpoints.field+"+"+e,section:this.endpoints.section,model:this.endpoints.model},null===this.autofocus&&!0===s.autofocus&&(this.autofocus=e),t[e]=s})),t},more(){return!0!==this.disabled&&!(this.max&&this.items.length>=this.max)},isInvalid(){return!0!==this.disabled&&(!!(this.min&&this.items.length<this.min)||!!(this.max&&this.items.length>this.max))},isSortable(){return!this.sortBy&&(!this.limit&&(!0!==this.disabled&&(!(this.items.length<=1)&&!1!==this.sortable)))},pagination(){let t=0;return this.limit&&(t=(this.page-1)*this.limit),{page:this.page,offset:t,limit:this.limit,total:this.items.length,align:"center",details:!0}},paginatedItems(){return this.limit?this.items.slice(this.pagination.offset,this.pagination.offset+this.limit):this.items}},watch:{value(t){t!=this.items&&(this.items=this.makeItems(t))}},methods:{add(){if(!0===this.disabled)return!1;if(null!==this.currentIndex)return this.escape(),!1;let t={};Object.keys(this.fields).forEach((e=>{const s=this.fields[e];null!==s.default?t[e]=this.$helper.clone(s.default):t[e]=null})),this.currentIndex="new",this.currentModel=t,this.createForm()},addItem(t){!0===this.prepend?this.items.unshift(t):this.items.push(t)},beforePaginate(){return this.save(this.currentModel)},close(){this.currentIndex=null,this.currentModel=null,this.$events.$off("keydown.esc",this.escape),this.$events.$off("keydown.cmd.s",this.submit),this.$store.dispatch("content/enable")},columnIsEmpty:t=>null==t||""===t||("object"==typeof t&&0===Object.keys(t).length&&t.constructor===Object||void 0!==t.length&&0===t.length),confirmRemove(t){this.close(),this.trash=t+this.pagination.offset,this.$refs.remove.open()},createForm(t){this.$events.$on("keydown.esc",this.escape),this.$events.$on("keydown.cmd.s",this.submit),this.$store.dispatch("content/disable"),this.$nextTick((()=>{this.$refs.form&&this.$refs.form.focus(t||this.autofocus)}))},displayText(t,e){switch(t.type){case"user":return e.email;case"date":{const s=this.$library.dayjs(e),i=!0===t.time?"YYYY-MM-DD HH:mm":"YYYY-MM-DD";return s.isValid()?s.format(i):""}case"tags":case"multiselect":return e.map((t=>t.text)).join(", ");case"checkboxes":return e.map((e=>{let s=e;return t.options.forEach((t=>{t.value===e&&(s=t.text)})),s})).join(", ");case"radio":case"select":{const s=t.options.filter((t=>t.value===e))[0];return s?s.text:null}}return"object"==typeof e&&null!==e?"…":e.toString()},duplicateItem(t){this.addItem(this.items[t+this.pagination.offset]),this.onInput()},escape(){if("new"===this.currentIndex){let t=Object.values(this.currentModel),e=!0;if(t.forEach((t=>{!1===this.columnIsEmpty(t)&&(e=!1)})),!0===e)return void this.close()}this.submit()},focus(){this.$refs.add&&this.$refs.add.focus&&this.$refs.add.focus()},indexOf(t){return this.limit?(this.page-1)*this.limit+t+1:t+1},isActive(t){return this.currentIndex===t},jump(t,e){this.open(t+this.pagination.offset,e)},makeItems(t){return!1===Array.isArray(t)?[]:this.sort(t)},onInput(){this.$emit("input",this.items)},open(t,e){this.currentIndex=t,this.currentModel=this.$helper.clone(this.items[t]),this.createForm(e)},paginate(t){this.open(t.offset)},paginateItems(t){this.page=t.page},previewExists(t){return this.$helper.isComponent(`k-${t}-field-preview`)},remove(){if(null===this.trash)return!1;this.items.splice(this.trash,1),this.trash=null,this.$refs.remove.close(),this.onInput(),0===this.paginatedItems.length&&this.page>1&&this.page--,this.items=this.sort(this.items)},sort(t){return this.sortBy?t.sortBy(this.sortBy):t},save(){return null!==this.currentIndex&&void 0!==this.currentIndex?this.validate(this.currentModel).then((()=>("new"===this.currentIndex?this.addItem(this.currentModel):this.items[this.currentIndex]=this.currentModel,this.items=this.sort(this.items),this.onInput(),!0))).catch((t=>{throw this.$store.dispatch("notification/error",{message:this.$t("error.form.incomplete"),details:t}),t})):Promise.resolve()},submit(){this.save().then(this.close).catch((()=>{}))},validate(t){return this.$api.post(this.endpoints.field+"/validate",t).then((t=>{if(t.length>0)throw t;return!0}))},width(t){if(!t)return"auto";const e=t.toString().split("/");if(2!==e.length)return"auto";const s=Number(e[0]),i=Number(e[1]);return parseFloat(100/i*s,2).toFixed(2)+"%"},update(t,e,s){this.items[t][e]=s,this.onInput()}}},mr={};var fr=Dt(hr,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-structure-field",nativeOn:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"options",fn:function(){return[t.more&&null===t.currentIndex?s("k-button",{ref:"add",attrs:{id:t._uid,icon:"add"},on:{click:t.add}},[t._v("\n      "+t._s(t.$t("add"))+"\n    ")]):t._e()]},proxy:!0}])},"k-field",t.$props,!1),[t._v(" "),null!==t.currentIndex?[s("div",{staticClass:"k-structure-backdrop",on:{click:t.escape}}),t._v(" "),s("section",{staticClass:"k-structure-form"},[s("k-form",{ref:"form",staticClass:"k-structure-form-fields",attrs:{fields:t.formFields},on:{input:t.onInput,submit:t.submit},model:{value:t.currentModel,callback:function(e){t.currentModel=e},expression:"currentModel"}}),t._v(" "),s("footer",{staticClass:"k-structure-form-buttons"},[s("k-button",{staticClass:"k-structure-form-cancel-button",attrs:{icon:"cancel"},on:{click:t.close}},[t._v("\n          "+t._s(t.$t("cancel"))+"\n        ")]),t._v(" "),"new"!==t.currentIndex?s("k-pagination",{attrs:{dropdown:!1,total:t.items.length,limit:1,page:t.currentIndex+1,details:!0,validate:t.beforePaginate},on:{paginate:t.paginate}}):t._e(),t._v(" "),s("k-button",{staticClass:"k-structure-form-submit-button",attrs:{icon:"check"},on:{click:t.submit}},[t._v("\n          "+t._s(t.$t("new"!==t.currentIndex?"confirm":"add"))+"\n        ")])],1)],1)]:0===t.items.length?s("k-empty",{attrs:{"data-invalid":t.isInvalid,icon:"list-bullet"},on:{click:t.add}},[t._v("\n    "+t._s(t.empty||t.$t("field.structure.empty"))+"\n  ")]):[s("table",{staticClass:"k-structure-table",attrs:{"data-invalid":t.isInvalid,"data-sortable":t.isSortable}},[s("thead",[s("tr",[s("th",{staticClass:"k-structure-table-index"},[t._v("\n            #\n          ")]),t._v(" "),t._l(t.columns,(function(e,i){return s("th",{key:i+"-header",staticClass:"k-structure-table-column",style:"width:"+t.width(e.width),attrs:{"data-align":e.align}},[t._v("\n            "+t._s(e.label)+"\n          ")])})),t._v(" "),t.disabled?t._e():s("th")],2)]),t._v(" "),s("k-draggable",{attrs:{list:t.items,"data-disabled":t.disabled,options:t.dragOptions,handle:!0,dir:t.direction,element:"tbody"},on:{end:t.onInput}},t._l(t.paginatedItems,(function(e,i){return s("tr",{key:i,on:{click:function(t){t.stopPropagation()}}},[s("td",{staticClass:"k-structure-table-index"},[t.isSortable?s("k-sort-handle"):t._e(),t._v(" "),s("span",{staticClass:"k-structure-table-index-number"},[t._v(t._s(t.indexOf(i)))])],1),t._v(" "),t._l(t.columns,(function(n,o){return s("td",{key:o,staticClass:"k-structure-table-column",style:"width:"+t.width(n.width),attrs:{title:n.label,"data-align":n.align},on:{click:function(e){return t.jump(i,o)}}},[!1===t.columnIsEmpty(e[o])?[t.previewExists(n.type)?s("k-"+n.type+"-field-preview",{tag:"component",attrs:{value:e[o],column:n,field:t.fields[o]},on:{input:function(e){return t.update(i,o,e)}}}):[s("p",{staticClass:"k-structure-table-text"},[t._v("\n                  "+t._s(n.before)+" "+t._s(t.displayText(t.fields[o],e[o])||"–")+" "+t._s(n.after)+"\n                ")])]]:t._e()],2)})),t._v(" "),t.disabled?t._e():s("td",{staticClass:"k-structure-table-options"},[t.duplicate&&t.more&&null===t.currentIndex?[s("k-button",{key:i,ref:"actionsToggle",refInFor:!0,staticClass:"k-structure-table-options-button",attrs:{icon:"dots"},on:{click:function(e){t.$refs[i+"-actions"][0].toggle()}}}),t._v(" "),s("k-dropdown-content",{ref:i+"-actions",refInFor:!0,attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{icon:"copy"},on:{click:function(e){return t.duplicateItem(i)}}},[t._v("\n                  "+t._s(t.$t("duplicate"))+"\n                ")]),t._v(" "),s("k-dropdown-item",{attrs:{icon:"remove"},on:{click:function(e){return t.confirmRemove(i)}}},[t._v("\n                  "+t._s(t.$t("remove"))+"\n                ")])],1)]:[s("k-button",{staticClass:"k-structure-table-options-button",attrs:{tooltip:t.$t("remove"),icon:"remove"},on:{click:function(e){return t.confirmRemove(i)}}})]],2)],2)})),0)],1),t._v(" "),t.limit?s("k-pagination",t._b({on:{paginate:t.paginateItems}},"k-pagination",t.pagination,!1)):t._e(),t._v(" "),t.disabled?t._e():s("k-dialog",{ref:"remove",attrs:{"submit-button":t.$t("delete"),theme:"negative"},on:{submit:t.remove}},[s("k-text",[t._v(t._s(t.$t("field.structure.delete.confirm")))])],1)]],2)}),[],!1,(function(t){for(let e in mr)this[e]=mr[e]}),null,null,null);fr.options.__file="src/components/Forms/Field/StructureField.vue";var gr=fr.exports;const vr={};var kr=Dt({mixins:[is,ds,yn,Gn],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-tags-field",attrs:{input:t._uid,counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"tags"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in vr)this[e]=vr[e]}),null,null,null);kr.options.__file="src/components/Forms/Field/TagsField.vue";var br=kr.exports;const _r={};var yr=Dt({mixins:[is,ds,Sn],inheritAttrs:!1,props:{icon:{type:String,default:"phone"}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-tel-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"tel"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in _r)this[e]=_r[e]}),null,null,null);yr.options.__file="src/components/Forms/Field/TelField.vue";var $r=yr.exports;const wr={};var xr=Dt({mixins:[is,ds,Fi,Gn],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()},select(){this.$refs.input.select()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-text-field",attrs:{input:t._uid,counter:t.counterOptions},scopedSlots:t._u([{key:"options",fn:function(){return[t._t("options")]},proxy:!0}],null,!0)},"k-field",t.$props,!1),[t._v(" "),s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in wr)this[e]=wr[e]}),null,null,null);xr.options.__file="src/components/Forms/Field/TextField.vue";var Sr=xr.exports;const Cr={};var Er=Dt({mixins:[is,ds,Tn,Gn],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-textarea-field",attrs:{input:t._uid,counter:t.counterOptions}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,type:"textarea",theme:"field"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in Cr)this[e]=Cr[e]}),null,null,null);Er.options.__file="src/components/Forms/Field/TextareaField.vue";var Or=Er.exports;const Tr={};var Ir=Dt({mixins:[is,ds,Fn],inheritAttrs:!1,props:{icon:{type:String,default:"clock"}},computed:{listeners(){return o(o({},this.$listeners),{update:t=>this.$emit("input",t),input:()=>{}})}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-time-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"time"}},"k-input",t.$props,!1),t.listeners))],1)}),[],!1,(function(t){for(let e in Tr)this[e]=Tr[e]}),null,null,null);Ir.options.__file="src/components/Forms/Field/TimeField.vue";var Lr=Ir.exports;const Ar={};var Fr=Dt({mixins:[is,ds,Mn],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-toggle-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"toggle"}},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in Ar)this[e]=Ar[e]}),null,null,null);Fr.options.__file="src/components/Forms/Field/ToggleField.vue";var Br=Fr.exports;const jr={mixins:[is,ds,qn],inheritAttrs:!1,props:{link:{type:Boolean,default:!0},icon:{type:String,default:"url"}},methods:{focus(){this.$refs.input.focus()}}},Dr={};var Mr=Dt(jr,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-url-field",attrs:{input:t._uid}},"k-field",t.$props,!1),[s("k-input",t._g(t._b({ref:"input",attrs:{id:t._uid,theme:"field",type:"url"},scopedSlots:t._u([{key:"icon",fn:function(){return[t.link?s("k-button",{staticClass:"k-input-icon-button",attrs:{icon:t.icon,link:t.value,tooltip:t.$t("open"),tabindex:"-1",target:"_blank"}}):t._e()]},proxy:!0}])},"k-input",t.$props,!1),t.$listeners))],1)}),[],!1,(function(t){for(let e in Dr)this[e]=Dr[e]}),null,null,null);Mr.options.__file="src/components/Forms/Field/UrlField.vue";var Pr=Mr.exports;const Rr={};var Nr=Dt({mixins:[ro]},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-users-field",scopedSlots:t._u([{key:"options",fn:function(){return[s("k-button-group",{staticClass:"k-field-options"},[t.more&&!t.disabled?s("k-button",{staticClass:"k-field-options-button",attrs:{icon:t.btnIcon},on:{click:t.open}},[t._v("\n        "+t._s(t.btnLabel)+"\n      ")]):t._e()],1)]},proxy:!0}])},"k-field",t.$props,!1),[t._v(" "),t.selected.length?[s("k-items",{attrs:{items:t.selected,layout:t.layout,size:t.size,sortable:!t.disabled&&t.selected.length>1},on:{sort:t.onInput,sortChange:function(e){return t.$emit("change",e)}},scopedSlots:t._u([{key:"options",fn:function(e){var i=e.index;return[t.disabled?t._e():s("k-button",{attrs:{tooltip:t.$t("remove"),icon:"remove"},on:{click:function(e){return t.remove(i)}}})]}}],null,!1,1805525116)})]:s("k-empty",{attrs:{"data-invalid":t.isInvalid,icon:"users"},on:{click:t.open}},[t._v("\n    "+t._s(t.empty||t.$t("field.users.empty"))+"\n  ")]),t._v(" "),s("k-users-dialog",{ref:"selector",on:{submit:t.select}})],2)}),[],!1,(function(t){for(let e in Rr)this[e]=Rr[e]}),null,null,null);Nr.options.__file="src/components/Forms/Field/UsersField.vue";var qr=Nr.exports;const zr={};var Ur=Dt({mixins:[is,ds,ci],inheritAttrs:!1,methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-field",t._b({staticClass:"k-writer-field",attrs:{input:t._uid,counter:!1}},"k-field",t.$props,!1),[s("k-input",t._b({attrs:{after:t.after,before:t.before,icon:t.icon,theme:"field"}},"k-input",t.$props,!1),[s("k-writer",t._b({ref:"input",staticClass:"k-writer-field-input",attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)}}},"k-writer",t.$props,!1))],1)],1)}),[],!1,(function(t){for(let e in zr)this[e]=zr[e]}),null,null,null);Ur.options.__file="src/components/Forms/Field/WriterField.vue";var Hr=Ur.exports;const Vr=function(t){this.command("insert",((e,s)=>{let i=[];return s.split("\n").forEach(((e,s)=>{let n="ol"===t?s+1+".":"-";i.push(n+" "+e)})),i.join("\n")}))},Kr={layout:["headlines","bold","italic","|","link","email","file","|","code","ul","ol"],props:{buttons:{type:[Boolean,Array],default:!0},uploads:[Boolean,Object,Array]},data(){let t={},e={},s=[],i=this.commands();return!1===this.buttons?t:(Array.isArray(this.buttons)&&(s=this.buttons),!0!==Array.isArray(this.buttons)&&(s=this.$options.layout),s.forEach(((s,n)=>{if("|"===s)t["divider-"+n]={divider:!0};else if(i[s]){let n=i[s];t[s]=n,n.shortcut&&(e[n.shortcut]=s)}})),{layout:t,shortcuts:e})},methods:{command(t,e){"function"==typeof t?t.apply(this):this.$emit("command",t,e)},close(){Object.keys(this.$refs).forEach((t=>{const e=this.$refs[t][0];e.close&&"function"==typeof e.close&&e.close()}))},fileCommandSetup(){let t={label:this.$t("toolbar.button.file"),icon:"attachment"};return!1===this.uploads?t.command="selectFile":t.dropdown={select:{label:this.$t("toolbar.button.file.select"),icon:"check",command:"selectFile"},upload:{label:this.$t("toolbar.button.file.upload"),icon:"upload",command:"uploadFile"}},t},commands(){return{headlines:{label:this.$t("toolbar.button.headings"),icon:"title",dropdown:{h1:{label:this.$t("toolbar.button.heading.1"),icon:"title",command:"prepend",args:"#"},h2:{label:this.$t("toolbar.button.heading.2"),icon:"title",command:"prepend",args:"##"},h3:{label:this.$t("toolbar.button.heading.3"),icon:"title",command:"prepend",args:"###"}}},bold:{label:this.$t("toolbar.button.bold"),icon:"bold",command:"wrap",args:"**",shortcut:"b"},italic:{label:this.$t("toolbar.button.italic"),icon:"italic",command:"wrap",args:"*",shortcut:"i"},link:{label:this.$t("toolbar.button.link"),icon:"url",shortcut:"k",command:"dialog",args:"link"},email:{label:this.$t("toolbar.button.email"),icon:"email",shortcut:"e",command:"dialog",args:"email"},file:this.fileCommandSetup(),code:{label:this.$t("toolbar.button.code"),icon:"code",command:"wrap",args:"`"},ul:{label:this.$t("toolbar.button.ul"),icon:"list-bullet",command(){return Vr.apply(this,["ul"])}},ol:{label:this.$t("toolbar.button.ol"),icon:"list-numbers",command(){return Vr.apply(this,["ol"])}}}},shortcut(t,e){if(this.shortcuts[t]){const s=this.layout[this.shortcuts[t]];if(!s)return!1;e.preventDefault(),this.command(s.command,s.args)}}}},Wr={};var Gr=Dt(Kr,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"k-toolbar"},[s("div",{staticClass:"k-toolbar-wrapper"},[s("div",{staticClass:"k-toolbar-buttons"},[t._l(t.layout,(function(e,i){return[e.divider?[s("span",{key:i,staticClass:"k-toolbar-divider"})]:e.dropdown?[s("k-dropdown",{key:i},[s("k-button",{key:i,staticClass:"k-toolbar-button",attrs:{icon:e.icon,tooltip:e.label,tabindex:"-1"},on:{click:function(e){t.$refs[i+"-dropdown"][0].toggle()}}}),t._v(" "),s("k-dropdown-content",{ref:i+"-dropdown",refInFor:!0},t._l(e.dropdown,(function(e,i){return s("k-dropdown-item",{key:i,attrs:{icon:e.icon},on:{click:function(s){return t.command(e.command,e.args)}}},[t._v("\n                "+t._s(e.label)+"\n              ")])})),1)],1)]:[s("k-button",{key:i,staticClass:"k-toolbar-button",attrs:{icon:e.icon,tooltip:e.label,tabindex:"-1"},on:{click:function(s){return t.command(e.command,e.args)}}})]]}))],2)])])}),[],!1,(function(t){for(let e in Wr)this[e]=Wr[e]}),null,null,null);Gr.options.__file="src/components/Forms/Toolbar.vue";var Yr=Gr.exports;const Jr={};var Xr=Dt({data(){return{value:{email:null,text:null},fields:{email:{label:this.$t("email"),type:"email"},text:{label:this.$t("link.text"),type:"text"}}}},computed:{kirbytext(){return this.$config.kirbytext}},methods:{open(t,e){this.value.text=e,this.$refs.dialog.open()},cancel(){this.$emit("cancel")},createKirbytext(){const t=this.value.email||"";return this.value.text&&this.value.text.length>0?`(email: ${t} text: ${this.value.text})`:`(email: ${t})`},createMarkdown(){const t=this.value.email||"";return this.value.text&&this.value.text.length>0?`[${this.value.text}](mailto:${t})`:`<${t}>`},submit(){this.$emit("submit",this.kirbytext?this.createKirbytext():this.createMarkdown()),this.value={email:null,text:null},this.$refs.dialog.close()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",attrs:{"submit-button":t.$t("insert")},on:{close:t.cancel,submit:function(e){return t.$refs.form.submit()}}},[s("k-form",{ref:"form",attrs:{fields:t.fields},on:{submit:t.submit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)}),[],!1,(function(t){for(let e in Jr)this[e]=Jr[e]}),null,null,null);Xr.options.__file="src/components/Forms/Toolbar/EmailDialog.vue";var Zr=Xr.exports;const Qr={};var ta=Dt({data(){return{value:{url:null,text:null},fields:{url:{label:this.$t("link"),type:"text",placeholder:this.$t("url.placeholder"),icon:"url"},text:{label:this.$t("link.text"),type:"text"}}}},computed:{kirbytext(){return this.$config.kirbytext}},methods:{open(t,e){this.value.text=e,this.$refs.dialog.open()},cancel(){this.$emit("cancel")},createKirbytext(){return this.value.text.length>0?`(link: ${this.value.url} text: ${this.value.text})`:`(link: ${this.value.url})`},createMarkdown(){return this.value.text.length>0?`[${this.value.text}](${this.value.url})`:`<${this.value.url}>`},submit(){this.$emit("submit",this.kirbytext?this.createKirbytext():this.createMarkdown()),this.value={url:null,text:null},this.$refs.dialog.close()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",attrs:{"submit-button":t.$t("insert")},on:{close:t.cancel,submit:function(e){return t.$refs.form.submit()}}},[s("k-form",{ref:"form",attrs:{fields:t.fields},on:{submit:t.submit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)}),[],!1,(function(t){for(let e in Qr)this[e]=Qr[e]}),null,null,null);ta.options.__file="src/components/Forms/Toolbar/LinkDialog.vue";var ea=ta.exports;const sa={};var ia=Dt({props:{field:Object,value:String},computed:{text(){return Ei.methods.toDatetime.call(this,this.value).format(this.field.display)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"k-date-field-preview"},[t._v("\n    "+t._s(t.text)+"\n  ")])])}),[],!1,(function(t){for(let e in sa)this[e]=sa[e]}),null,null,null);ia.options.__file="src/components/Forms/Previews/DateFieldPreview.vue";var na=ia.exports;const oa={};var ra=Dt({props:{column:{type:Object,default:()=>({})},value:String},computed:{link(){return this.value}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"k-url-field-preview"},[t._v("\n  "+t._s(t.column.before)+"\n  "),s("k-link",{attrs:{to:t.link,target:"_blank"},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v("\n    "+t._s(t.value)+"\n  ")]),t._v("\n  "+t._s(t.column.after)+"\n")],1)}),[],!1,(function(t){for(let e in oa)this[e]=oa[e]}),null,null,null);ra.options.__file="src/components/Forms/Previews/UrlFieldPreview.vue";var aa=ra.exports;const la={};var ca=Dt({extends:aa,computed:{link(){return this.value&&this.value.length>0?"mailto:"+this.value:null}}},undefined,undefined,!1,(function(t){for(let e in la)this[e]=la[e]}),null,null,null);ca.options.__file="src/components/Forms/Previews/EmailFieldPreview.vue";var ua=ca.exports;const da={};var pa=Dt({props:{value:Array,field:Object},methods:{imageOptions(t){return t.src?o(o(o({},t),{back:"pattern",cover:!1}),this.field.image||{}):{src:t.url}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.value?s("ul",{staticClass:"k-files-field-preview"},t._l(t.value,(function(e){return s("li",{key:e.url},[s("k-link",{attrs:{title:e.filename,to:e.link},nativeOn:{click:function(t){t.stopPropagation()}}},["image"===e.type?s("k-image",t._b({},"k-image",t.imageOptions(e),!1)):s("k-icon",t._b({},"k-icon",e.icon,!1))],1)],1)})),0):t._e()}),[],!1,(function(t){for(let e in da)this[e]=da[e]}),null,null,null);pa.options.__file="src/components/Forms/Previews/FilesFieldPreview.vue";var ha=pa.exports;const ma={};var fa=Dt({inheritAttrs:!1,props:{value:String}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-list-field-preview",domProps:{innerHTML:t._s(t.value)}})}),[],!1,(function(t){for(let e in ma)this[e]=ma[e]}),null,null,null);fa.options.__file="src/components/Forms/Previews/ListFieldPreview.vue";var ga=fa.exports;const va={};var ka=Dt({props:{value:Array}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.value?s("ul",{staticClass:"k-pages-field-preview"},t._l(t.value,(function(e){return s("li",{key:e.id},[s("figure",[s("k-link",{attrs:{title:e.id,to:t.$api.pages.link(e.id)},nativeOn:{click:function(t){t.stopPropagation()}}},[s("k-icon",{staticClass:"k-pages-field-preview-image",attrs:{type:"page",back:"pattern"}}),t._v(" "),s("figcaption",[t._v("\n          "+t._s(e.text)+"\n        ")])],1)],1)])})),0):t._e()}),[],!1,(function(t){for(let e in va)this[e]=va[e]}),null,null,null);ka.options.__file="src/components/Forms/Previews/PagesFieldPreview.vue";var ba=ka.exports;const _a={};var ya=Dt({props:{field:Object,value:String},computed:{text(){return Dn.methods.toDatetime.call(this,this.value).format(this.field.display)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"k-time-field-preview"},[t._v("\n    "+t._s(t.text)+"\n  ")])])}),[],!1,(function(t){for(let e in _a)this[e]=_a[e]}),null,null,null);ya.options.__file="src/components/Forms/Previews/TimeFieldPreview.vue";var $a=ya.exports;const wa={props:{field:Object,value:Boolean,column:Object},computed:{text(){return!1!==this.column.text?this.field.text:null}}},xa={};var Sa=Dt(wa,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-input",{staticClass:"k-toggle-field-preview",attrs:{text:t.text,type:"toggle"},on:{input:function(e){return t.$emit("input",e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),[],!1,(function(t){for(let e in xa)this[e]=xa[e]}),null,null,null);Sa.options.__file="src/components/Forms/Previews/ToggleFieldPreview.vue";var Ca=Sa.exports;const Ea={};var Oa=Dt({props:{value:Array}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.value?s("ul",{staticClass:"k-users-field-preview"},t._l(t.value,(function(e){return s("li",{key:e.email},[s("figure",[s("k-link",{attrs:{title:e.email,to:t.$api.users.link(e.id)},nativeOn:{click:function(t){t.stopPropagation()}}},[e.avatar?s("k-image",{staticClass:"k-users-field-preview-avatar",attrs:{src:e.avatar.url,back:"pattern"}}):s("k-icon",{staticClass:"k-users-field-preview-avatar",attrs:{type:"user",back:"pattern"}}),t._v(" "),s("figcaption",[t._v("\n          "+t._s(e.username)+"\n        ")])],1)],1)])})),0):t._e()}),[],!1,(function(t){for(let e in Ea)this[e]=Ea[e]}),null,null,null);Oa.options.__file="src/components/Forms/Previews/UsersFieldPreview.vue";var Ta=Oa.exports;const Ia={};var La=Dt({inheritAttrs:!1,props:{value:String}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-writer-field-preview",domProps:{innerHTML:t._s(t.value)}})}),[],!1,(function(t){for(let e in Ia)this[e]=Ia[e]}),null,null,null);La.options.__file="src/components/Forms/Previews/WriterFieldPreview.vue";var Aa=La.exports;const Fa={props:{cover:Boolean,ratio:String},computed:{ratioPadding(){return this.$helper.ratio(this.ratio)}}},Ba={};var ja=Dt(Fa,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"k-aspect-ratio",style:{paddingBottom:t.ratioPadding},attrs:{"data-cover":t.cover}},[t._t("default")],2)}),[],!1,(function(t){for(let e in Ba)this[e]=Ba[e]}),null,null,null);ja.options.__file="src/components/Layout/AspectRatio.vue";var Da=ja.exports;const Ma={};var Pa=Dt({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-bar"},[t.$slots.left?s("div",{staticClass:"k-bar-slot",attrs:{"data-position":"left"}},[t._t("left")],2):t._e(),t._v(" "),t.$slots.center?s("div",{staticClass:"k-bar-slot",attrs:{"data-position":"center"}},[t._t("center")],2):t._e(),t._v(" "),t.$slots.right?s("div",{staticClass:"k-bar-slot",attrs:{"data-position":"right"}},[t._t("right")],2):t._e()])}),[],!1,(function(t){for(let e in Ma)this[e]=Ma[e]}),null,null,null);Pa.options.__file="src/components/Layout/Bar.vue";var Ra=Pa.exports;const Na={};var qa=Dt({props:{theme:{type:String,default:"none"},text:String}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._g({staticClass:"k-box",attrs:{"data-theme":t.theme}},t.$listeners),[t._t("default",[s("k-text",{domProps:{innerHTML:t._s(t.text)}})])],2)}),[],!1,(function(t){for(let e in Na)this[e]=Na[e]}),null,null,null);qa.options.__file="src/components/Layout/Box.vue";var za=qa.exports;const Ua={props:{help:String,items:{type:[Array,Object],default:()=>[]},layout:{type:String,default:"list"},size:String,sortable:Boolean,pagination:{type:[Boolean,Object],default:()=>!1}},computed:{hasPagination(){return!1!==this.pagination&&(!0!==this.paginationOptions.hide&&!(this.pagination.total<=this.pagination.limit))},hasFooter(){return!(!this.hasPagination&&!this.help)},paginationOptions(){const t="object"!=typeof this.pagination?{}:this.pagination;return o({limit:10,details:!0,keys:!1,total:0,hide:!1},t)}},watch:{$props(){this.$forceUpdate()}},methods:{onOption(...t){this.$emit("action",...t),this.$emit("option",...t)}}},Ha={};var Va=Dt(Ua,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-collection"},[s("k-items",{attrs:{items:t.items,layout:t.layout,size:t.size,sortable:t.sortable},on:{option:t.onOption,sort:function(e){return t.$emit("sort",e)},change:function(e){return t.$emit("change",e)}}}),t._v(" "),t.hasFooter?s("footer",{staticClass:"k-collection-footer"},[t.help?s("k-text",{staticClass:"k-collection-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e(),t._v(" "),s("div",{staticClass:"k-collection-pagination"},[t.hasPagination?s("k-pagination",t._b({on:{paginate:function(e){return t.$emit("paginate",e)}}},"k-pagination",t.paginationOptions,!1)):t._e()],1)],1):t._e()],1)}),[],!1,(function(t){for(let e in Ha)this[e]=Ha[e]}),null,null,null);Va.options.__file="src/components/Layout/Collection.vue";var Ka=Va.exports;const Wa={props:{width:String,sticky:Boolean}},Ga={};var Ya=Dt(Wa,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-column",attrs:{"data-width":t.width,"data-sticky":t.sticky}},[s("div",[t._t("default")],2)])}),[],!1,(function(t){for(let e in Ga)this[e]=Ga[e]}),null,null,null);Ya.options.__file="src/components/Layout/Column.vue";var Ja=Ya.exports;const Xa={props:{disabled:{type:Boolean,default:!1}},data:()=>({files:[],dragging:!1,over:!1}),methods:{cancel(){this.reset()},reset(){this.dragging=!1,this.over=!1},onDrop(t){return!0===this.disabled||!1===this.$helper.isUploadEvent(t)?this.reset():(this.$events.$emit("dropzone.drop"),this.files=t.dataTransfer.files,this.$emit("drop",this.files),void this.reset())},onEnter(t){!1===this.disabled&&this.$helper.isUploadEvent(t)&&(this.dragging=!0)},onLeave(){this.reset()},onOver(t){!1===this.disabled&&this.$helper.isUploadEvent(t)&&(t.dataTransfer.dropEffect="copy",this.over=!0)}}},Za={};var Qa=Dt(Xa,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-dropzone",attrs:{"data-dragging":t.dragging,"data-over":t.over},on:{dragenter:t.onEnter,dragleave:t.onLeave,dragover:t.onOver,drop:t.onDrop}},[t._t("default")],2)}),[],!1,(function(t){for(let e in Za)this[e]=Za[e]}),null,null,null);Qa.options.__file="src/components/Layout/Dropzone.vue";var tl=Qa.exports;const el={};var sl=Dt({props:{text:String,icon:String,layout:{type:String,default:"list"}},computed:{element(){return void 0!==this.$listeners.click?"button":"div"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.element,t._g({tag:"component",staticClass:"k-empty",attrs:{"data-layout":t.layout,type:"button"===t.element&&"button"}},t.$listeners),[t.icon?s("k-icon",{attrs:{type:t.icon}}):t._e(),t._v(" "),s("p",[t._t("default")],2)],1)}),[],!1,(function(t){for(let e in el)this[e]=el[e]}),null,null,null);sl.options.__file="src/components/Layout/Empty.vue";var il=sl.exports;const nl={};var ol=Dt({props:{file:Object}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-file-preview"},[s("k-view",{staticClass:"k-file-preview-layout"},[s("div",{staticClass:"k-file-preview-image"},[s("k-link",{staticClass:"k-file-preview-image-link",attrs:{to:t.file.url,title:t.$t("open"),target:"_blank"}},[t.file.panelImage&&t.file.panelImage.src?s("k-image",{attrs:{src:t.file.panelImage.src,srcset:t.file.panelImage.srcset,back:"none"}}):t.file.panelImage?s("k-icon",{staticClass:"k-file-preview-icon",style:{color:t.file.panelImage.color},attrs:{type:t.file.panelImage.icon}}):s("span",{staticClass:"k-file-preview-placeholder"})],1)],1),t._v(" "),s("div",{staticClass:"k-file-preview-details"},[s("ul",[s("li",[s("h3",[t._v(t._s(t.$t("template")))]),t._v(" "),s("p",[t._v(t._s(t.file.template||"—"))])]),t._v(" "),s("li",[s("h3",[t._v(t._s(t.$t("mime")))]),t._v(" "),s("p",[t._v(t._s(t.file.mime))])]),t._v(" "),s("li",[s("h3",[t._v(t._s(t.$t("url")))]),t._v(" "),s("p",[s("k-link",{attrs:{to:t.file.url,tabindex:"-1",target:"_blank"}},[t._v("\n              /"+t._s(t.file.id)+"\n            ")])],1)]),t._v(" "),s("li",[s("h3",[t._v(t._s(t.$t("size")))]),t._v(" "),s("p",[t._v(t._s(t.file.niceSize))])]),t._v(" "),s("li",[s("h3",[t._v(t._s(t.$t("dimensions")))]),t._v(" "),t.file.dimensions&&(t.file.dimensions.width||t.file.dimensions.height)?s("p",[t._v("\n            "+t._s(t.file.dimensions.width)+"×"+t._s(t.file.dimensions.height)+" "+t._s(t.$t("pixel"))+"\n          ")]):s("p",[t._v("\n            —\n          ")])]),t._v(" "),s("li",[s("h3",[t._v(t._s(t.$t("orientation")))]),t._v(" "),t.file.dimensions&&t.file.dimensions.orientation?s("p",[t._v("\n            "+t._s(t.$t("orientation."+t.file.dimensions.orientation))+"\n          ")]):s("p",[t._v("\n            —\n          ")])])])])])],1)}),[],!1,(function(t){for(let e in nl)this[e]=nl[e]}),null,null,null);ol.options.__file="src/components/Layout/FilePreview.vue";var rl=ol.exports;const al={};var ll=Dt({props:{gutter:String}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-grid",attrs:{"data-gutter":t.gutter}},[t._t("default")],2)}),[],!1,(function(t){for(let e in al)this[e]=al[e]}),null,null,null);ll.options.__file="src/components/Layout/Grid.vue";var cl=ll.exports;const ul={props:{editable:Boolean,tab:String,tabs:{type:Array,default:()=>[]}},computed:{tabsWithBadges(){const t=Object.keys(this.$store.getters["content/changes"]());return this.tabs.map((e=>{let s=[];return Object.values(e.columns).forEach((t=>{Object.values(t.sections).forEach((t=>{"fields"===t.type&&Object.keys(t.fields).forEach((t=>{s.push(t)}))}))})),e.badge=s.filter((e=>t.includes(e.toLowerCase()))).length,e}))}}},dl={};var pl=Dt(ul,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"k-header",attrs:{"data-editable":t.editable}},[s("k-headline",{attrs:{tag:"h1",size:"huge"}},[t.editable&&t.$listeners.edit?s("span",{staticClass:"k-headline-editable",on:{click:function(e){return t.$emit("edit")}}},[t._t("default"),t._v(" "),s("k-icon",{attrs:{type:"edit"}})],2):t._t("default")],2),t._v(" "),t.$slots.left||t.$slots.right?s("k-bar",{staticClass:"k-header-buttons",scopedSlots:t._u([{key:"left",fn:function(){return[t._t("left")]},proxy:!0},{key:"right",fn:function(){return[t._t("right")]},proxy:!0}],null,!0)}):t._e(),t._v(" "),s("k-tabs",{attrs:{tab:t.tab,tabs:t.tabsWithBadges,theme:"notice"}})],1)}),[],!1,(function(t){for(let e in dl)this[e]=dl[e]}),null,null,null);pl.options.__file="src/components/Layout/Header.vue";var hl=pl.exports;const ml={inheritAttrs:!1,props:{lock:[Boolean,Object]},data:()=>({offline:!1,dragging:!1}),computed:{defaultTranslation(){return!!this.$language&&this.$language.default},dialog(){return this.$helper.clone(this.$store.state.dialog)},fatal(){return this.$store.state.fatal},searchTypes(){return(t=>{const e=async({endpoint:e,query:s,limit:i,fields:n,map:r})=>(await t.$api.get(e,{q:s,limit:i||10,select:["id",...n,"panelImage"]})).data.map((t=>o({id:t.id,image:t.panelImage},r(t))));return{pages:{label:t.$t("pages"),icon:"page",search:async s=>e(o(o({},s),{endpoint:"site/search",fields:["title"],map:e=>({text:e.title,link:t.$api.pages.link(e.id),info:e.id})}))},files:{label:t.$t("files"),icon:"image",search:async s=>e(o(o({},s),{endpoint:"files/search",fields:["filename","parent"],map:e=>({text:e.filename,link:t.$api.files.link(t.$api.pages.url(e.parent.id),e.filename),info:e.id})}))},users:{label:t.$t("users"),icon:"users",search:async s=>e(o(o({},s),{endpoint:"users/search",fields:["name","email"],map:e=>({text:e.name||e.email,link:t.$api.users.link(e.id),info:e.email})}))}}})(this)},translation(){return this.$language?this.$language.code:null}},watch:{fatal(t){null!==t&&this.$nextTick((()=>{try{let e=this.$refs.fatal.contentWindow.document;e.open(),e.write(t),e.close()}catch(e){console.error(e)}}))}},created(){this.$events.$on("offline",this.isOffline),this.$events.$on("online",this.isOnline),this.$events.$on("drop",this.drop)},destroyed(){this.$events.$off("offline",this.isOffline),this.$events.$off("online",this.isOnline),this.$events.$off("drop",this.drop)},methods:{drop(){this.$store.dispatch("drag",null)},isOnline(){this.offline=!1},isOffline(){!1===this.$system.isLocal&&(this.offline=!0)}}},fl={};var gl=Dt(ml,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-panel k-panel-inside",attrs:{"data-dragging":t.$store.state.drag,"data-loading":t.$store.state.isLoading,"data-translation":t.translation,"data-translation-default":t.defaultTranslation,dir:t.$translation.direction,tabindex:"0"}},[s("header",{staticClass:"k-panel-header"},[s("k-topbar",{attrs:{breadcrumb:t.$view.breadcrumb,license:t.$license,menu:t.$menu,view:t.$view},on:{search:function(e){return t.$refs.search.open()}}}),t._v(" "),s("k-search",{ref:"search",attrs:{type:t.$view.search||"pages",types:t.searchTypes}})],1),t._v(" "),s("main",{staticClass:"k-panel-view"},[t._t("default")],2),t._v(" "),s("k-form-buttons",{attrs:{lock:t.lock}}),t._v(" "),s("k-error-dialog"),t._v(" "),t.$store.state.dialog&&t.$store.state.dialog.props?[s("k-fiber-dialog",t._b({},"k-fiber-dialog",t.dialog,!1))]:t._e(),t._v(" "),t.fatal?[s("div",{staticClass:"k-fatal"},[s("div",{staticClass:"k-fatal-box"},[s("k-bar",[s("k-headline",{attrs:{slot:"left"},slot:"left"},[t._v("\n            The JSON response could not be parsed:\n          ")]),t._v(" "),s("k-button",{attrs:{slot:"right",icon:"cancel"},on:{click:function(e){return t.$store.dispatch("fatal",!1)}},slot:"right"},[t._v("\n            Close\n          ")])],1),t._v(" "),s("iframe",{ref:"fatal",staticClass:"k-fatal-iframe"})],1)])]:t._e(),t._v(" "),t.offline?s("div",{staticClass:"k-offline-warning"},[s("p",[t._v("The Panel is currently offline")])]):t._e(),t._v(" "),s("k-icons")],2)}),[],!1,(function(t){for(let e in fl)this[e]=fl[e]}),null,null,null);gl.options.__file="src/components/Layout/Inside.vue";var vl=gl.exports;const kl={inheritAttrs:!1,props:{layout:{type:String,default:"list"},image:[Object,Boolean],info:String,label:String,link:{type:[Boolean,String,Function]},options:{type:[Array,Function]},sortable:Boolean,flag:Object,target:String,text:String,width:String},computed:{title(){return this.text||"-"}},methods:{onOption(t){this.$emit("action",t),this.$emit("option",t)}}},bl={};var _l=Dt(kl,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"k-item",class:!!t.layout&&"k-"+t.layout+"-item",attrs:{"data-has-figure":Boolean(t.image),"data-has-info":Boolean(t.info),"data-has-label":Boolean(t.label),"data-has-options":Boolean(t.options),tabindex:"-1"},on:{click:function(e){return t.$emit("click",e)},dragstart:function(e){return t.$emit("drag",e)}}},[s("k-item-image",{attrs:{image:t.image,layout:t.layout,width:t.width}}),t._v(" "),t.sortable?s("k-sort-handle",{staticClass:"k-item-sort-handle"}):t._e(),t._v(" "),s("header",{staticClass:"k-item-content"},[s("h3",{staticClass:"k-item-title"},[t.link?s("k-link",{staticClass:"k-item-title-link",attrs:{target:t.target,to:t.link}},[s("span",{domProps:{innerHTML:t._s(t.title)}})]):s("span",{domProps:{innerHTML:t._s(t.title)}})],1),t._v(" "),t.info?s("p",{staticClass:"k-item-info",domProps:{innerHTML:t._s(t.info)}}):t._e()]),t._v(" "),t.flag||t.options||t.$slots.options?s("footer",{staticClass:"k-item-footer"},[s("nav",{staticClass:"k-item-buttons",on:{click:function(t){t.stopPropagation()}}},[t.flag?s("k-status-icon",t._b({},"k-status-icon",t.flag,!1)):t._e(),t._v(" "),t._t("options",[t.options?s("k-options-dropdown",{staticClass:"k-item-options-dropdown",attrs:{options:t.options},on:{option:t.onOption}}):t._e()])],2)]):t._e()],1)}),[],!1,(function(t){for(let e in bl)this[e]=bl[e]}),null,null,null);_l.options.__file="src/components/Layout/Item.vue";var yl=_l.exports;const $l={inheritAttrs:!1,props:{image:[Object,Boolean],layout:{type:String,default:"list"},width:String},computed:{back(){return this.image.back||"black"},ratio(){return"cards"===this.layout&&this.image.ratio||"1/1"},size(){switch(this.layout){case"cards":return"large";case"cardlets":return"medium";default:return"regular"}},sizes(){switch(this.width){case"1/2":case"2/4":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 44em, 27em";case"1/3":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 29.333em, 27em";case"1/4":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 22em, 27em";case"2/3":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 27em, 27em";case"3/4":return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 66em, 27em";default:return"(min-width: 30em) and (max-width: 65em) 59em, (min-width: 65em) 88em, 27em"}}}},wl={};var xl=Dt($l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.image?s("div",{staticClass:"k-item-figure",style:{background:t.$helper.color(t.back)}},[t.image.src?s("k-image",{staticClass:"k-item-image",attrs:{cover:t.image.cover,ratio:t.ratio,sizes:t.sizes,src:t.image.src,srcset:t.image.srcset}}):s("k-aspect-ratio",{attrs:{ratio:t.ratio}},[s("k-icon",{staticClass:"k-item-icon",attrs:{color:t.$helper.color(t.image.color),size:t.size,type:t.image.icon}})],1)],1):t._e()}),[],!1,(function(t){for(let e in wl)this[e]=wl[e]}),null,null,null);xl.options.__file="src/components/Layout/ItemImage.vue";var Sl=xl.exports;const Cl={inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},layout:{type:String,default:"list"},image:{type:[Object,Boolean],default:()=>({})},sortable:Boolean,empty:{type:[String,Object]},size:{type:String,default:"default"}},computed:{dragOptions(){return{sort:this.sortable,disabled:!1===this.sortable,draggable:".k-draggable-item"}}},methods:{onDragStart(t,e){this.$store.dispatch("drag",{type:"text",data:e})},imageOptions(t){let e=this.image,s=t.image;return!1!==e&&!1!==s&&("object"!=typeof e&&(e={}),"object"!=typeof s&&(s={}),o(o({},s),e))}}},El={};var Ol=Dt(Cl,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-draggable",{staticClass:"k-items",class:"k-"+t.layout+"-items",attrs:{handle:!0,options:t.dragOptions,"data-layout":t.layout,"data-size":t.size,list:t.items},on:{change:function(e){return t.$emit("change",e)},end:function(e){return t.$emit("sort",t.items,e)}}},[t._t("default",t._l(t.items,(function(e,i){return s("k-item",t._b({key:e.id||i,class:{"k-draggable-item":e.sortable},attrs:{image:t.imageOptions(e),layout:t.layout,sortable:t.sortable&&e.sortable,width:e.column},on:{click:function(s){return t.$emit("item",e,i)},drag:function(s){return t.onDragStart(s,e.dragText)},flag:function(s){return t.$emit("flag",e,i)},option:function(s){return t.$emit("option",s,e,i)}},nativeOn:{mouseover:function(s){return t.$emit("hover",s,e,i)}},scopedSlots:t._u([{key:"options",fn:function(){return[t._t("options",null,{item:e,index:i})]},proxy:!0}],null,!0)},"k-item",e,!1))})))],2)}),[],!1,(function(t){for(let e in El)this[e]=El[e]}),null,null,null);Ol.options.__file="src/components/Layout/Items.vue";var Tl=Ol.exports;const Il={inheritAttrs:!0,props:{autofocus:{type:Boolean,default:!0},centered:{type:Boolean,default:!1},dimmed:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},data:()=>({isOpen:!1,scrollTop:0}),methods:{close(){!1!==this.isOpen&&(this.isOpen=!1,this.$emit("close"),this.restoreScrollPosition(),this.$events.$off("keydown.esc",this.close),document.removeEventListener("focus",this.focustrap))},focus(){let t=this.$refs.overlay.querySelector("\n        [autofocus],\n        [data-autofocus]\n      ");null===t&&(t=this.$refs.overlay.querySelector("\n          input,\n          textarea,\n          select,\n          button\n        ")),t&&"function"==typeof t.focus?t.focus():this.$slots.default[0]&&this.$slots.default[0].context&&"function"==typeof this.$slots.default[0].context.focus&&this.$slots.default[0].context.focus()},focustrap(t){this.$refs.overlay&&!1===this.$refs.overlay.contains(t.target)&&this.focus()},open(){!0!==this.isOpen&&(this.storeScrollPosition(),this.isOpen=!0,this.$emit("open"),this.$events.$on("keydown.esc",this.close),setTimeout((()=>{!0===this.autofocus&&this.focus(),document.querySelector(".k-overlay > *").addEventListener("mousedown",(t=>t.stopPropagation())),this.$emit("ready")}),1))},restoreScrollPosition(){const t=document.querySelector(".k-panel-view");t&&t.scrollTop&&(t.scrollTop=this.scrollTop)},storeScrollPosition(){const t=document.querySelector(".k-panel-view");t&&t.scrollTop?this.scrollTop=t.scrollTop:this.scrollTop=0}}},Ll={};var Al=Dt(Il,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isOpen?s("portal",[s("div",t._g({ref:"overlay",staticClass:"k-overlay",class:t.$vnode.data.staticClass,attrs:{"data-centered":t.loading||t.centered,"data-dimmed":t.dimmed,"data-loading":t.loading},on:{mousedown:t.close}},t.$listeners),[t.loading?s("k-loader",{staticClass:"k-overlay-loader"}):t._t("default",null,{close:t.close,isOpen:t.isOpen})],2)]):t._e()}),[],!1,(function(t){for(let e in Ll)this[e]=Ll[e]}),null,null,null);Al.options.__file="src/components/Layout/Overlay.vue";var Fl=Al.exports;const Bl={};var jl=Dt({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-panel k-panel-outside",attrs:{dir:t.$translation.direction}},[t._t("default")],2)}),[],!1,(function(t){for(let e in Bl)this[e]=Bl[e]}),null,null,null);jl.options.__file="src/components/Layout/Outside.vue";var Dl=jl.exports;const Ml={};var Pl=Dt({props:{tab:String,tabs:Array,theme:String},data(){return{size:null,visibleTabs:this.tabs,invisibleTabs:[]}},computed:{current(){return(this.tabs.find((t=>t.name===this.tab))||this.tabs[0]||{}).name}},watch:{tabs(t){this.visibleTabs=t,this.invisibleTabs=[],this.resize(!0)}},created(){window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},methods:{resize(t){if(this.tabs&&!(this.tabs.length<=1)){if(this.tabs.length<=3)return this.visibleTabs=this.tabs,void(this.invisibleTabs=[]);if(window.innerWidth>=700){if("large"===this.size&&!t)return;this.visibleTabs=this.tabs,this.invisibleTabs=[],this.size="large"}else{if("small"===this.size&&!t)return;this.visibleTabs=this.tabs.slice(0,2),this.invisibleTabs=this.tabs.slice(2),this.size="small"}}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.tabs&&t.tabs.length>1?s("div",{staticClass:"k-tabs",attrs:{"data-theme":t.theme}},[s("nav",[t._l(t.visibleTabs,(function(e){return s("k-button",{key:e.name,staticClass:"k-tab-button",attrs:{link:e.link,current:t.current===e.name,icon:e.icon,tooltip:e.label}},[t._v("\n      "+t._s(e.label||e.text||e.name)+"\n\n      "),e.badge?s("span",{staticClass:"k-tabs-badge"},[t._v("\n        "+t._s(e.badge)+"\n      ")]):t._e()])})),t._v(" "),t.invisibleTabs.length?s("k-button",{staticClass:"k-tab-button k-tabs-dropdown-button",attrs:{text:t.$t("more"),icon:"dots"},on:{click:function(e){return e.stopPropagation(),t.$refs.more.toggle()}}}):t._e()],2),t._v(" "),t.invisibleTabs.length?s("k-dropdown-content",{ref:"more",staticClass:"k-tabs-dropdown",attrs:{align:"right"}},t._l(t.invisibleTabs,(function(e){return s("k-dropdown-item",{key:"more-"+e.name,attrs:{link:e.link,current:t.tab===e.name,icon:e.icon,tooltip:e.label}},[t._v("\n      "+t._s(e.label||e.text||e.name)+"\n    ")])})),1):t._e()],1):t._e()}),[],!1,(function(t){for(let e in Ml)this[e]=Ml[e]}),null,null,null);Pl.options.__file="src/components/Layout/Tabs.vue";var Rl=Pl.exports;const Nl={};var ql=Dt({props:{align:String}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-view",attrs:{"data-align":t.align}},[t._t("default")],2)}),[],!1,(function(t){for(let e in Nl)this[e]=Nl[e]}),null,null,null);ql.options.__file="src/components/Layout/View.vue";var zl=ql.exports;const Ul={components:{draggable:q},props:{data:Object,element:String,handle:[String,Boolean],list:[Array,Object],move:Function,options:Object},data(){return{listeners:o(o({},this.$listeners),{start:t=>{this.$store.dispatch("drag",{}),this.$listeners.start&&this.$listeners.start(t)},end:t=>{this.$store.dispatch("drag",null),this.$listeners.end&&this.$listeners.end(t)}})}},computed:{dragOptions(){let t=!1;return t=!0===this.handle?".k-sort-handle":this.handle,o({fallbackClass:"k-sortable-fallback",fallbackOnBody:!0,forceFallback:!0,ghostClass:"k-sortable-ghost",handle:t,scroll:document.querySelector(".k-panel-view")},this.options)}}},Hl={};var Vl=Dt(Ul,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("draggable",t._g(t._b({staticClass:"k-draggable",attrs:{"component-data":t.data,tag:t.element,list:t.list,move:t.move},scopedSlots:t._u([{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}],null,!0)},"draggable",t.dragOptions,!1),t.listeners),[t._t("default")],2)}),[],!1,(function(t){for(let e in Hl)this[e]=Hl[e]}),null,null,null);Vl.options.__file="src/components/Misc/Draggable.vue";var Kl=Vl.exports;const Wl={};var Gl=Dt({data:()=>({error:null}),errorCaptured(t){return this.$config.debug&&window.console.warn(t),this.error=t,!1},render(t){return this.error?this.$slots.error?this.$slots.error[0]:this.$scopedSlots.error?this.$scopedSlots.error({error:this.error}):t("k-box",{attrs:{theme:"negative"}},this.error.message||this.error):this.$slots.default[0]}},undefined,undefined,!1,(function(t){for(let e in Wl)this[e]=Wl[e]}),null,null,null);Gl.options.__file="src/components/Misc/ErrorBoundary.vue";var Yl=Gl.exports;const Jl={};var Xl=Dt({props:{link:String,size:{type:String},tag:{type:String,default:"h2"},theme:{type:String}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.tag,t._g({tag:"component",staticClass:"k-headline",attrs:{"data-theme":t.theme,"data-size":t.size}},t.$listeners),[t.link?s("k-link",{attrs:{to:t.link}},[t._t("default")],2):t._t("default")],2)}),[],!1,(function(t){for(let e in Jl)this[e]=Jl[e]}),null,null,null);Xl.options.__file="src/components/Misc/Headline.vue";var Zl=Xl.exports;const Ql={};var tc=Dt({props:{alt:String,color:String,back:String,size:String,type:String},computed:{isEmoji(){return this.$helper.string.hasEmoji(this.type)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{class:"k-icon k-icon-"+t.type,style:{background:t.$helper.color(t.back)},attrs:{"aria-label":t.alt,role:t.alt?"img":null,"aria-hidden":!t.alt,"data-back":t.back,"data-size":t.size}},[t.isEmoji?s("span",{staticClass:"k-icon-emoji"},[t._v(t._s(t.type))]):s("svg",{style:{color:t.$helper.color(t.color)},attrs:{viewBox:"0 0 16 16"}},[s("use",{attrs:{"xlink:href":"#icon-"+t.type}})])])}),[],!1,(function(t){for(let e in Ql)this[e]=Ql[e]}),null,null,null);tc.options.__file="src/components/Misc/Icon.vue";var ec=tc.exports;const sc={icons:window.panel.plugins.icons},ic={};var nc=Dt(sc,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"k-icons",attrs:{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",overflow:"hidden"}},[s("defs",t._l(t.$options.icons,(function(e,i){return s("symbol",{key:i,attrs:{id:"icon-"+i,viewBox:"0 0 16 16"},domProps:{innerHTML:t._s(e)}})})),0)])}),[],!1,(function(t){for(let e in ic)this[e]=ic[e]}),null,null,null);nc.options.__file="src/components/Misc/Icons.vue";var oc=nc.exports;const rc={props:{alt:String,back:String,cover:Boolean,ratio:String,sizes:String,src:String,srcset:String},data:()=>({loaded:{type:Boolean,default:!1},error:{type:Boolean,default:!1}}),computed:{ratioPadding(){return this.$helper.ratio(this.ratio||"1/1")}},created(){let t=new Image;t.onload=()=>{this.loaded=!0,this.$emit("load")},t.onerror=()=>{this.error=!0,this.$emit("error")},t.src=this.src}},ac={};var lc=Dt(rc,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",t._g({staticClass:"k-image",attrs:{"data-ratio":t.ratio,"data-back":t.back,"data-cover":t.cover}},t.$listeners),[s("span",{style:"padding-bottom:"+t.ratioPadding},[t.loaded?s("img",{key:t.src,attrs:{alt:t.alt||"",src:t.src,srcset:t.srcset,sizes:t.sizes},on:{dragstart:function(t){t.preventDefault()}}}):t._e(),t._v(" "),t.loaded||t.error?t._e():s("k-loader",{attrs:{position:"center",theme:"light"}}),t._v(" "),!t.loaded&&t.error?s("k-icon",{staticClass:"k-image-error",attrs:{type:"cancel"}}):t._e()],1)])}),[],!1,(function(t){for(let e in ac)this[e]=ac[e]}),null,null,null);lc.options.__file="src/components/Misc/Image.vue";var cc=lc.exports;const uc={};var dc=Dt({},(function(){var t=this.$createElement;return(this._self._c||t)("k-icon",{staticClass:"k-loader",attrs:{type:"loader"}})}),[],!1,(function(t){for(let e in uc)this[e]=uc[e]}),null,null,null);dc.options.__file="src/components/Misc/Loader.vue";var pc=dc.exports;const hc={};var mc=Dt({props:{value:{type:Number,default:0}},data(){return{state:this.value}},methods:{set(t){this.state=t}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("progress",{staticClass:"k-progress",attrs:{max:"100"},domProps:{value:t.state}},[t._v("\n  "+t._s(t.state)+"%\n")])}),[],!1,(function(t){for(let e in hc)this[e]=hc[e]}),null,null,null);mc.options.__file="src/components/Misc/Progress.vue";var fc=mc.exports;const gc={};var vc=Dt({props:{icon:{type:String,default:"sort"}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-icon",{staticClass:"k-sort-handle",attrs:{type:t.icon,"aria-hidden":"true"}})}),[],!1,(function(t){for(let e in gc)this[e]=gc[e]}),null,null,null);vc.options.__file="src/components/Misc/SortHandle.vue";var kc=vc.exports;const bc={props:{click:{type:Function,default:()=>{}},disabled:Boolean,responsive:Boolean,status:String,text:String,tooltip:String},computed:{icon(){return"draft"===this.status?"circle-outline":"unlisted"===this.status?"circle-half":"circle"},title(){let t=this.tooltip||this.text;return this.disabled&&(t+=` (${this.$t("disabled")})`),t}},methods:{onClick(){this.click(),this.$emit("click")}}},_c={};var yc=Dt(bc,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-button",{class:"k-status-icon k-status-icon-"+t.status,attrs:{disabled:t.disabled,icon:t.icon,responsive:t.responsive,tooltip:t.title},on:{click:t.onClick}},[t.text?[t._v("\n    "+t._s(t.text)+"\n  ")]:t._e()],2)}),[],!1,(function(t){for(let e in _c)this[e]=_c[e]}),null,null,null);yc.options.__file="src/components/Misc/StatusIcon.vue";var $c=yc.exports;const wc={};var xc=Dt({props:{align:String,size:String,theme:String}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-text",attrs:{"data-align":t.align,"data-size":t.size,"data-theme":t.theme}},[t._t("default")],2)}),[],!1,(function(t){for(let e in wc)this[e]=wc[e]}),null,null,null);xc.options.__file="src/components/Misc/Text.vue";var Sc=xc.exports;const Cc={};var Ec=Dt({props:{user:[Object,String]}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-user-info"},[t.user.avatar?s("k-image",{attrs:{cover:!0,src:t.user.avatar.url,ratio:"1/1"}}):s("k-icon",{attrs:{type:"user"}}),t._v("\n  "+t._s(t.user.name||t.user.email||t.user)+"\n")],1)}),[],!1,(function(t){for(let e in Cc)this[e]=Cc[e]}),null,null,null);Ec.options.__file="src/components/Misc/UserInfo.vue";var Oc=Ec.exports;const Tc={};var Ic=Dt({props:{crumbs:{type:Array,default:()=>[]},label:{type:String,default:"Breadcrumb"},view:Object},computed:{dropdown(){return this.segments.map((t=>o(o({},t),{text:t.label,icon:"angle-right"})))},segments(){return[{link:this.view.link,label:this.view.breadcrumbLabel,icon:this.view.icon,loading:this.$store.state.isLoading},...this.crumbs]}},methods:{isLast(t){return this.crumbs.length-1===t}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"k-breadcrumb",attrs:{"aria-label":t.label}},[s("k-dropdown",{staticClass:"k-breadcrumb-dropdown"},[s("k-button",{attrs:{icon:"road-sign"},on:{click:function(e){return t.$refs.dropdown.toggle()}}}),t._v(" "),s("k-dropdown-content",{ref:"dropdown",attrs:{options:t.dropdown,theme:"light"}})],1),t._v(" "),s("ol",t._l(t.segments,(function(e,i){return s("li",{key:i},[s("k-link",{staticClass:"k-breadcrumb-link",attrs:{title:e.text||e.label,to:e.link,"aria-current":!!t.isLast(i)&&"page"}},[e.loading?s("k-loader",{staticClass:"k-breadcrumb-icon"}):e.icon?s("k-icon",{staticClass:"k-breadcrumb-icon",attrs:{type:e.icon}}):t._e(),t._v(" "),s("span",{staticClass:"k-breadcrumb-link-text"},[t._v("\n          "+t._s(e.text||e.label)+"\n        ")])],1)],1)})),0)],1)}),[],!1,(function(t){for(let e in Tc)this[e]=Tc[e]}),null,null,null);Ic.options.__file="src/components/Navigation/Breadcrumb.vue";var Lc=Ic.exports;const Ac={inheritAttrs:!1,props:{autofocus:Boolean,current:[String,Boolean],disabled:Boolean,icon:String,id:[String,Number],link:String,responsive:Boolean,rel:String,role:String,target:String,tabindex:String,theme:String,tooltip:String,type:{type:String,default:"button"}},computed:{component(){return!0===this.disabled?"k-button-disabled":this.link?"k-button-link":"k-button-native"}},methods:{focus(){this.$refs.button.focus&&this.$refs.button.focus()},tab(){this.$refs.button.tab&&this.$refs.button.tab()},untab(){this.$refs.button.untab&&this.$refs.button.untab()}}},Fc={};var Bc=Dt(Ac,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.component,t._g(t._b({ref:"button",tag:"component"},"component",t.$props,!1),t.$listeners),[t._t("default")],2)}),[],!1,(function(t){for(let e in Fc)this[e]=Fc[e]}),null,null,null);Bc.options.__file="src/components/Navigation/Button.vue";var jc=Bc.exports;const Dc={inheritAttrs:!1,props:{icon:String,id:[String,Number],responsive:Boolean,theme:String,tooltip:String}},Mc={};var Pc=Dt(Dc,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"k-button",attrs:{id:t.id,"data-disabled":!0,"data-responsive":t.responsive,"data-theme":t.theme,title:t.tooltip}},[t.icon?s("k-icon",{staticClass:"k-button-icon",attrs:{type:t.icon,alt:t.tooltip}}):t._e(),t._v(" "),t.$slots.default?s("span",{staticClass:"k-button-text"},[t._t("default")],2):t._e()],1)}),[],!1,(function(t){for(let e in Mc)this[e]=Mc[e]}),null,null,null);Pc.options.__file="src/components/Navigation/ButtonDisabled.vue";var Rc=Pc.exports;const Nc={};var qc=Dt({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"k-button-group"},[t._t("default")],2)}),[],!1,(function(t){for(let e in Nc)this[e]=Nc[e]}),null,null,null);qc.options.__file="src/components/Navigation/ButtonGroup.vue";var zc=qc.exports;const Uc={inheritAttrs:!1,props:{autofocus:Boolean,current:[String,Boolean],icon:String,id:[String,Number],link:String,rel:String,responsive:Boolean,role:String,target:String,tabindex:String,theme:String,tooltip:String}},Hc={};var Vc=Dt(Uc,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-link",t._g({staticClass:"k-button",attrs:{id:t.id,"aria-current":t.current,autofocus:t.autofocus,"data-theme":t.theme,"data-responsive":t.responsive,rel:t.rel,role:t.role,tabindex:t.tabindex,target:t.target,title:t.tooltip,to:t.link}},t.$listeners),[t.icon?s("k-icon",{staticClass:"k-button-icon",attrs:{type:t.icon,alt:t.tooltip}}):t._e(),t._v(" "),t.$slots.default?s("span",{staticClass:"k-button-text"},[t._t("default")],2):t._e()],1)}),[],!1,(function(t){for(let e in Hc)this[e]=Hc[e]}),null,null,null);Vc.options.__file="src/components/Navigation/ButtonLink.vue";var Kc=Vc.exports,Wc={mounted(){this.$el.addEventListener("keyup",this.onTab,!0),this.$el.addEventListener("blur",this.onUntab,!0)},destroyed(){this.$el.removeEventListener("keyup",this.onTab,!0),this.$el.removeEventListener("blur",this.onUntab,!0)},methods:{focus(){this.$el.focus&&this.$el.focus()},onTab(t){9===t.keyCode&&this.$el.setAttribute("data-tabbed",!0)},onUntab(){this.$el.removeAttribute("data-tabbed")},tab(){this.$el.focus(),this.$el.setAttribute("data-tabbed",!0)},untab(){this.$el.removeAttribute("data-tabbed")}}};const Gc={mixins:[Wc],inheritAttrs:!1,props:{autofocus:Boolean,current:[String,Boolean],icon:String,id:[String,Number],responsive:Boolean,role:String,tabindex:String,theme:String,tooltip:String,type:{type:String,default:"button"}}},Yc={};var Jc=Dt(Gc,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",t._g({staticClass:"k-button",attrs:{id:t.id,"aria-current":t.current,autofocus:t.autofocus,"data-theme":t.theme,"data-responsive":t.responsive,role:t.role,tabindex:t.tabindex,title:t.tooltip,type:t.type}},t.$listeners),[t.icon?s("k-icon",{staticClass:"k-button-icon",attrs:{type:t.icon,alt:t.tooltip}}):t._e(),t._v(" "),t.$slots.default?s("span",{staticClass:"k-button-text"},[t._t("default")],2):t._e()],1)}),[],!1,(function(t){for(let e in Yc)this[e]=Yc[e]}),null,null,null);Jc.options.__file="src/components/Navigation/ButtonNative.vue";var Xc=Jc.exports;const Zc={};var Qc=Dt({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"k-dropdown",on:{click:function(t){t.stopPropagation()}}},[t._t("default")],2)}),[],!1,(function(t){for(let e in Zc)this[e]=Zc[e]}),null,null,null);Qc.options.__file="src/components/Navigation/Dropdown.vue";var tu=Qc.exports;let eu=null;const su={};var iu=Dt({props:{align:{type:String,default:"left"},options:[Array,Function],theme:{type:String,default:"dark"}},data:()=>({items:[],current:-1,isOpen:!1}),methods:{async fetchOptions(t){if(!this.options)return t(this.items);if("string"==typeof this.options){const e=await fetch(this.options);return t(await e.json())}"function"==typeof this.options?this.options(t):Array.isArray(this.options)&&t(this.options)},onOptionClick(t){"function"==typeof t.click?t.click.call(this):t.click&&this.$emit("action",t.click)},open(){this.reset(),eu&&eu!==this&&eu.close(),this.fetchOptions((t=>{this.$events.$on("keydown",this.navigate),this.$events.$on("click",this.close),this.items=t,this.isOpen=!0,eu=this,this.$emit("open")}))},reset(){this.current=-1,this.$events.$off("keydown",this.navigate),this.$events.$off("click",this.close)},close(){this.reset(),this.isOpen=eu=!1,this.$emit("close")},toggle(){this.isOpen?this.close():this.open()},focus(t=0){this.$children[t]&&this.$children[t].focus&&(this.current=t,this.$children[t].focus())},navigate(t){switch(t.code){case"Escape":case"ArrowLeft":this.close(),this.$emit("leave",t.code);break;case"ArrowUp":for(t.preventDefault();;){if(this.current--,this.current<0){this.close(),this.$emit("leave",t.code);break}if(this.$children[this.current]&&!1===this.$children[this.current].disabled){this.focus(this.current);break}}break;case"ArrowDown":for(t.preventDefault();;){if(this.current++,this.current>this.$children.length-1){const t=this.$children.filter((t=>!1===t.disabled));this.current=this.$children.indexOf(t[t.length-1]);break}if(this.$children[this.current]&&!1===this.$children[this.current].disabled){this.focus(this.current);break}}break;case"Tab":for(;;){if(this.current++,this.current>this.$children.length-1){this.close(),this.$emit("leave",t.code);break}if(this.$children[this.current]&&!1===this.$children[this.current].disabled)break}}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isOpen?s("div",{staticClass:"k-dropdown-content",attrs:{"data-align":t.align,"data-theme":t.theme}},[t._t("default",[t._l(t.items,(function(e,i){return["-"===e?s("hr",{key:t._uid+"-item-"+i}):s("k-dropdown-item",t._b({key:t._uid+"-item-"+i,ref:t._uid+"-item-"+i,refInFor:!0,on:{click:function(s){return t.onOptionClick(e)}}},"k-dropdown-item",e,!1),[t._v("\n        "+t._s(e.text)+"\n      ")])]}))])],2):t._e()}),[],!1,(function(t){for(let e in su)this[e]=su[e]}),null,null,null);iu.options.__file="src/components/Navigation/DropdownContent.vue";var nu=iu.exports;const ou={inheritAttrs:!1,props:{disabled:Boolean,icon:String,image:[String,Object],link:String,target:String,theme:String,upload:String,current:[String,Boolean]},data(){return{listeners:o(o({},this.$listeners),{click:t=>{this.$parent.close(),this.$emit("click",t)}})}},methods:{focus(){this.$refs.button.focus()},tab(){this.$refs.button.tab()}}},ru={};var au=Dt(ou,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-button",t._g(t._b({ref:"button",staticClass:"k-dropdown-item"},"k-button",t.$props,!1),t.listeners),[t._t("default")],2)}),[],!1,(function(t){for(let e in ru)this[e]=ru[e]}),null,null,null);au.options.__file="src/components/Navigation/DropdownItem.vue";var lu=au.exports;const cu={mixins:[Wc],props:{disabled:Boolean,rel:String,tabindex:[String,Number],target:String,title:String,to:[String,Function]},data(){return{relAttr:"_blank"===this.target?"noreferrer noopener":this.rel,listeners:o(o({},this.$listeners),{click:this.onClick})}},computed:{href(){return"function"==typeof this.to?"":"/"!==this.to[0]||this.target?this.to:this.$url(this.to)}},methods:{isRoutable(t){return!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&(!t.defaultPrevented&&((void 0===t.button||0===t.button)&&!this.target))},onClick(t){if(!0===this.disabled)return t.preventDefault(),!1;"function"==typeof this.to&&(t.preventDefault(),this.to()),this.isRoutable(t)&&(t.preventDefault(),this.$go(this.to)),this.$emit("click",t)}}},uu={};var du=Dt(cu,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.to&&!t.disabled?s("a",t._g({ref:"link",staticClass:"k-link",attrs:{href:t.href,rel:t.relAttr,tabindex:t.tabindex,target:t.target,title:t.title}},t.listeners),[t._t("default")],2):s("span",{staticClass:"k-link",attrs:{title:t.title,"data-disabled":""}},[t._t("default")],2)}),[],!1,(function(t){for(let e in uu)this[e]=uu[e]}),null,null,null);du.options.__file="src/components/Navigation/Link.vue";var pu=du.exports;const hu={};var mu=Dt({computed:{defaultLanguage(){return this.$languages.find((t=>!0===t.default))},language(){return this.$language},languages(){return this.$languages.filter((t=>!1===t.default))}},methods:{change(t){this.$emit("change",t),this.$go(this.$view.path+"?language="+t.code)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.languages.length?s("k-dropdown",[s("k-button",{attrs:{responsive:!0,icon:"globe"},on:{click:function(e){return t.$refs.languages.toggle()}}},[t._v("\n    "+t._s(t.language.name)+"\n  ")]),t._v(" "),t.languages?s("k-dropdown-content",{ref:"languages"},[s("k-dropdown-item",{on:{click:function(e){return t.change(t.defaultLanguage)}}},[t._v("\n      "+t._s(t.defaultLanguage.name)+"\n    ")]),t._v(" "),s("hr"),t._v(" "),t._l(t.languages,(function(e){return s("k-dropdown-item",{key:e.code,on:{click:function(s){return t.change(e)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])}))],2):t._e()],1):t._e()}),[],!1,(function(t){for(let e in hu)this[e]=hu[e]}),null,null,null);mu.options.__file="src/components/Navigation/Languages.vue";var fu=mu.exports;const gu={props:{align:{type:String,default:"right"},icon:{type:String,default:"dots"},options:{type:[Array,Function],default:()=>[]},text:{type:[Boolean,String],default:!0},theme:{type:String,default:"dark"}},computed:{hasSingleOption(){return Array.isArray(this.options)&&1===this.options.length}},methods:{onAction(t,e,s){this.$emit("action",t,e,s),this.$emit("option",t,e,s)},toggle(){this.$refs.options.toggle()}}},vu={};var ku=Dt(gu,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hasSingleOption?s("k-button",t._b({staticClass:"k-options-dropdown-toggle",attrs:{icon:t.options[0].icon||t.icon,tooltip:t.options[0].tooltip||t.options[0].text},on:{click:function(e){return t.onAction(t.options[0].option||t.options[0].click,t.options[0],0)}}},"k-button",t.options[0],!1),[!0===t.text?[t._v("\n    "+t._s(t.options[0].text)+"\n  ")]:!1!==t.text?[t._v("\n    "+t._s(t.text)+"\n  ")]:t._e()],2):t.options.length?s("k-dropdown",{staticClass:"k-options-dropdown"},[s("k-button",{staticClass:"k-options-dropdown-toggle",attrs:{icon:t.icon,tooltip:t.$t("options")},on:{click:function(e){return t.$refs.options.toggle()}}},[t.text&&!0!==t.text?[t._v("\n      "+t._s(t.text)+"\n    ")]:t._e()],2),t._v(" "),s("k-dropdown-content",{ref:"options",staticClass:"k-options-dropdown-content",attrs:{align:t.align,options:t.options},on:{action:t.onAction}})],1):t._e()}),[],!1,(function(t){for(let e in vu)this[e]=vu[e]}),null,null,null);ku.options.__file="src/components/Navigation/OptionsDropdown.vue";var bu=ku.exports;const _u={props:{align:{type:String,default:"left"},details:{type:Boolean,default:!1},dropdown:{type:Boolean,default:!0},keys:{type:Boolean,default:!1},limit:{type:Number,default:10},page:{type:Number,default:1},pageLabel:{type:String,default:()=>new Et("pagination.page")},total:{type:Number,default:0},prevLabel:{type:String,default:()=>new Et("prev")},nextLabel:{type:String,default:()=>new Et("next")},validate:{type:Function,default:()=>Promise.resolve()}},data(){return{currentPage:this.page}},computed:{show(){return this.pages>1},start(){return(this.currentPage-1)*this.limit+1},end(){let t=this.start-1+this.limit;return t>this.total?this.total:t},detailsText(){return 1===this.limit?this.start+" / ":this.start+"-"+this.end+" / "},pages(){return Math.ceil(this.total/this.limit)},hasPrev(){return this.start>1},hasNext(){return this.end<this.total},hasPages(){return this.total>this.limit},offset(){return this.start-1}},watch:{page(t){this.currentPage=parseInt(t)}},created(){!0===this.keys&&window.addEventListener("keydown",this.navigate,!1)},destroyed(){window.removeEventListener("keydown",this.navigate,!1)},methods:{goTo(t){this.validate(t).then((()=>{t<1&&(t=1),t>this.pages&&(t=this.pages),this.currentPage=t,this.$refs.dropdown&&this.$refs.dropdown.close(),this.$emit("paginate",{page:this.currentPage,start:this.start,end:this.end,limit:this.limit,offset:this.offset})})).catch((()=>{}))},prev(){this.goTo(this.currentPage-1)},next(){this.goTo(this.currentPage+1)},navigate(t){switch(t.code){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next()}}}},yu={};var $u=Dt(_u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("nav",{staticClass:"k-pagination",attrs:{"data-align":t.align}},[t.show?s("k-button",{attrs:{disabled:!t.hasPrev,tooltip:t.prevLabel,icon:"angle-left"},on:{click:t.prev}}):t._e(),t._v(" "),t.details?[t.dropdown?[s("k-dropdown",[s("k-button",{staticClass:"k-pagination-details",attrs:{disabled:!t.hasPages},on:{click:function(e){return t.$refs.dropdown.toggle()}}},[t.total>1?[t._v("\n            "+t._s(t.detailsText)+"\n          ")]:t._e(),t._v(t._s(t.total)+"\n        ")],2),t._v(" "),s("k-dropdown-content",{ref:"dropdown",staticClass:"k-pagination-selector",on:{open:function(e){t.$nextTick((function(){return t.$refs.page.focus()}))}}},[s("div",{staticClass:"k-pagination-settings"},[s("label",{attrs:{for:"k-pagination-page"}},[s("span",[t._v(t._s(t.pageLabel)+":")]),t._v(" "),s("select",{ref:"page",attrs:{id:"k-pagination-page"}},t._l(t.pages,(function(e){return s("option",{key:e,domProps:{selected:t.page===e,value:e}},[t._v("\n                  "+t._s(e)+"\n                ")])})),0)]),t._v(" "),s("k-button",{attrs:{icon:"check"},on:{click:function(e){return t.goTo(t.$refs.page.value)}}})],1)])],1)]:[s("span",{staticClass:"k-pagination-details"},[t.total>1?[t._v(t._s(t.detailsText))]:t._e(),t._v(t._s(t.total)+"\n      ")],2)]]:t._e(),t._v(" "),t.show?s("k-button",{attrs:{disabled:!t.hasNext,tooltip:t.nextLabel,icon:"angle-right"},on:{click:t.next}}):t._e()],2):t._e()}),[],!1,(function(t){for(let e in yu)this[e]=yu[e]}),null,null,null);$u.options.__file="src/components/Navigation/Pagination.vue";var wu=$u.exports;const xu={props:{prev:{type:[Boolean,Object],default:!1},next:{type:[Boolean,Object],default:!1}},methods:{button:t=>t||{disabled:!0,link:"#"}}},Su={};var Cu=Dt(xu,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-button-group",{staticClass:"k-prev-next"},[s("k-button",t._b({attrs:{icon:"angle-left"}},"k-button",t.button(t.prev),!1)),t._v(" "),s("k-button",t._b({attrs:{icon:"angle-right"}},"k-button",t.button(t.next),!1))],1)}),[],!1,(function(t){for(let e in Su)this[e]=Su[e]}),null,null,null);Cu.options.__file="src/components/Navigation/PrevNext.vue";var Eu=Cu.exports;const Ou={};var Tu=Dt({props:{types:{type:Object,default:()=>({})},type:String},data(){return{isLoading:!1,hasResults:!0,items:[],currentType:this.getType(this.type),q:null,selected:-1}},watch:{q(){this.search(this.q)},currentType(){this.search(this.q)},type(){this.currentType=this.getType(this.type)},types(){this.currentType=this.getType(this.type)}},created(){this.search=Y(this.search,250),this.$events.$on("keydown.cmd.shift.f",this.open)},destroyed(){this.$events.$off("keydown.cmd.shift.f",this.open)},methods:{changeType(t){this.currentType=this.getType(t),this.$nextTick((()=>{this.$refs.input.focus()}))},close(){this.$refs.overlay.close(),this.hasResults=!0,this.items=[],this.q=null},getType(t){return this.types[t]||this.types[Object.keys(this.types)[0]]},navigate(t){this.$go(t.link),this.close()},onDown(){this.selected<this.items.length-1&&this.select(this.selected+1)},onEnter(){let t=this.items[this.selected]||this.items[0];t&&this.navigate(t)},onHover(t,e,s){this.select(s)},onTab(){const t=this.items[this.selected];t&&this.navigate(t)},onUp(){this.selected>=0&&this.select(this.selected-1)},open(){this.$refs.overlay.open()},async search(t){this.isLoading=!0,this.$refs.types&&this.$refs.types.close();try{if(""===t)throw new Error;this.items=await this.currentType.search({query:t,limit:this.$config.search.limit})}catch(e){this.items=[]}finally{this.select(-1),this.isLoading=!1,this.hasResults=this.items.length>0}},select(t){if(this.selected=t,this.$refs.items){const e=this.$refs.items.$el.querySelectorAll(".k-item");[...e].forEach((t=>delete t.dataset.selected)),t>=0&&(e[t].dataset.selected=!0)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-overlay",{ref:"overlay"},[s("div",{staticClass:"k-search",attrs:{role:"search"}},[s("div",{staticClass:"k-search-input"},[s("k-dropdown",{staticClass:"k-search-types"},[s("k-button",{attrs:{icon:t.currentType.icon},on:{click:function(e){return t.$refs.types.toggle()}}},[t._v("\n          "+t._s(t.currentType.label)+":\n        ")]),t._v(" "),s("k-dropdown-content",{ref:"types"},t._l(t.types,(function(e,i){return s("k-dropdown-item",{key:i,attrs:{icon:e.icon},on:{click:function(e){return t.changeType(i)}}},[t._v("\n            "+t._s(e.label)+"\n          ")])})),1)],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],ref:"input",attrs:{placeholder:t.$t("search")+" …","aria-label":t.$t("search"),autofocus:!0,type:"text"},domProps:{value:t.q},on:{input:[function(e){e.target.composing||(t.q=e.target.value)},function(e){t.hasResults=!0}],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUp(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),t.onTab(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close(e)}]}}),t._v(" "),s("k-button",{staticClass:"k-search-close",attrs:{icon:t.isLoading?"loader":"cancel",tooltip:t.$t("close")},on:{click:t.close}})],1),t._v(" "),!t.q||t.hasResults&&!t.items.length?t._e():s("div",{staticClass:"k-search-results"},[t.items.length?s("k-items",{ref:"items",attrs:{items:t.items},on:{hover:t.onHover},nativeOn:{mouseout:function(e){return t.select(-1)}}}):t.hasResults?t._e():s("p",{staticClass:"k-search-empty"},[t._v("\n        "+t._s(t.$t("search.results.none"))+"\n      ")])],1)])])}),[],!1,(function(t){for(let e in Ou)this[e]=Ou[e]}),null,null,null);Tu.options.__file="src/components/Navigation/Search.vue";var Iu=Tu.exports;const Lu={props:{removable:Boolean},methods:{remove(){this.removable&&this.$emit("remove")},focus(){this.$refs.button.focus()}}},Au={};var Fu=Dt(Lu,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{ref:"button",staticClass:"k-tag",attrs:{tabindex:"0"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:(e.preventDefault(),t.remove(e))}}},[s("span",{staticClass:"k-tag-text"},[t._t("default")],2),t._v(" "),t.removable?s("span",{staticClass:"k-tag-toggle",on:{click:t.remove}},[t._v("×")]):t._e()])}),[],!1,(function(t){for(let e in Au)this[e]=Au[e]}),null,null,null);Fu.options.__file="src/components/Navigation/Tag.vue";var Bu=Fu.exports;const ju={props:{breadcrumb:Array,license:Boolean,menu:Array,title:String,view:Object},computed:{notification(){return this.$store.state.notification.type&&"error"!==this.$store.state.notification.type?this.$store.state.notification:null}}},Du={};var Mu=Dt(ju,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-topbar"},[s("k-view",[s("div",{staticClass:"k-topbar-wrapper"},[s("k-dropdown",{staticClass:"k-topbar-menu"},[s("k-button",{staticClass:"k-topbar-button k-topbar-menu-button",attrs:{tooltip:t.$t("menu"),icon:"bars"},on:{click:function(e){return t.$refs.menu.toggle()}}},[s("k-icon",{attrs:{type:"angle-down"}})],1),t._v(" "),s("k-dropdown-content",{ref:"menu",staticClass:"k-topbar-menu",attrs:{options:t.menu,theme:"light"}})],1),t._v(" "),s("k-breadcrumb",{staticClass:"k-topbar-breadcrumb",attrs:{crumbs:t.breadcrumb,view:t.view}}),t._v(" "),s("div",{staticClass:"k-topbar-signals"},[t.notification?[s("k-button",{staticClass:"k-topbar-notification k-topbar-signals-button",attrs:{theme:"positive"},on:{click:function(e){return t.$store.dispatch("notification/close")}}},[t._v("\n            "+t._s(t.notification.message)+"\n          ")])]:t.license?t._e():[s("div",{staticClass:"k-registration"},[s("p",[t._v(t._s(t.$t("license.unregistered")))]),t._v(" "),s("k-button",{staticClass:"k-topbar-signals-button",attrs:{responsive:!0,tooltip:t.$t("license.unregistered"),icon:"key"},on:{click:function(e){return t.$dialog("registration")}}},[t._v("\n              "+t._s(t.$t("license.register"))+"\n            ")]),t._v(" "),s("k-button",{staticClass:"k-topbar-signals-button",attrs:{responsive:!0,link:"https://getkirby.com/buy",target:"_blank",icon:"cart"}},[t._v("\n              "+t._s(t.$t("license.buy"))+"\n            ")])],1)],t._v(" "),s("k-form-indicator"),t._v(" "),s("k-button",{staticClass:"k-topbar-signals-button",attrs:{tooltip:t.$t("search"),icon:"search"},on:{click:function(e){return t.$emit("search")}}})],2)],1)])],1)}),[],!1,(function(t){for(let e in Du)this[e]=Du[e]}),null,null,null);Mu.options.__file="src/components/Navigation/Topbar.vue";var Pu=Mu.exports;const Ru={props:{empty:String,blueprint:String,lock:[Boolean,Object],parent:String,tab:Object},computed:{content(){return this.$store.getters["content/values"]()}},methods:{exists(t){return this.$helper.isComponent(`k-${t}-section`)},meetsCondition(t){if(!t.when)return!0;let e=!0;return Object.keys(t.when).forEach((s=>{this.content[s.toLowerCase()]!==t.when[s]&&(e=!1)})),e}}},Nu={};var qu=Dt(Ru,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0===t.tab.columns.length?s("k-box",{attrs:{text:t.empty,theme:"info"}}):s("k-grid",{staticClass:"k-sections",attrs:{gutter:"large"}},t._l(t.tab.columns,(function(e,i){return s("k-column",{key:t.parent+"-column-"+i,attrs:{width:e.width,sticky:e.sticky}},[t._l(e.sections,(function(n,o){return[t.meetsCondition(n)?[t.exists(n.type)?s("k-"+n.type+"-section",t._b({key:t.parent+"-column-"+i+"-section-"+o+"-"+t.blueprint,tag:"component",class:"k-section k-section-name-"+n.name,attrs:{blueprint:t.blueprint,column:e.width,lock:t.lock,name:n.name,parent:t.parent,timestamp:t.$view.timestamp},on:{submit:function(e){return t.$emit("submit",e)}}},"component",n,!1)):[s("k-box",{key:t.parent+"-column-"+i+"-section-"+o,attrs:{text:t.$t("error.section.type.invalid",{type:n.type}),theme:"negative"}})]]:t._e()]}))],2)})),1)}),[],!1,(function(t){for(let e in Nu)this[e]=Nu[e]}),null,null,null);qu.options.__file="src/components/Sections/Sections.vue";var zu=qu.exports,Uu={props:{blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number},methods:{load(){return this.$api.get(this.parent+"/sections/"+this.name)}}};const Hu={};var Vu=Dt({mixins:[Uu],data:()=>({headline:null,issue:null,text:null,theme:null}),created(){this.load().then((t=>{this.headline=t.options.headline,this.text=t.options.text,this.theme=t.options.theme||"info"})).catch((t=>{this.issue=t}))}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"k-info-section"},[s("k-headline",{staticClass:"k-info-section-headline"},[t._v("\n    "+t._s(t.headline)+"\n  ")]),t._v(" "),s("k-box",{attrs:{theme:t.theme}},[s("k-text",{domProps:{innerHTML:t._s(t.text)}})],1)],1)}),[],!1,(function(t){for(let e in Hu)this[e]=Hu[e]}),null,null,null);Vu.options.__file="src/components/Sections/InfoSection.vue";var Ku=Vu.exports,Wu={inheritAttrs:!1,props:{blueprint:String,column:String,parent:String,name:String,timestamp:Number},data:()=>({data:[],error:null,isLoading:!1,isProcessing:!1,options:{empty:null,headline:null,help:null,layout:"list",link:null,max:null,min:null,size:null,sortable:null},pagination:{page:null}}),computed:{headline(){return this.options.headline||" "},help(){return this.options.help},isInvalid(){return!!(this.options.min&&this.data.length<this.options.min)||!!(this.options.max&&this.data.length>this.options.max)},paginationId(){return"kirby$pagination$"+this.parent+"/"+this.name}},watch:{timestamp(){this.reload()}},methods:{items:t=>t,async load(t){t||(this.isLoading=!0),this.isProcessing=!0,null===this.pagination.page&&(this.pagination.page=localStorage.getItem(this.paginationId)||1);try{const t=await this.$api.get(this.parent+"/sections/"+this.name,{page:this.pagination.page});this.options=t.options,this.pagination=t.pagination,this.data=this.items(t.data)}catch(e){this.error=e.message}finally{this.isProcessing=!1,this.isLoading=!1}},paginate(t){localStorage.setItem(this.paginationId,t.page),this.pagination=t,this.reload()},async reload(){await this.load(!0)}}};const Gu={};var Yu=Dt({mixins:[Wu],computed:{add(){return this.options.add&&this.$permissions.pages.create}},created(){this.load(),this.$events.$on("page.changeStatus",this.reload)},destroyed(){this.$events.$off("page.changeStatus",this.reload)},methods:{create(){this.add&&this.$dialog("pages/create",{query:{parent:this.options.link||this.parent,view:this.parent,section:this.name}})},items(t){return t.map((e=>{const s=!1!==e.permissions.changeStatus;return e.flag={status:e.status,tooltip:this.$t("page.status"),disabled:!s,click:()=>{this.$dialog(this.$api.pages.url(e.id)+"/changeStatus")}},e.sortable=e.permissions.sort&&this.options.sortable,e.deletable=t.length>this.options.min,e.column=this.column,e.options=async t=>{try{t(await this.$api.pages.options(e.id,"list",{delete:e.deletable,sort:e.sortable}))}catch(s){this.$store.dispatch("notification/error",s)}},e}))},async sort(t){let e=null;if(t.added&&(e="added"),t.moved&&(e="moved"),e){this.isProcessing=!0;const i=t[e].element,n=t[e].newIndex+1+this.pagination.offset;try{await this.$api.pages.status(i.id,"listed",n),this.$store.dispatch("notification/success",":)")}catch(s){this.$store.dispatch("notification/error",{message:s.message,details:s.details}),await this.reload()}finally{this.isProcessing=!1}}},update(){this.reload(),this.$events.$emit("model.update")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return!1===t.isLoading?s("section",{staticClass:"k-pages-section",attrs:{"data-processing":t.isProcessing}},[s("header",{staticClass:"k-section-header"},[s("k-headline",{attrs:{link:t.options.link}},[t._v("\n      "+t._s(t.headline)+" "),t.options.min?s("abbr",{attrs:{title:t.$t("section.required")}},[t._v("*")]):t._e()]),t._v(" "),t.add?s("k-button-group",[s("k-button",{attrs:{icon:"add"},on:{click:t.create}},[t._v("\n        "+t._s(t.$t("add"))+"\n      ")])],1):t._e()],1),t._v(" "),t.error?[s("k-box",{attrs:{theme:"negative"}},[s("k-text",{attrs:{size:"small"}},[s("strong",[t._v("\n          "+t._s(t.$t("error.section.notLoaded",{name:t.name}))+":\n        ")]),t._v("\n        "+t._s(t.error)+"\n      ")])],1)]:[t.data.length?s("k-collection",{attrs:{layout:t.options.layout,help:t.help,items:t.data,pagination:t.pagination,sortable:!t.isProcessing&&t.options.sortable,size:t.options.size,"data-invalid":t.isInvalid},on:{change:t.sort,paginate:t.paginate}}):[s("k-empty",{attrs:{layout:t.options.layout,"data-invalid":t.isInvalid,icon:"page"},on:{click:t.create}},[t._v("\n        "+t._s(t.options.empty||t.$t("pages.empty"))+"\n      ")]),t._v(" "),s("footer",{staticClass:"k-collection-footer"},[t.help?s("k-text",{staticClass:"k-collection-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()],1)]]],2):t._e()}),[],!1,(function(t){for(let e in Gu)this[e]=Gu[e]}),null,null,null);Yu.options.__file="src/components/Sections/PagesSection.vue";var Ju=Yu.exports;const Xu={};var Zu=Dt({mixins:[Wu],computed:{add(){return!(!this.$permissions.files.create||!1===this.options.upload)&&this.options.upload}},created(){this.load(),this.$events.$on("model.update",this.reload)},destroyed(){this.$events.$off("model.update",this.reload)},methods:{action(t,e){switch(t){case"replace":this.$refs.upload.open({url:this.$urls.api+"/"+this.$api.files.url(e.parent,e.filename),accept:"."+e.extension+","+e.mime,multiple:!1})}},drop(t){if(!1===this.add)return!1;this.$refs.upload.drop(t,o(o({},this.add),{url:this.$urls.api+"/"+this.add.api}))},items(t){return t.map((e=>(e.sortable=this.options.sortable,e.column=this.column,e.options=async s=>{try{s(await this.$api.files.options(e.parent,e.filename,"list",{update:this.options.sortable,delete:t.length>this.options.min}))}catch(i){console.error(i),this.$store.dispatch("notification/error",i)}},e)))},replace(t){this.$refs.upload.open({url:this.$urls.api+"/"+this.$api.files.url(t.parent,t.filename),accept:t.mime,multiple:!1})},async sort(t){if(!1===this.options.sortable)return!1;this.isProcessing=!0,t=t.map((t=>t.id));try{await this.$api.patch(this.options.apiUrl+"/files/sort",{files:t,index:this.pagination.offset}),this.$store.dispatch("notification/success",":)")}catch(e){this.reload(),this.$store.dispatch("notification/error",e.message)}finally{this.isProcessing=!1}},update(){this.$events.$emit("model.update")},upload(){if(!1===this.add)return!1;this.$refs.upload.open(o(o({},this.add),{url:this.$urls.api+"/"+this.add.api}))},uploaded(){this.$events.$emit("file.create"),this.$events.$emit("model.update"),this.$store.dispatch("notification/success",":)")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return!1===t.isLoading?s("section",{staticClass:"k-files-section",attrs:{"data-processing":t.isProcessing}},[s("header",{staticClass:"k-section-header"},[s("k-headline",[t._v("\n      "+t._s(t.headline)+" "),t.options.min?s("abbr",{attrs:{title:t.$t("section.required")}},[t._v("*")]):t._e()]),t._v(" "),t.add?s("k-button-group",[s("k-button",{attrs:{icon:"upload"},on:{click:t.upload}},[t._v("\n        "+t._s(t.$t("add"))+"\n      ")])],1):t._e()],1),t._v(" "),t.error?[s("k-box",{attrs:{theme:"negative"}},[s("k-text",{attrs:{size:"small"}},[s("strong",[t._v(t._s(t.$t("error.section.notLoaded",{name:t.name}))+":")]),t._v("\n        "+t._s(t.error)+"\n      ")])],1)]:[s("k-dropzone",{attrs:{disabled:!1===t.add},on:{drop:t.drop}},[t.data.length?s("k-collection",{attrs:{help:t.help,items:t.data,layout:t.options.layout,pagination:t.pagination,sortable:!t.isProcessing&&t.options.sortable,size:t.options.size,"data-invalid":t.isInvalid},on:{sort:t.sort,paginate:t.paginate,action:t.action}}):[s("k-empty",{attrs:{layout:t.options.layout,"data-invalid":t.isInvalid,icon:"image"},on:{click:t.upload}},[t._v("\n          "+t._s(t.options.empty||t.$t("files.empty"))+"\n        ")]),t._v(" "),s("footer",{staticClass:"k-collection-footer"},[t.help?s("k-text",{staticClass:"k-collection-help",attrs:{theme:"help"},domProps:{innerHTML:t._s(t.help)}}):t._e()],1)]],2),t._v(" "),s("k-upload",{ref:"upload",on:{success:t.uploaded,error:t.reload}})]],2):t._e()}),[],!1,(function(t){for(let e in Xu)this[e]=Xu[e]}),null,null,null);Zu.options.__file="src/components/Sections/FilesSection.vue";var Qu=Zu.exports;const td={};var ed=Dt({mixins:[Uu],inheritAttrs:!1,data:()=>({fields:{},isLoading:!0,issue:null}),computed:{values(){return this.$store.getters["content/values"]()}},watch:{timestamp(){this.fetch()}},created(){this.input=Y(this.input,50),this.fetch()},methods:{input(t,e,s){this.$store.dispatch("content/update",[s,t[s]])},async fetch(){try{const t=await this.load();this.fields=t.fields,Object.keys(this.fields).forEach((t=>{this.fields[t].section=this.name,this.fields[t].endpoints={field:this.parent+"/fields/"+t,section:this.parent+"/sections/"+this.name,model:this.parent}}))}catch(t){this.issue=t}finally{this.isLoading=!1}},onSubmit(t){this.$events.$emit("keydown.cmd.s",t)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLoading?t._e():s("section",{staticClass:"k-fields-section"},[t.issue?[s("k-headline",{staticClass:"k-fields-issue-headline"},[t._v("\n      Error\n    ")]),t._v(" "),s("k-box",{attrs:{text:t.issue.message,theme:"negative"}})]:t._e(),t._v(" "),s("k-form",{attrs:{fields:t.fields,validate:!0,value:t.values,disabled:!1!==t.lock&&"lock"===t.lock.state},on:{input:t.input,submit:t.onSubmit}})],2)}),[],!1,(function(t){for(let e in td)this[e]=td[e]}),null,null,null);ed.options.__file="src/components/Sections/FieldsSection.vue";var sd=ed.exports;const id={props:{blueprint:String,next:Object,prev:Object,permissions:{type:Object,default:()=>({})},lock:{type:[Boolean,Object]},model:{type:Object,default:()=>({})},tab:{type:Object,default:()=>({columns:[]})},tabs:{type:Array,default:()=>[]}},computed:{id(){return this.model.id},isLocked(){return!1!==this.lock&&"lock"===this.lock.state}},watch:{"model.id":{handler(){this.content()},immediate:!0}},created(){this.$events.$on("model.reload",this.reload),this.$events.$on("keydown.left",this.toPrev),this.$events.$on("keydown.right",this.toNext)},destroyed(){this.$events.$off("model.reload",this.reload),this.$events.$off("keydown.left",this.toPrev),this.$events.$off("keydown.right",this.toNext)},methods:{content(){this.$store.dispatch("content/create",{id:this.id,api:this.$view.path,content:this.model.content})},async reload(){await this.$reload(),this.content()},toPrev(t){this.prev&&"body"===t.target.localName&&this.$go(this.prev.link)},toNext(t){this.next&&"body"===t.target.localName&&this.$go(this.next.link)}}};const nd={};var od=Dt(id,undefined,undefined,!1,(function(t){for(let e in nd)this[e]=nd[e]}),null,null,null);od.options.__file="src/components/Views/ModelView.vue";var rd=od.exports;const ad={};var ld=Dt({extends:rd,prevnext:!0,computed:{id(){return"users/"+this.model.id},options(){return async t=>{t(await this.$api.users.options(this.model.id))}},uploadApi(){return this.$urls.api+"/users/"+this.model.id+"/avatar"}},methods:{async action(t){switch(t){case"email":this.$dialog(`users/${this.model.id}/changeEmail`);break;case"language":this.$dialog(`users/${this.model.id}/changeLanguage`);break;case"password":this.$dialog(`users/${this.model.id}/changePassword`);break;case"picture.delete":await this.$api.users.deleteAvatar(this.model.id),this.avatar=null,this.$store.dispatch("notification/success",":)"),this.$reload();break;case"remove":this.$dialog(`users/${this.model.id}/delete`);break;case"rename":this.$dialog(`users/${this.model.id}/changeName`);break;case"role":this.$dialog(`users/${this.model.id}/changeRole`);break;default:this.$store.dispatch("notification/error","Not yet implemented")}},uploadedAvatar(){this.$store.dispatch("notification/success",":)"),this.$reload()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",{attrs:{lock:t.lock}},[s("div",{staticClass:"k-user-view",attrs:{"data-locked":t.isLocked}},[s("div",{staticClass:"k-user-profile"},[s("k-view",[t.model.avatar?[s("k-dropdown",[s("k-button",{staticClass:"k-user-view-image",attrs:{tooltip:t.$t("avatar"),disabled:t.isLocked},on:{click:function(e){return t.$refs.picture.toggle()}}},[t.model.avatar?s("k-image",{attrs:{cover:!0,src:t.model.avatar,ratio:"1/1"}}):t._e()],1),t._v(" "),s("k-dropdown-content",{ref:"picture"},[s("k-dropdown-item",{attrs:{icon:"upload"},on:{click:function(e){return t.$refs.upload.open()}}},[t._v("\n                "+t._s(t.$t("change"))+"\n              ")]),t._v(" "),s("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(e){return t.action("picture.delete")}}},[t._v("\n                "+t._s(t.$t("delete"))+"\n              ")])],1)],1)]:[s("k-button",{staticClass:"k-user-view-image",attrs:{tooltip:t.$t("avatar")},on:{click:function(e){return t.$refs.upload.open()}}},[s("k-icon",{attrs:{type:"user"}})],1)],t._v(" "),s("k-button-group",[s("k-button",{attrs:{disabled:!t.permissions.changeEmail||t.isLocked,icon:"email"},on:{click:function(e){return t.action("email")}}},[t._v("\n            "+t._s(t.$t("email"))+": "+t._s(t.model.email)+"\n          ")]),t._v(" "),s("k-button",{attrs:{disabled:!t.permissions.changeRole||t.isLocked,icon:"bolt"},on:{click:function(e){return t.action("role")}}},[t._v("\n            "+t._s(t.$t("role"))+": "+t._s(t.model.role)+"\n          ")]),t._v(" "),s("k-button",{attrs:{disabled:!t.permissions.changeLanguage||t.isLocked,icon:"globe"},on:{click:function(e){return t.action("language")}}},[t._v("\n            "+t._s(t.$t("language"))+": "+t._s(t.model.language)+"\n          ")])],1)],2)],1),t._v(" "),s("k-view",[s("k-header",{attrs:{editable:t.permissions.changeName&&!t.isLocked,tab:t.tab.name,tabs:t.tabs},on:{edit:function(e){return t.action("rename")}},scopedSlots:t._u([{key:"left",fn:function(){return[s("k-button-group",[s("k-dropdown",[s("k-button",{attrs:{disabled:t.isLocked,icon:"cog"},on:{click:function(e){return t.$refs.settings.toggle()}}},[t._v("\n                "+t._s(t.$t("settings"))+"\n              ")]),t._v(" "),s("k-dropdown-content",{ref:"settings",attrs:{options:t.options},on:{action:t.action}})],1),t._v(" "),s("k-languages-dropdown")],1)]},proxy:!0},{key:"right",fn:function(){return[t.$options.prevnext?s("k-prev-next",{attrs:{prev:t.prev,next:t.next}}):t._e()]},proxy:!0}])},[t.model.name&&0!==t.model.name.length?[t._v("\n          "+t._s(t.model.name)+"\n        ")]:s("span",{staticClass:"k-user-name-placeholder"},[t._v(t._s(t.$t("name"))+" …")])],2),t._v(" "),s("k-sections",{attrs:{blueprint:t.blueprint,empty:t.$t("user.blueprint",{blueprint:t.blueprint}),lock:t.lock,parent:"users/"+t.model.id,tab:t.tab}}),t._v(" "),s("k-upload",{ref:"upload",attrs:{url:t.uploadApi,multiple:!1,accept:"image/*"},on:{success:t.uploadedAvatar}})],1)],1)])}),[],!1,(function(t){for(let e in ad)this[e]=ad[e]}),null,null,null);ld.options.__file="src/components/Views/UserView.vue";var cd=ld.exports;const ud={};var dd=Dt({extends:cd,prevnext:!1},undefined,undefined,!1,(function(t){for(let e in ud)this[e]=ud[e]}),null,null,null);dd.options.__file="src/components/Views/AccountView.vue";var pd=dd.exports;const hd={};var md=Dt({props:{error:String,layout:String}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-"+t.layout,{tag:"component"},[s("k-view",{staticClass:"k-error-view"},[s("div",{staticClass:"k-error-view-content"},[s("k-text",[s("p",[s("k-icon",{staticClass:"k-error-view-icon",attrs:{type:"alert"}})],1),t._v(" "),t._t("default",[s("p",[t._v("\n            "+t._s(t.error)+"\n          ")])])],2)],1)])],1)}),[],!1,(function(t){for(let e in hd)this[e]=hd[e]}),null,null,null);md.options.__file="src/components/Views/ErrorView.vue";var fd=md.exports;const gd={};var vd=Dt({extends:rd,computed:{id(){return"files/"+this.model.id},options(){return async t=>{t(await this.$api.files.options(this.model.parent,this.model.filename))}},path(){return this.model.parent+"/files/"+this.model.filename},uploadApi(){return this.$urls.api+"/"+this.path}},methods:{action(t){switch(t){case"replace":this.$refs.upload.open({url:this.$urls.api+"/"+this.$api.files.url(this.model.parent,this.model.filename),accept:"."+this.model.extension+","+this.model.mime})}},onUpload(){this.$store.dispatch("notification/success",":)"),this.$reload()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",{attrs:{lock:t.lock}},[s("div",{staticClass:"k-file-view"},[s("k-file-preview",{attrs:{file:t.model}}),t._v(" "),s("k-view",{staticClass:"k-file-content",attrs:{"data-locked":t.isLocked}},[s("k-header",{attrs:{editable:t.permissions.changeName&&!t.isLocked,tab:t.tab.name,tabs:t.tabs},on:{edit:function(e){return t.$dialog(t.$view.path+"/changeName")}},scopedSlots:t._u([{key:"left",fn:function(){return[s("k-button-group",[s("k-button",{attrs:{link:t.model.url,responsive:!0,icon:"open",target:"_blank"}},[t._v("\n              "+t._s(t.$t("open"))+"\n            ")]),t._v(" "),s("k-dropdown",[s("k-button",{attrs:{responsive:!0,disabled:t.isLocked,icon:"cog"},on:{click:function(e){return t.$refs.settings.toggle()}}},[t._v("\n                "+t._s(t.$t("settings"))+"\n              ")]),t._v(" "),s("k-dropdown-content",{ref:"settings",attrs:{options:t.options},on:{action:t.action}})],1),t._v(" "),s("k-languages-dropdown")],1)]},proxy:!0},{key:"right",fn:function(){return[s("k-prev-next",{attrs:{prev:t.prev,next:t.next}})]},proxy:!0}])},[t._v("\n        "+t._s(t.model.filename)+"\n\n        ")]),t._v(" "),s("k-sections",{attrs:{blueprint:t.blueprint,empty:t.$t("file.blueprint",{template:t.blueprint}),lock:t.lock,parent:t.path,tab:t.tab}}),t._v(" "),s("k-upload",{ref:"upload",attrs:{url:t.uploadApi,accept:t.model.mime,multiple:!1},on:{success:t.onUpload}})],1)],1)])}),[],!1,(function(t){for(let e in gd)this[e]=gd[e]}),null,null,null);vd.options.__file="src/components/Views/FileView.vue";var kd=vd.exports;const bd={props:{isInstallable:Boolean,isInstalled:Boolean,isOk:Boolean,requirements:Object,translations:Array},data(){return{user:{name:"",email:"",language:this.$translation.code,password:"",role:"admin"}}},computed:{fields(){return{email:{label:this.$t("email"),type:"email",link:!1,autofocus:!0,required:!0},password:{label:this.$t("password"),type:"password",placeholder:this.$t("password")+" …",required:!0},language:{label:this.$t("language"),type:"select",options:this.translations,icon:"globe",empty:!1,required:!0}}},isReady(){return this.isOk&&this.isInstallable},isComplete(){return this.isOk&&this.isInstalled}},methods:{async install(){try{await this.$api.system.install(this.user),this.$store.dispatch("notification/success",this.$t("welcome")+"!"),this.$go("/")}catch(t){this.$store.dispatch("notification/error",t)}}}},_d={};var yd=Dt(bd,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-outside",[s("k-view",{staticClass:"k-installation-view",attrs:{align:"center"}},[t.isComplete?s("k-text",[s("k-headline",[t._v(t._s(t.$t("installation.completed")))]),t._v(" "),s("k-link",{attrs:{to:"/login"}},[t._v("\n        "+t._s(t.$t("login"))+"\n      ")])],1):t.isReady?s("form",{on:{submit:function(e){return e.preventDefault(),t.install(e)}}},[s("h1",{staticClass:"k-offscreen"},[t._v("\n        "+t._s(t.$t("installation"))+"\n      ")]),t._v(" "),s("k-fieldset",{attrs:{fields:t.fields,novalidate:!0},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),t._v(" "),s("k-button",{attrs:{type:"submit",icon:"check"}},[t._v("\n        "+t._s(t.$t("install"))+"\n      ")])],1):s("div",[s("k-headline",[t._v("\n        "+t._s(t.$t("installation.issues.headline"))+"\n      ")]),t._v(" "),s("ul",{staticClass:"k-installation-issues"},[!1===t.isInstallable?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.disabled"))}})],1):t._e(),t._v(" "),!1===t.requirements.php?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.php"))}})],1):t._e(),t._v(" "),!1===t.requirements.server?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.server"))}})],1):t._e(),t._v(" "),!1===t.requirements.mbstring?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.mbstring"))}})],1):t._e(),t._v(" "),!1===t.requirements.curl?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.curl"))}})],1):t._e(),t._v(" "),!1===t.requirements.accounts?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.accounts"))}})],1):t._e(),t._v(" "),!1===t.requirements.content?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.content"))}})],1):t._e(),t._v(" "),!1===t.requirements.media?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.media"))}})],1):t._e(),t._v(" "),!1===t.requirements.sessions?s("li",[s("k-icon",{attrs:{type:"alert"}}),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$t("installation.issues.sessions"))}})],1):t._e()]),t._v(" "),s("k-button",{attrs:{icon:"refresh"},on:{click:t.$reload}},[t._v("\n        "+t._s(t.$t("retry"))+"\n      ")])],1)],1)],1)}),[],!1,(function(t){for(let e in _d)this[e]=_d[e]}),null,null,null);yd.options.__file="src/components/Views/InstallationView.vue";var $d=yd.exports;const wd={components:{"k-login-plugin":window.panel.plugins.login||vs},props:{methods:Array,pending:Object},computed:{form(){return this.pending.email?"code":this.$user?null:"login"}},created(){this.$store.dispatch("content/clear")}},xd={};var Sd=Dt(wd,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-outside",["login"===t.form?s("k-view",{staticClass:"k-login-view",attrs:{align:"center"}},[s("k-login-plugin",{attrs:{methods:t.methods}})],1):"code"===t.form?s("k-view",{staticClass:"k-login-code-view",attrs:{align:"center"}},[s("k-login-code",t._b({},"k-login-code",t.$props,!1))],1):t._e()],1)}),[],!1,(function(t){for(let e in xd)this[e]=xd[e]}),null,null,null);Sd.options.__file="src/components/Views/LoginView.vue";var Cd=Sd.exports;const Ed={};var Od=Dt({extends:rd,props:{status:Object},computed:{id(){return"pages/"+this.model.id},options(){return async t=>{t(await this.$api.pages.options(this.model.id))}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",{attrs:{lock:t.lock}},[s("k-view",{staticClass:"k-page-view",attrs:{"data-locked":t.isLocked}},[s("k-header",{attrs:{editable:t.permissions.changeTitle&&!t.isLocked,tab:t.tab.name,tabs:t.tabs},on:{edit:function(e){return t.$dialog(t.$view.path+"/changeTitle")}},scopedSlots:t._u([{key:"left",fn:function(){return[s("k-button-group",[t.permissions.preview&&t.model.previewUrl?s("k-button",{attrs:{responsive:!0,link:t.model.previewUrl,target:"_blank",icon:"open"}},[t._v("\n            "+t._s(t.$t("open"))+"\n          ")]):t._e(),t._v(" "),t.status?s("k-status-icon",{attrs:{status:t.model.status,disabled:!t.permissions.changeStatus||t.isLocked,responsive:!0,text:t.status.label},on:{click:function(e){return t.$dialog(t.$view.path+"/changeStatus")}}}):t._e(),t._v(" "),s("k-dropdown",[s("k-button",{attrs:{responsive:!0,disabled:!0===t.isLocked,icon:"cog"},on:{click:function(e){return t.$refs.settings.toggle()}}},[t._v("\n              "+t._s(t.$t("settings"))+"\n            ")]),t._v(" "),s("k-dropdown-content",{ref:"settings",attrs:{options:t.options}})],1),t._v(" "),s("k-languages-dropdown")],1)]},proxy:!0},{key:"right",fn:function(){return[t.model.id?s("k-prev-next",{attrs:{prev:t.prev,next:t.next}}):t._e()]},proxy:!0}])},[t._v("\n      "+t._s(t.model.title)+"\n      ")]),t._v(" "),s("k-sections",{attrs:{blueprint:t.blueprint,empty:t.$t("page.blueprint",{template:t.blueprint}),lock:t.lock,parent:t.$api.pages.url(t.model.id),tab:t.tab}})],1)],1)}),[],!1,(function(t){for(let e in Ed)this[e]=Ed[e]}),null,null,null);Od.options.__file="src/components/Views/PageView.vue";var Td=Od.exports;const Id={};var Ld=Dt({props:{id:String},computed:{view(){return"k-"+this.id+"-plugin-view"}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",[s(t.view,{tag:"component"})],1)}),[],!1,(function(t){for(let e in Id)this[e]=Id[e]}),null,null,null);Ld.options.__file="src/components/Views/PluginView.vue";var Ad=Ld.exports;const Fd={};var Bd=Dt({data:()=>({isLoading:!1,issue:"",values:{password:null,passwordConfirmation:null}}),computed:{fields(){return{password:{autofocus:!0,label:this.$t("user.changePassword.new"),icon:"key",type:"password"},passwordConfirmation:{label:this.$t("user.changePassword.new.confirm"),icon:"key",type:"password"}}}},mounted(){this.$store.dispatch("title",this.$t("view.resetPassword"))},methods:{async submit(){if(!this.values.password||this.values.password.length<8)return this.issue=this.$t("error.user.password.invalid"),!1;if(this.values.password!==this.values.passwordConfirmation)return this.issue=this.$t("error.user.password.notSame"),!1;this.isLoading=!0;try{await this.$api.users.changePassword(this.$user.id,this.values.password),this.$store.dispatch("notification/success",":)"),this.$go("/")}catch(t){this.issue=t.message}finally{this.isLoading=!1}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",[s("k-view",{staticClass:"k-password-reset-view",attrs:{align:"center"}},[s("k-form",{attrs:{fields:t.fields,"submit-button":t.$t("change")},on:{submit:t.submit},scopedSlots:t._u([{key:"header",fn:function(){return[s("h1",{staticClass:"k-offscreen"},[t._v("\n          "+t._s(t.$t("view.resetPassword"))+"\n        ")]),t._v(" "),t.issue?s("k-login-alert",{on:{click:function(e){t.issue=null}}},[t._v("\n          "+t._s(t.issue)+"\n        ")]):t._e(),t._v(" "),s("k-user-info",{attrs:{user:t.$user}})]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"k-login-buttons"},[s("k-button",{staticClass:"k-login-button",attrs:{icon:"check",type:"submit"}},[t._v("\n            "+t._s(t.$t("change"))+" "),t.isLoading?[t._v("\n              …\n            ")]:t._e()],2)],1)]},proxy:!0}]),model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1)],1)}),[],!1,(function(t){for(let e in Fd)this[e]=Fd[e]}),null,null,null);Bd.options.__file="src/components/Views/ResetPasswordView.vue";var jd=Bd.exports;const Dd={};var Md=Dt({props:{languages:{type:Array,default:()=>[]},license:String,version:String},computed:{languagesCollection(){return this.languages.map((t=>o(o({},t),{image:{back:"black",color:"gray",icon:"globe"},link:()=>{this.$dialog(`languages/${t.id}/update`)},options:[{icon:"edit",text:this.$t("edit"),click(){this.$dialog(`languages/${t.id}/update`)}},{icon:"trash",text:this.$t("delete"),disabled:t.default&&1!==this.languages.length,click(){this.$dialog(`languages/${t.id}/delete`)}}]})))},primaryLanguage(){return this.languagesCollection.filter((t=>t.default))},secondaryLanguages(){return this.languagesCollection.filter((t=>!1===t.default))}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",[s("k-view",{staticClass:"k-settings-view"},[s("k-header",[t._v("\n      "+t._s(t.$t("view.settings"))+"\n    ")]),t._v(" "),s("section",{staticClass:"k-system-info"},[s("header",{staticClass:"k-settings-view-section-header"},[s("k-headline",[t._v("Kirby")])],1),t._v(" "),s("ul",{staticClass:"k-system-info-box"},[s("li",[s("dl",[s("dt",[t._v(t._s(t.$t("license")))]),t._v(" "),s("dd",[t.$license?[t._v("\n                "+t._s(t.license)+"\n              ")]:s("button",{staticClass:"k-system-unregistered",on:{click:function(e){return t.$dialog("registration")}}},[t._v("\n                "+t._s(t.$t("license.unregistered"))+"\n              ")])],2)])]),t._v(" "),s("li",[s("dl",[s("dt",[t._v(t._s(t.$t("version")))]),t._v(" "),s("dd",[t._v(t._s(t.version))])])])])]),t._v(" "),t.$multilang?s("section",{staticClass:"k-languages"},[t.languages.length>0?[s("section",{staticClass:"k-languages-section"},[s("header",{staticClass:"k-settings-view-section-header"},[s("k-headline",[t._v(t._s(t.$t("languages.default")))])],1),t._v(" "),s("k-collection",{attrs:{items:t.primaryLanguage}})],1),t._v(" "),s("section",{staticClass:"k-languages-section"},[s("header",{staticClass:"k-settings-view-section-header"},[s("k-headline",[t._v(t._s(t.$t("languages.secondary")))]),t._v(" "),s("k-button",{attrs:{icon:"add"},on:{click:function(e){return t.$dialog("languages/create")}}},[t._v("\n              "+t._s(t.$t("language.create"))+"\n            ")])],1),t._v(" "),t.secondaryLanguages.length?s("k-collection",{attrs:{items:t.secondaryLanguages}}):s("k-empty",{attrs:{icon:"globe"},on:{click:function(e){return t.$dialog("languages/create")}}},[t._v("\n            "+t._s(t.$t("languages.secondary.empty"))+"\n          ")])],1)]:0===t.languages.length?[s("header",{staticClass:"k-settings-view-section-header"},[s("k-headline",[t._v(t._s(t.$t("languages")))]),t._v(" "),s("k-button",{attrs:{icon:"add"},on:{click:function(e){return t.$dialog("languages/create")}}},[t._v("\n            "+t._s(t.$t("language.create"))+"\n          ")])],1),t._v(" "),s("k-empty",{attrs:{icon:"globe"},on:{click:function(e){return t.$dialog("languages/create")}}},[t._v("\n          "+t._s(t.$t("languages.empty"))+"\n        ")])]:t._e()],2):t._e()],1)],1)}),[],!1,(function(t){for(let e in Dd)this[e]=Dd[e]}),null,null,null);Md.options.__file="src/components/Views/SettingsView.vue";var Pd=Md.exports;const Rd={};var Nd=Dt({extends:rd,computed:{id:()=>"site"}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",{attrs:{lock:t.lock}},[s("k-view",{staticClass:"k-site-view",attrs:{"data-locked":t.isLocked}},[s("k-header",{attrs:{editable:t.permissions.changeTitle&&!t.isLocked,tabs:t.tabs,tab:t.tab.name},on:{edit:function(e){return t.$dialog("site/changeTitle")}},scopedSlots:t._u([{key:"left",fn:function(){return[s("k-button-group",[s("k-button",{attrs:{responsive:!0,link:t.model.previewUrl,target:"_blank",icon:"open"}},[t._v("\n            "+t._s(t.$t("open"))+"\n          ")]),t._v(" "),s("k-languages-dropdown")],1)]},proxy:!0}])},[t._v("\n      "+t._s(t.model.title)+"\n      ")]),t._v(" "),s("k-sections",{attrs:{blueprint:t.blueprint,empty:t.$t("site.blueprint"),lock:t.lock,tab:t.tab,parent:"site"},on:{submit:function(e){return t.$emit("submit",e)}}})],1)],1)}),[],!1,(function(t){for(let e in Rd)this[e]=Rd[e]}),null,null,null);Nd.options.__file="src/components/Views/SiteView.vue";var qd=Nd.exports;const zd={};var Ud=Dt({props:{role:Object,roles:Array,search:String,title:String,users:Object},computed:{items(){return this.users.data.map((t=>(t.options=async e=>{try{e(await this.$api.users.options(t.id,"list"))}catch(s){this.$store.dispatch("notification/error",s)}},t)))}},methods:{action(t,e){switch(t){case"edit":this.$go("/users/"+e.id);break;case"email":this.$dialog(`users/${e.id}/changeEmail`);break;case"role":this.$dialog(`users/${e.id}/changeRole`);break;case"rename":this.$dialog(`users/${e.id}/changeName`);break;case"password":this.$dialog(`users/${e.id}/changePassword`);break;case"language":this.$dialog(`users/${e.id}/changeLanguage`);break;case"remove":this.$dialog(`users/${e.id}/delete`)}},paginate(t){this.$reload({query:{page:t.page}})}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-inside",[s("k-view",{staticClass:"k-users-view"},[s("k-header",{scopedSlots:t._u([{key:"left",fn:function(){return[s("k-button-group",[s("k-button",{attrs:{disabled:!1===t.$permissions.users.create,icon:"add"},on:{click:function(e){return t.$dialog("users/create")}}},[t._v("\n            "+t._s(t.$t("user.create"))+"\n          ")])],1)]},proxy:!0},{key:"right",fn:function(){return[s("k-button-group",[s("k-dropdown",[s("k-button",{attrs:{responsive:!0,icon:"funnel"},on:{click:function(e){return t.$refs.roles.toggle()}}},[t._v("\n              "+t._s(t.$t("role"))+": "+t._s(t.role?t.role.title:t.$t("role.all"))+"\n            ")]),t._v(" "),s("k-dropdown-content",{ref:"roles",attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{icon:"bolt",link:"/users"}},[t._v("\n                "+t._s(t.$t("role.all"))+"\n              ")]),t._v(" "),s("hr"),t._v(" "),t._l(t.roles,(function(e){return s("k-dropdown-item",{key:e.id,attrs:{link:"/users/?role="+e.id,icon:"bolt"}},[t._v("\n                "+t._s(e.title)+"\n              ")])}))],2)],1)],1)]},proxy:!0}])},[t._v("\n      "+t._s(t.$t("view.users"))+"\n\n      ")]),t._v(" "),t.users.data.length>0?[s("k-collection",{attrs:{items:t.items,pagination:t.users.pagination},on:{paginate:t.paginate,action:t.action}})]:0===t.users.pagination.total?[s("k-empty",{attrs:{icon:"users"}},[t._v("\n        "+t._s(t.$t("role.empty"))+"\n      ")])]:t._e()],2)],1)}),[],!1,(function(t){for(let e in zd)this[e]=zd[e]}),null,null,null);Ud.options.__file="src/components/Views/UsersView.vue";var Hd=Ud.exports;const Vd={};var Kd=Dt({computed:{placeholder(){return this.field("code",{}).placeholder},languages(){return this.field("language",{options:[]}).options}},methods:{focus(){this.$refs.code.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-block-type-code-editor"},[s("k-input",{ref:"code",attrs:{buttons:!1,placeholder:t.placeholder,spellcheck:!1,value:t.content.code,type:"textarea"},on:{input:function(e){return t.update({code:e})}}}),t._v(" "),t.languages.length?s("div",{staticClass:"k-block-type-code-editor-language"},[s("k-icon",{attrs:{type:"code"}}),t._v(" "),s("k-input",{ref:"language",attrs:{empty:!1,options:t.languages,value:t.content.language,type:"select"},on:{input:function(e){return t.update({language:e})}}})],1):t._e()],1)}),[],!1,(function(t){for(let e in Vd)this[e]=Vd[e]}),null,null,null);Kd.options.__file="src/components/Blocks/Types/Code.vue";var Wd=Kd.exports,Gd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wd});const Yd={};var Jd=Dt({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-block-title",{attrs:{content:t.content,fieldset:t.fieldset},on:{dblclick:function(e){return t.$emit("open")}}})}),[],!1,(function(t){for(let e in Yd)this[e]=Yd[e]}),null,null,null);Jd.options.__file="src/components/Blocks/Types/Default.vue";var Xd=Jd.exports,Zd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xd});const Qd={};var tp=Dt({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{on:{dblclick:t.open}},[0===t.content.images.length?[s("li"),t._v(" "),s("li"),t._v(" "),s("li"),t._v(" "),s("li"),t._v(" "),s("li")]:t._l(t.content.images,(function(t){return s("li",{key:t.id},[s("img",{attrs:{src:t.url,alt:t.alt}})])}))],2)}),[],!1,(function(t){for(let e in Qd)this[e]=Qd[e]}),null,null,null);tp.options.__file="src/components/Blocks/Types/Gallery.vue";var ep=tp.exports,sp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ep});const ip={};var np=Dt({computed:{textField(){return this.field("text",{marks:!0})}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-block-type-heading-input",attrs:{"data-level":t.content.level}},[s("k-writer",{ref:"input",attrs:{inline:!0,marks:t.textField.marks,placeholder:t.textField.placeholder,value:t.content.text},on:{input:function(e){return t.update({text:e})}}})],1)}),[],!1,(function(t){for(let e in ip)this[e]=ip[e]}),null,null,null);np.options.__file="src/components/Blocks/Types/Heading.vue";var op=np.exports,rp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:op});const ap={};var lp=Dt({computed:{captionMarks(){return this.field("caption",{marks:!0}).marks},crop(){return this.content.crop||!1},src(){return"web"===this.content.location?this.content.src:!(!this.content.image[0]||!this.content.image[0].url)&&this.content.image[0].url},ratio(){return this.content.ratio||!1}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-block-figure",{attrs:{caption:t.content.caption,"caption-marks":t.captionMarks,"empty-text":t.$t("field.blocks.image.placeholder")+" …","is-empty":!t.src,"empty-icon":"image"},on:{open:t.open,update:t.update}},[t.src?[t.ratio?s("k-aspect-ratio",{attrs:{ratio:t.ratio,cover:t.crop}},[s("img",{attrs:{alt:t.content.alt,src:t.src}})]):s("img",{staticClass:"k-block-type-image-auto",attrs:{alt:t.content.alt,src:t.src}})]:t._e()],2)}),[],!1,(function(t){for(let e in ap)this[e]=ap[e]}),null,null,null);lp.options.__file="src/components/Blocks/Types/Image.vue";var cp=lp.exports,up=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:cp});const dp={};var pp=Dt({computed:{marks(){return this.field("text",{}).marks}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-input",{ref:"input",staticClass:"k-block-type-list-input",attrs:{marks:t.marks,value:t.content.text,type:"list"},on:{input:function(e){return t.update({text:e})}}})}),[],!1,(function(t){for(let e in dp)this[e]=dp[e]}),null,null,null);pp.options.__file="src/components/Blocks/Types/List.vue";var hp=pp.exports,mp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:hp});const fp={};var gp=Dt({computed:{placeholder(){return this.field("text",{}).placeholder}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-input",{ref:"input",staticClass:"k-block-type-markdown-input",attrs:{buttons:!1,placeholder:t.placeholder,spellcheck:!1,value:t.content.text,type:"textarea"},on:{input:function(e){return t.update({text:e})}}})}),[],!1,(function(t){for(let e in fp)this[e]=fp[e]}),null,null,null);gp.options.__file="src/components/Blocks/Types/Markdown.vue";var vp=gp.exports,kp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vp});const bp={};var _p=Dt({computed:{citationField(){return this.field("citation",{})},textField(){return this.field("text",{})}},methods:{focus(){this.$refs.text.focus()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-block-type-quote-editor"},[s("k-writer",{ref:"text",staticClass:"k-block-type-quote-text",attrs:{inline:!0,placeholder:t.textField.placeholder,value:t.content.text},on:{input:function(e){return t.update({text:e})}}}),t._v(" "),s("k-writer",{ref:"citation",staticClass:"k-block-type-quote-citation",attrs:{inline:!0,placeholder:t.citationField.placeholder,value:t.content.citation},on:{input:function(e){return t.update({citation:e})}}})],1)}),[],!1,(function(t){for(let e in bp)this[e]=bp[e]}),null,null,null);_p.options.__file="src/components/Blocks/Types/Quote.vue";var yp=_p.exports,$p=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yp});const wp={};var xp=Dt({inheritAttrs:!1,computed:{columns(){return this.table.columns||this.table.fields||{}},columnsCount(){return Object.keys(this.columns).length},rows(){return this.content.rows||[]},table(){let t=null;return Object.values(this.fieldset.tabs).forEach((e=>{e.fields.rows&&(t=e.fields.rows)})),t||{}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"k-block-type-table-preview",on:{dblclick:t.open}},[s("tr",t._l(t.columns,(function(e,i){return s("th",{key:i,attrs:{"data-align":e.align}},[t._v("\n      "+t._s(e.label)+"\n    ")])})),0),t._v(" "),0===t.rows.length?s("tr",[s("td",{attrs:{colspan:t.columnsCount}},[s("small",{staticClass:"k-block-type-table-preview-empty"},[t._v(t._s(t.$t("field.structure.empty")))])])]):t._l(t.rows,(function(e,i){return s("tr",{key:i},t._l(t.columns,(function(n,o){return s("td",{key:i+"-"+o,attrs:{"data-align":n.align}},[t._v("\n      "+t._s(n.before)+" "+t._s(e[o])+" "+t._s(n.after)+"\n    ")])})),0)}))],2)}),[],!1,(function(t){for(let e in wp)this[e]=wp[e]}),null,null,null);xp.options.__file="src/components/Blocks/Types/Table.vue";var Sp=xp.exports,Cp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Sp});const Ep={};var Op=Dt({computed:{textField(){return this.field("text",{})}},methods:{focus(){this.$refs.input.focus()}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("k-writer",{ref:"input",staticClass:"k-block-type-text-input",attrs:{inline:t.textField.inline,marks:t.textField.marks,nodes:t.textField.nodes,placeholder:t.textField.placeholder,value:t.content.text},on:{input:function(e){return t.update({text:e})}}})}),[],!1,(function(t){for(let e in Ep)this[e]=Ep[e]}),null,null,null);Op.options.__file="src/components/Blocks/Types/Text.vue";var Tp=Op.exports,Ip=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Tp});const Lp={};var Ap=Dt({computed:{captionMarks(){return this.field("caption",{marks:!0}).marks},video(){return this.$helper.embed.video(this.content.url)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-block-figure",{attrs:{caption:t.content.caption,"caption-marks":t.captionMarks,"empty-text":t.$t("field.blocks.video.placeholder")+" …","is-empty":!t.video,"empty-icon":"video"},on:{open:t.open,update:t.update}},[s("k-aspect-ratio",{attrs:{ratio:"16/9"}},[t.video?s("iframe",{attrs:{src:t.video}}):t._e()])],1)}),[],!1,(function(t){for(let e in Lp)this[e]=Lp[e]}),null,null,null);Ap.options.__file="src/components/Blocks/Types/Video.vue";var Fp=Ap.exports,Bp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fp});const jp={inheritAttrs:!1,props:{attrs:[Array,Object],content:[Array,Object],endpoints:Object,fieldset:Object,id:String,isBatched:Boolean,isFull:Boolean,isHidden:Boolean,isLastInBatch:Boolean,isSelected:Boolean,name:String,next:Object,prev:Object,type:String},data:()=>({skipFocus:!1}),computed:{className(){let t=["k-block-type-"+this.type];return this.fieldset.preview&&this.fieldset.preview!==this.type&&t.push("k-block-type-"+this.fieldset.preview),!1===this.wysiwyg&&t.push("k-block-type-default"),t},customComponent(){return this.wysiwyg?this.wysiwygComponent:"k-block-type-default"},listeners(){return o(o({},this.$listeners),{confirmToRemove:this.confirmToRemove,open:this.open})},tabs(){let t=this.fieldset.tabs;return Object.entries(t).forEach((([e,s])=>{Object.entries(s.fields).forEach((([s])=>{t[e].fields[s].section=this.name,t[e].fields[s].endpoints={field:this.endpoints.field+"/fieldsets/"+this.type+"/fields/"+s,section:this.endpoints.section,model:this.endpoints.model}}))})),t},wysiwyg(){return!1!==this.wysiwygComponent},wysiwygComponent(){if(!1===this.fieldset.preview)return!1;let t="k-block-type-"+this.type;return(this.$helper.isComponent(t)||!(!this.fieldset.preview||(t="k-block-type-"+this.fieldset.preview,!this.$helper.isComponent(t))))&&t}},methods:{close(){this.$refs.drawer.close()},confirmToRemove(){this.$refs.removeDialog.open()},focus(){!0!==this.skipFocus&&("function"==typeof this.$refs.editor.focus?this.$refs.editor.focus():this.$refs.container.focus())},goTo(t){t&&(this.skipFocus=!0,this.close(),this.$nextTick((()=>{t.$refs.container.focus(),t.open(),this.skipFocus=!1})))},open(){this.$refs.drawer.open()},remove(){this.$refs.removeDialog.close(),this.$emit("remove",this.id)}}},Dp={};var Mp=Dt(jp,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"k-block-container",class:"k-block-container-type-"+t.type,attrs:{"data-batched":t.isBatched,"data-disabled":t.fieldset.disabled,"data-hidden":t.isHidden,"data-last-in-batch":t.isLastInBatch,"data-selected":t.isSelected,"data-translate":t.fieldset.translate,tabindex:"0"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:e.ctrlKey&&e.shiftKey?(e.preventDefault(),t.$emit("sortDown")):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:e.ctrlKey&&e.shiftKey?(e.preventDefault(),t.$emit("sortUp")):null}],focus:function(e){return t.$emit("focus")},focusin:function(e){return t.$emit("focus")}}},[s("div",{staticClass:"k-block",class:t.className},[s(t.customComponent,t._g(t._b({ref:"editor",tag:"component"},"component",t.$props,!1),t.listeners))],1),t._v(" "),s("k-block-options",t._g({ref:"options",attrs:{"is-batched":t.isBatched,"is-full":t.isFull,"is-hidden":t.isHidden}},t.listeners)),t._v(" "),t.isBatched?t._e():s("k-form-drawer",{ref:"drawer",staticClass:"k-block-drawer",attrs:{icon:t.fieldset.icon||"box",tabs:t.tabs,title:t.fieldset.name,value:t.content},on:{close:function(e){return t.focus()},input:function(e){return t.$emit("update",e)}},scopedSlots:t._u([{key:"options",fn:function(){return[t.isHidden?s("k-button",{staticClass:"k-drawer-option",attrs:{icon:"hidden"},on:{click:function(e){return t.$emit("show")}}}):t._e(),t._v(" "),s("k-button",{staticClass:"k-drawer-option",attrs:{disabled:!t.prev,icon:"angle-left"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goTo(t.prev)}}}),t._v(" "),s("k-button",{staticClass:"k-drawer-option",attrs:{disabled:!t.next,icon:"angle-right"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.goTo(t.next)}}}),t._v(" "),s("k-button",{staticClass:"k-drawer-option",attrs:{icon:"trash"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.confirmToRemove(e)}}})]},proxy:!0}],null,!1,3450358529)}),t._v(" "),s("k-remove-dialog",{ref:"removeDialog",attrs:{text:t.$t("field.blocks.delete.confirm")},on:{submit:t.remove}})],1)}),[],!1,(function(t){for(let e in Dp)this[e]=Dp[e]}),null,null,null);Mp.options.__file="src/components/Blocks/Block.vue";var Pp=Mp.exports;const Rp={};var Np=Dt({inheritAttrs:!1,props:{empty:String,endpoints:Object,fieldsets:Object,fieldsetGroups:Object,group:String,max:{type:Number,default:null},value:{type:Array,default:()=>[]}},data(){return{batch:[],blocks:this.value,altKey:!1}},computed:{draggableOptions(){return{id:this._uid,handle:".k-block-handle",list:this.blocks,move:this.move,delay:10,data:{fieldsets:this.fieldsets,isFull:this.isFull},options:{group:this.group}}},hasFieldsets(){return Object.keys(this.fieldsets).length},isEmpty(){return 0===this.blocks.length},isFull(){return null!==this.max&&this.blocks.length>=this.max},selected(){return this.$store.state.blocks.current}},watch:{value(){this.blocks=this.value}},created(){this.outsideFocus=t=>{const e=document.querySelector(".k-overlay:last-of-type");!1!==this.$el.contains(t.target)||e&&!1!==e.contains(t.target)||this.select(null)},document.addEventListener("focus",this.outsideFocus,!0),this.onAlt=t=>{t.altKey?this.altKey=!0:this.altKey=!1},document.addEventListener("keydown",this.onAlt,!0),document.addEventListener("keyup",this.onAlt,!0)},destroyed(){document.removeEventListener("focus",this.outsideFocus),document.removeEventListener("keydown",this.onAlt),document.removeEventListener("keyup",this.onAlt)},methods:{async add(t="text",e){const s=await this.$api.get(this.endpoints.field+"/fieldsets/"+t);this.blocks.splice(e,0,s),this.save(),this.$nextTick((()=>{this.focusOrOpen(s)}))},addToBatch(t){null!==this.selected&&!1===this.batch.includes(this.selected)&&(this.batch.push(this.selected),this.$store.dispatch("blocks/current",null)),!1===this.batch.includes(t.id)&&this.batch.push(t.id)},choose(t){if(1===Object.keys(this.fieldsets).length){const e=Object.values(this.fieldsets)[0].type;this.add(e,t)}else this.$refs.selector.open(t)},chooseToConvert(t){this.$refs.selector.open(t,{disabled:[t.type],headline:this.$t("field.blocks.changeType"),event:"convert"})},click(t){this.$emit("click",t)},confirmToRemoveAll(){this.$refs.removeAll.open()},confirmToRemoveSelected(){this.$refs.removeSelected.open()},async convert(t,e){const s=this.blocks.findIndex((t=>t.id===e.id));if(-1===s)return!1;const i=t=>{let e={};return Object.values(t.tabs).forEach((t=>{e=o(o({},e),t.fields)})),e},n=this.blocks[s],r=await this.$api.get(this.endpoints.field+"/fieldsets/"+t),a=this.fieldsets[n.type],l=this.fieldsets[t];if(!l)return!1;let c=r.content;const u=i(a),d=i(l);Object.entries(d).forEach((([t,e])=>{const s=u[t];s&&s.type===e.type&&n.content[t]&&(c[t]=n.content[t])})),this.blocks[s]=o(o({},r),{id:n.id,content:c}),this.save()},async duplicate(t,e){const s=o(o({},this.$helper.clone(t)),{id:this.$helper.uuid()});this.blocks.splice(e+1,0,s),this.save()},fieldset(t){return this.fieldsets[t.type]||{icon:"box",name:t.type,tabs:{content:{fields:{}}},type:t.type}},focus(t){this.$refs["block-"+t.id]&&this.$refs["block-"+t.id][0].focus()},focusOrOpen(t){this.fieldsets[t.type].wysiwyg?this.focus(t):this.open(t)},hide(t){this.$set(t,"isHidden",!0),this.save()},isBatched(t){return this.batch.includes(t.id)},isLastInBatch(t){const[e]=this.batch.slice(-1);return e&&t.id===e},isSelected(t){return this.selected&&this.selected===t.id},move(t){if(t.from!==t.to){const e=t.draggedContext.element,s=t.relatedContext.component.componentData||t.relatedContext.component.$parent.componentData;if(!1===Object.keys(s.fieldsets).includes(e.type))return!1;if(!0===s.isFull)return!1}return!0},open(t){this.$refs["block-"+t.id]&&this.$refs["block-"+t.id][0].open()},prevNext(t){if(this.blocks[t]){let e=this.blocks[t];if(this.$refs["block-"+e.id])return this.$refs["block-"+e.id][0]}},remove(t){const e=this.blocks.findIndex((e=>e.id===t.id));-1!==e&&(this.selected&&this.selected.id===t.id&&this.select(null),this.$delete(this.blocks,e),this.save())},removeAll(){this.blocks=[],this.save(),this.$refs.removeAll.close()},removeSelected(){this.batch.forEach((t=>{const e=this.blocks.findIndex((e=>e.id===t));-1!==e&&this.$delete(this.blocks,e)})),this.batch=[],this.$store.dispatch("blocks/current",null),this.save(),this.$refs.removeSelected.close()},save(){this.$emit("input",this.blocks)},select(t){t&&this.altKey?this.addToBatch(t):(this.batch=[],this.$store.dispatch("blocks/current",t?t.id:null))},show(t){this.$set(t,"isHidden",!1),this.save()},sort(t,e,s){if(s<0)return;let i=this.$helper.clone(this.blocks);i.splice(e,1),i.splice(s,0,t),this.blocks=i,this.save(),this.$nextTick((()=>{this.focus(t)}))},update(t,e){const s=this.blocks.findIndex((e=>e.id===t.id));-1!==s&&Object.entries(e).forEach((([t,e])=>{this.$set(this.blocks[s].content,t,e)})),this.save()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"k-blocks",attrs:{"data-empty":0===t.blocks.length,"data-alt":t.altKey}},[t.hasFieldsets?[s("k-draggable",t._b({staticClass:"k-blocks-list",on:{sort:t.save},scopedSlots:t._u([{key:"footer",fn:function(){return[s("k-empty",{staticClass:"k-blocks-empty",attrs:{icon:"box"},on:{click:function(e){return t.choose(t.blocks.length)}}},[t._v("\n          "+t._s(t.empty||t.$t("field.blocks.empty"))+"\n        ")])]},proxy:!0}],null,!1,2703795288)},"k-draggable",t.draggableOptions,!1),t._l(t.blocks,(function(e,i){return s("k-block",t._b({key:e.id,ref:"block-"+e.id,refInFor:!0,attrs:{endpoints:t.endpoints,fieldset:t.fieldset(e),"is-batched":t.isBatched(e),"is-last-in-batch":t.isLastInBatch(e),"is-full":t.isFull,"is-hidden":!0===e.isHidden,"is-selected":t.isSelected(e),next:t.prevNext(i+1),prev:t.prevNext(i-1)},on:{append:function(e){return t.add(e,i+1)},blur:function(e){return t.select(null)},choose:function(e){return t.choose(e)},chooseToAppend:function(e){return t.choose(i+1)},chooseToConvert:function(s){return t.chooseToConvert(e)},chooseToPrepend:function(e){return t.choose(i)},confirmToRemoveSelected:t.confirmToRemoveSelected,duplicate:function(s){return t.duplicate(e,i)},focus:function(s){return t.select(e)},hide:function(s){return t.hide(e)},prepend:function(e){return t.add(e,i)},remove:function(s){return t.remove(e)},sortDown:function(s){return t.sort(e,i,i+1)},sortUp:function(s){return t.sort(e,i,i-1)},show:function(s){return t.show(e)},update:function(s){return t.update(e,s)}}},"k-block",e,!1))})),1),t._v(" "),s("k-block-selector",{ref:"selector",attrs:{fieldsets:t.fieldsets,"fieldset-groups":t.fieldsetGroups},on:{add:t.add,convert:t.convert}}),t._v(" "),s("k-remove-dialog",{ref:"removeAll",attrs:{text:t.$t("field.blocks.delete.confirm.all")},on:{submit:t.removeAll}}),t._v(" "),s("k-remove-dialog",{ref:"removeSelected",attrs:{text:t.$t("field.blocks.delete.confirm.selected")},on:{submit:t.removeSelected}})]:[s("k-box",{attrs:{theme:"info"}},[t._v("\n      No fieldsets yet\n    ")])]],2)}),[],!1,(function(t){for(let e in Rp)this[e]=Rp[e]}),null,null,null);Np.options.__file="src/components/Blocks/Blocks.vue";var qp=Np.exports;const zp={inheritAttrs:!1,props:{caption:String,captionMarks:[Boolean,Array],cover:{type:Boolean,default:!0},isEmpty:Boolean,emptyIcon:String,emptyText:String,ratio:String},computed:{ratioPadding(){return this.$helper.ratio(this.ratio||"16/9")}}},Up={};var Hp=Dt(zp,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("figure",{staticClass:"k-block-figure"},[t.isEmpty?s("k-button",{staticClass:"k-block-figure-empty",attrs:{icon:t.emptyIcon},on:{click:function(e){return t.$emit("open")}}},[t._v("\n    "+t._s(t.emptyText)+"\n  ")]):s("span",{staticClass:"k-block-figure-container",on:{dblclick:function(e){return t.$emit("open")}}},[t._t("default")],2),t._v(" "),t.caption?s("figcaption",[s("k-writer",{attrs:{inline:!0,marks:t.captionMarks,value:t.caption},on:{input:function(e){return t.$emit("update",{caption:e})}}})],1):t._e()],1)}),[],!1,(function(t){for(let e in Up)this[e]=Up[e]}),null,null,null);Hp.options.__file="src/components/Blocks/BlockFigure.vue";var Vp=Hp.exports;const Kp={props:{isBatched:Boolean,isFull:Boolean,isHidden:Boolean},methods:{open(){this.$refs.options.open()}}},Wp={};var Gp=Dt(Kp,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dropdown",{staticClass:"k-block-options"},[t.isBatched?[s("k-button",{staticClass:"k-block-options-button",attrs:{tooltip:t.$t("remove"),icon:"trash"},nativeOn:{mousedown:function(e){return e.preventDefault(),t.$emit("confirmToRemoveSelected")}}})]:[s("k-button",{staticClass:"k-block-options-button",attrs:{tooltip:t.$t("edit"),icon:"edit"},on:{click:function(e){return t.$emit("open")}}}),t._v(" "),s("k-button",{staticClass:"k-block-options-button",attrs:{disabled:t.isFull,tooltip:t.$t("insert.after"),icon:"add"},on:{click:function(e){return t.$emit("chooseToAppend")}}}),t._v(" "),s("k-button",{staticClass:"k-block-options-button",attrs:{tooltip:t.$t("delete"),icon:"trash"},on:{click:function(e){return t.$emit("confirmToRemove")}}}),t._v(" "),s("k-button",{staticClass:"k-block-options-button",attrs:{tooltip:t.$t("more"),icon:"dots"},on:{click:function(e){return t.$refs.options.toggle()}}}),t._v(" "),s("k-button",{staticClass:"k-block-options-button k-block-handle",attrs:{tooltip:t.$t("sort"),icon:"sort"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.$emit("sortUp"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.$emit("sortDown"))}]}}),t._v(" "),s("k-dropdown-content",{ref:"options",attrs:{align:"right"}},[s("k-dropdown-item",{attrs:{disabled:t.isFull,icon:"angle-up"},on:{click:function(e){return t.$emit("chooseToPrepend")}}},[t._v("\n        "+t._s(t.$t("insert.before"))+"\n      ")]),t._v(" "),s("k-dropdown-item",{attrs:{disabled:t.isFull,icon:"angle-down"},on:{click:function(e){return t.$emit("chooseToAppend")}}},[t._v("\n        "+t._s(t.$t("insert.after"))+"\n      ")]),t._v(" "),s("hr"),t._v(" "),s("k-dropdown-item",{attrs:{icon:"edit"},on:{click:function(e){return t.$emit("open")}}},[t._v("\n        "+t._s(t.$t("edit"))+"\n      ")]),t._v(" "),s("k-dropdown-item",{attrs:{icon:"refresh"},on:{click:function(e){return t.$emit("chooseToConvert")}}},[t._v("\n        "+t._s(t.$t("field.blocks.changeType"))+"\n      ")]),t._v(" "),s("hr"),t._v(" "),s("k-dropdown-item",{attrs:{icon:t.isHidden?"preview":"hidden"},on:{click:function(e){return t.$emit(t.isHidden?"show":"hide")}}},[t._v("\n        "+t._s(!0===t.isHidden?t.$t("show"):t.$t("hide"))+"\n      ")]),t._v(" "),s("k-dropdown-item",{attrs:{disabled:t.isFull,icon:"copy"},on:{click:function(e){return t.$emit("duplicate")}}},[t._v("\n        "+t._s(t.$t("duplicate"))+"\n      ")]),t._v(" "),s("hr"),t._v(" "),s("k-dropdown-item",{attrs:{icon:"trash"},on:{click:function(e){return t.$emit("confirmToRemove")}}},[t._v("\n        "+t._s(t.$t("delete"))+"\n      ")])],1)]],2)}),[],!1,(function(t){for(let e in Wp)this[e]=Wp[e]}),null,null,null);Gp.options.__file="src/components/Blocks/BlockOptions.vue";var Yp=Gp.exports;const Jp={};var Xp=Dt({inheritAttrs:!1,props:{endpoint:String,fieldsets:Object,fieldsetGroups:Object},data(){return{disabled:[],headline:null,payload:null,event:"add",groups:this.createGroups()}},methods:{add(t){this.$emit(this.event,t,this.payload),this.$refs.dialog.close()},createGroups(){let t={},e=0;const s=this.fieldsetGroups||{blocks:{label:this.$t("field.blocks.fieldsets.label"),sets:Object.keys(this.fieldsets)}};return Object.keys(s).forEach((i=>{let n=s[i];n.open=!1!==n.open,n.fieldsets=n.sets.filter((t=>this.fieldsets[t])).map((t=>(e++,o(o({},this.fieldsets[t]),{index:e})))),0!==n.fieldsets.length&&(t[i]=n)})),t},navigate(t){const e=this.$refs["fieldset-"+t];e&&e[0]&&e[0].focus()},open(t,e={}){const s=o({event:"add",disabled:[],headline:null},e);this.event=s.event,this.disabled=s.disabled,this.headline=s.headline,this.payload=t,this.$refs.dialog.open()}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("k-dialog",{ref:"dialog",staticClass:"k-block-selector",attrs:{"cancel-button":!1,"submit-button":!1,size:"medium"}},[t.headline?s("k-headline",[t._v("\n    "+t._s(t.headline)+"\n  ")]):t._e(),t._v(" "),t._l(t.groups,(function(e,i){return s("details",{key:i,attrs:{open:e.open}},[s("summary",[t._v(t._s(e.label))]),t._v(" "),s("div",{staticClass:"k-block-types"},t._l(e.fieldsets,(function(e){return s("k-button",{key:e.name,ref:"fieldset-"+e.index,refInFor:!0,attrs:{disabled:t.disabled.includes(e.type),icon:e.icon||"box"},on:{keydown:[function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"up",38,s.key,["Up","ArrowUp"])?null:t.navigate(e.index-1)},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"down",40,s.key,["Down","ArrowDown"])?null:t.navigate(e.index+1)}],click:function(s){return t.add(e.type)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),1)])}))],2)}),[],!1,(function(t){for(let e in Jp)this[e]=Jp[e]}),null,null,null);Xp.options.__file="src/components/Blocks/BlockSelector.vue";var Zp=Xp.exports;const Qp={};var th=Dt({inheritAttrs:!1,props:{fieldset:Object,content:Object},computed:{icon(){return this.fieldset.icon||"box"},label(){if(!this.fieldset.label||0===this.fieldset.label.length)return!1;if(this.fieldset.label===this.fieldset.name)return!1;const t=this.$helper.string.template(this.fieldset.label,this.content);return"…"!==t&&t},name(){return this.fieldset.name}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._g({staticClass:"k-block-title"},t.$listeners),[s("k-icon",{staticClass:"k-block-icon",attrs:{type:t.icon}}),t._v(" "),s("span",{staticClass:"k-block-name"},[t._v("\n    "+t._s(t.name)+"\n  ")]),t._v(" "),t.label?s("span",{staticClass:"k-block-label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e()],1)}),[],!1,(function(t){for(let e in Qp)this[e]=Qp[e]}),null,null,null);th.options.__file="src/components/Blocks/BlockTitle.vue";var eh=th.exports;const sh={};var ih=Dt({inheritAttrs:!1,props:{content:Object,fieldset:Object},methods:{field(t,e=null){let s=null;return Object.values(this.fieldset.tabs).forEach((e=>{e.fields[t]&&(s=e.fields[t])})),s||e},open(){this.$emit("open")},update(t){this.$emit("update",o(o({},this.content),t))}}},undefined,undefined,!1,(function(t){for(let e in sh)this[e]=sh[e]}),null,null,null);ih.options.__file="src/components/Blocks/BlockType.vue";var nh=ih.exports;r.component("k-block",Pp),r.component("k-blocks",qp),r.component("k-block-figure",Vp),r.component("k-block-options",Yp),r.component("k-block-selector",Zp),r.component("k-block-title",eh),r.component("k-block-type",nh);const oh={"./Types/Code.vue":Gd,"./Types/Default.vue":Zd,"./Types/Gallery.vue":sp,"./Types/Heading.vue":rp,"./Types/Image.vue":up,"./Types/List.vue":mp,"./Types/Markdown.vue":kp,"./Types/Quote.vue":$p,"./Types/Table.vue":Cp,"./Types/Text.vue":Ip,"./Types/Video.vue":Bp};Object.keys(oh).map((t=>{const e=t.match(/\/([a-zA-Z]*)\.vue/)[1].toLowerCase();let s=oh[t].default;s.extends=nh,r.component("k-block-type-"+e,s)})),r.component("k-dialog",qt),r.component("k-error-dialog",Vt),r.component("k-fiber-dialog",Gt),r.component("k-files-dialog",Zt),r.component("k-form-dialog",se),r.component("k-language-dialog",oe),r.component("k-pages-dialog",le),r.component("k-remove-dialog",pe),r.component("k-text-dialog",fe),r.component("k-users-dialog",ke),r.component("k-drawer",ye),r.component("k-form-drawer",xe),r.component("k-calendar",Le),r.component("k-counter",je),r.component("k-autocomplete",Ee),r.component("k-form",Re),r.component("k-form-buttons",Ue),r.component("k-form-indicator",Ke),r.component("k-field",rs),r.component("k-fieldset",us),r.component("k-input",ms),r.component("k-login",vs),r.component("k-login-code",_s),r.component("k-upload",xs),r.component("k-writer",pi),r.component("k-login-alert",fi),r.component("k-checkbox-input",bi),r.component("k-checkboxes-input",wi),r.component("k-date-input",Ei),r.component("k-datetime-input",Li),r.component("k-email-input",Ni),r.component("k-list-input",Vi),r.component("k-multiselect-input",Yi),r.component("k-number-input",Qi),r.component("k-password-input",nn),r.component("k-radio-input",ln),r.component("k-range-input",pn),r.component("k-select-input",gn),r.component("k-slug-input",_n),r.component("k-tags-input",xn),r.component("k-tel-input",On),r.component("k-text-input",Di),r.component("k-textarea-input",An),r.component("k-time-input",Dn),r.component("k-toggle-input",Nn),r.component("k-url-input",Hn),r.component("k-blocks-field",Wn),r.component("k-checkboxes-field",Xn),r.component("k-date-field",eo),r.component("k-email-field",oo),r.component("k-files-field",uo),r.component("k-gap-field",mo),r.component("k-headline-field",ko),r.component("k-info-field",yo),r.component("k-layout-field",Bo),r.component("k-line-field",Mo),r.component("k-list-field",qo),r.component("k-multiselect-field",Ho),r.component("k-number-field",Wo),r.component("k-pages-field",Jo),r.component("k-password-field",Qo),r.component("k-radio-field",sr),r.component("k-range-field",or),r.component("k-select-field",lr),r.component("k-slug-field",pr),r.component("k-structure-field",gr),r.component("k-tags-field",br),r.component("k-text-field",Sr),r.component("k-textarea-field",Or),r.component("k-tel-field",$r),r.component("k-time-field",Lr),r.component("k-toggle-field",Br),r.component("k-url-field",Pr),r.component("k-users-field",qr),r.component("k-writer-field",Hr),r.component("k-toolbar",Yr),r.component("k-toolbar-email-dialog",Zr),r.component("k-toolbar-link-dialog",ea),r.component("k-date-field-preview",na),r.component("k-email-field-preview",ua),r.component("k-files-field-preview",ha),r.component("k-list-field-preview",ga),r.component("k-pages-field-preview",ba),r.component("k-toggle-field-preview",Ca),r.component("k-time-field-preview",$a),r.component("k-url-field-preview",aa),r.component("k-users-field-preview",Ta),r.component("k-writer-field-preview",Aa),r.component("k-aspect-ratio",Da),r.component("k-bar",Ra),r.component("k-box",za),r.component("k-collection",Ka),r.component("k-column",Ja),r.component("k-dropzone",tl),r.component("k-empty",il),r.component("k-file-preview",rl),r.component("k-grid",cl),r.component("k-header",hl),r.component("k-inside",vl),r.component("k-item",yl),r.component("k-item-image",Sl),r.component("k-items",Tl),r.component("k-overlay",Fl),r.component("k-outside",Dl),r.component("k-tabs",Rl),r.component("k-view",zl),r.component("k-draggable",Kl),r.component("k-error-boundary",Yl),r.component("k-headline",Zl),r.component("k-icon",ec),r.component("k-icons",oc),r.component("k-image",cc),r.component("k-loader",pc),r.component("k-progress",fc),r.component("k-status-icon",$c),r.component("k-sort-handle",kc),r.component("k-text",Sc),r.component("k-user-info",Oc),r.component("k-breadcrumb",Lc),r.component("k-button",jc),r.component("k-button-disabled",Rc),r.component("k-button-group",zc),r.component("k-button-link",Kc),r.component("k-button-native",Xc),r.component("k-dropdown",tu),r.component("k-dropdown-content",nu),r.component("k-dropdown-item",lu),r.component("k-languages-dropdown",fu),r.component("k-link",pu),r.component("k-options-dropdown",bu),r.component("k-pagination",wu),r.component("k-prev-next",Eu),r.component("k-search",Iu),r.component("k-tag",Bu),r.component("k-topbar",Pu),r.component("k-sections",zu),r.component("k-info-section",Ku),r.component("k-pages-section",Ju),r.component("k-files-section",Qu),r.component("k-fields-section",sd),r.component("k-account-view",pd),r.component("k-error-view",fd),r.component("k-file-view",kd),r.component("k-installation-view",$d),r.component("k-login-view",Cd),r.component("k-page-view",Td),r.component("k-plugin-view",Ad),r.component("k-reset-password-view",jd),r.component("k-settings-view",Pd),r.component("k-site-view",qd),r.component("k-users-view",Hd),r.component("k-user-view",cd),r.config.errorHandler=t=>{window.panel.$config.debug&&window.console.error(t),jt.dispatch("notification/error",{message:t.message||"An error occurred. Please reload the Panel."})},window.panel=window.panel||{},window.panel.error=(t,e)=>{window.panel.$config.debug&&window.console.error(t+": "+e),jt.dispatch("error",t+". See the console for more information.")},window.panel.deprecated=t=>{console.warn("Deprecated: "+t)},z.extend(U),z.extend(H),r.prototype.$library={autosize:V,dayjs:z};let rh={};for(var ah in r.options.components)rh[ah]=r.options.components[ah];let lh={section:Uu};Object.entries(window.panel.plugins.components).forEach((([t,e])=>{e.template||e.render||e.extends?(e.extends&&"string"==typeof e.extends&&(e.extends=rh[e.extends].extend({options:e,components:o(o({},rh),e.components||{})}),e.template&&(e.render=null)),e.mixins&&(e.mixins=e.mixins.map((t=>"string"==typeof t?lh[t]:t))),rh[t]&&window.console.warn(`Plugin is replacing "${t}"`),r.component(t,e),rh[t]=r.options.components[t]):jt.dispatch("notification/error",`Neither template or render method provided nor extending a component when loading plugin component "${t}". The component has not been registered.`)})),window.panel.plugins.use.forEach((t=>{r.use(t)})),r.config.productionTip=!1,r.config.devtools=!0,r.use(Ct),r.use(ct),r.use(Ot),r.use(K),r.use(W),r.use(tt),r.use(lt,jt),document.addEventListener("fiber.start",(t=>{!0!==t.detail.silent&&jt.dispatch("isLoading",!0)})),document.addEventListener("fiber.finish",(()=>{0===r.$api.requests.length&&jt.dispatch("isLoading",!1)})),new r({store:jt,created(){window.panel.$vue=window.panel.app=this,window.panel.plugins.created.forEach((t=>t(this))),this.$store.dispatch("content/init")},render:t=>t(et)}).$mount("#app");
